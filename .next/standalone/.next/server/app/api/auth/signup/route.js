"use strict";(()=>{var e={};e.id=654,e.ids=[654],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7618:e=>{e.exports=import("bcryptjs")},4707:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{originalPathname:()=>h,patchFetch:()=>p,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var r=a(9303),n=a(8716),o=a(670),i=a(3829),u=e([i]);i=(u.then?(await u)():u)[0];let c=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/Users/jvalegri/tcc-jvalegri-1/app/api/auth/signup/route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:m}=c,h="/api/auth/signup/route";function p(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}s()}catch(e){s(e)}})},3829:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{POST:()=>i,dynamic:()=>u});var r=a(7070),n=a(7618),o=e([n]);n=(o.then?(await o)():o)[0];let u="force-dynamic";async function i(e){try{let{email:t,password:s,name:o}=await e.json();if(!t||!s)return r.NextResponse.json({message:"Email e senha s\xe3o obrigat\xf3rios."},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return r.NextResponse.json({message:"Formato de email inv\xe1lido."},{status:400});if(s.length<6)return r.NextResponse.json({message:"A senha deve ter pelo menos 6 caracteres."},{status:400});let{PrismaClient:i}=await Promise.resolve().then(a.t.bind(a,3524,23)),u=new i;try{if(await u.user.findUnique({where:{email:t.toLowerCase()}}))return r.NextResponse.json({message:"Este email j\xe1 est\xe1 cadastrado."},{status:409});let e=await n.default.hash(s,12),a=await u.user.create({data:{email:t.toLowerCase(),password:e,name:o||null,role:"COLABORADOR",status:"ATIVO"},select:{id:!0,email:!0,name:!0,role:!0,status:!0,createdAt:!0,updatedAt:!0}});return r.NextResponse.json({...a,projects:[]})}finally{await u.$disconnect()}}catch(e){return console.error("Erro no cadastro:",e),r.NextResponse.json({message:"Erro interno do servidor."},{status:500})}}s()}catch(e){s(e)}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[276,972],()=>a(4707));module.exports=s})();