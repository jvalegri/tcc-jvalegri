"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7618:e=>{e.exports=import("bcryptjs")},2813:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>p,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var o=r(9303),s=r(8716),n=r(670),i=r(6593),u=e([i]);i=(u.then?(await u)():u)[0];let c=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"/Users/jvalegri/tcc-jvalegri-1/app/api/auth/login/route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m}=c,h="/api/auth/login/route";function p(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}a()}catch(e){a(e)}})},6593:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{POST:()=>i,dynamic:()=>u});var o=r(7070),s=r(7618),n=e([s]);s=(n.then?(await n)():n)[0];let u="force-dynamic";async function i(e){try{let{email:t,password:a}=await e.json();if(!t||!a)return o.NextResponse.json({message:"Email e senha s\xe3o obrigat\xf3rios."},{status:400});let{PrismaClient:n}=await Promise.resolve().then(r.t.bind(r,3524,23)),i=new n;try{let e=await i.user.findUnique({where:{email:t.toLowerCase()},include:{ownedProjects:{select:{id:!0,name:!0,description:!0}}}});if(!e||!await s.default.compare(a,e.password))return o.NextResponse.json({message:"Email ou senha incorretos."},{status:401});let{password:r,...n}=e;return o.NextResponse.json({...n,projects:n.ownedProjects||[]})}finally{await i.$disconnect()}}catch(e){return console.error("Erro no login:",e),o.NextResponse.json({message:"Erro interno do servidor."},{status:500})}}a()}catch(e){a(e)}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972],()=>r(2813));module.exports=a})();