"use strict";(()=>{var e={};e.id=654,e.ids=[654],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},887:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>j,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var r={};s.r(r),s.d(r,{POST:()=>c,dynamic:()=>d});var a=s(9303),o=s(8716),n=s(670),i=s(7070),u=s(3524),p=s(8691);let d="force-dynamic",l=new u.PrismaClient;async function c(e){try{let{email:t,password:s,name:r}=await e.json();if(!t||!s)return i.NextResponse.json({message:"Email e senha s\xe3o obrigat\xf3rios."},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return i.NextResponse.json({message:"Formato de email inv\xe1lido."},{status:400});if(s.length<6)return i.NextResponse.json({message:"A senha deve ter pelo menos 6 caracteres."},{status:400});if(await l.user.findUnique({where:{email:t.toLowerCase()}}))return i.NextResponse.json({message:"Este email j\xe1 est\xe1 cadastrado."},{status:409});let a=await p.ZP.hash(s,12),o=await l.user.create({data:{email:t.toLowerCase(),password:a,name:r||null,role:"COLABORADOR",status:"ATIVO"},select:{id:!0,email:!0,name:!0,role:!0,status:!0,createdAt:!0,updatedAt:!0}});return i.NextResponse.json({...o,projects:[]})}catch(e){return console.error("Erro no cadastro:",e),i.NextResponse.json({message:"Erro interno do servidor."},{status:500})}finally{await l.$disconnect()}}let m=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/Users/jvalegri/tcc-jvalegri-1/app/api/auth/signup/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:x}=m,j="/api/auth/signup/route";function v(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,972,691],()=>s(887));module.exports=r})();