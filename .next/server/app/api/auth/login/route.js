"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7618:e=>{e.exports=import("bcryptjs")},12:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>p,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var o=r(9303),s=r(8716),n=r(670),i=r(6593),u=e([i]);i=(u.then?(await u)():u)[0];let c=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"/Users/jvalegri/tcc-jvalegri-1/app/api/auth/login/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m}=c,g="/api/auth/login/route";function p(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}a()}catch(e){a(e)}})},6593:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{POST:()=>u,dynamic:()=>p});var o=r(7070),s=r(7618),n=r(8118),i=e([s]);s=(i.then?(await i)():i)[0];let p="force-dynamic";async function u(e){try{let{email:t,password:r}=await e.json();if(!t||!r)return o.NextResponse.json({message:"Email e senha s\xe3o obrigat\xf3rios."},{status:400});let a=(0,n.g)(),i=await a.user.findUnique({where:{email:t.toLowerCase()},include:{ownedProjects:{select:{id:!0,name:!0,description:!0}}}});if(!i||!await s.default.compare(r,i.password))return o.NextResponse.json({message:"Email ou senha incorretos."},{status:401});let{password:u,...p}=i;return o.NextResponse.json({...p,projects:p.ownedProjects||[]})}catch(e){return console.error("Erro no login:",e),o.NextResponse.json({message:"Erro interno do servidor."},{status:500})}finally{await (0,n.E)()}}a()}catch(e){a(e)}})},8118:(e,t,r)=>{r.d(t,{E:()=>s,g:()=>o});var a=r(3524);function o(){return new a.PrismaClient}async function s(){global.__prisma&&await global.__prisma.$disconnect()}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972],()=>r(12));module.exports=a})();