"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},3890:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>j,patchFetch:()=>w,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var o={};r.r(o),r.d(o,{POST:()=>d,dynamic:()=>c});var s=r(9303),a=r(8716),n=r(670),i=r(7070),u=r(3524),p=r(8691);let c="force-dynamic",l=new u.PrismaClient;async function d(e){try{let{email:t,password:r}=await e.json();if(!t||!r)return i.NextResponse.json({message:"Email e senha s\xe3o obrigat\xf3rios."},{status:400});let o=await l.user.findUnique({where:{email:t.toLowerCase()},include:{ownedProjects:{select:{id:!0,name:!0,description:!0}}}});if(!o||!await p.ZP.compare(r,o.password))return i.NextResponse.json({message:"Email ou senha incorretos."},{status:401});let{password:s,...a}=o;return i.NextResponse.json({...a,projects:a.ownedProjects||[]})}catch(e){return console.error("Erro no login:",e),i.NextResponse.json({message:"Erro interno do servidor."},{status:500})}finally{await l.$disconnect()}}let m=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"/Users/jvalegri/tcc-jvalegri-1/app/api/auth/login/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:x}=m,j="/api/auth/login/route";function w(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,972,691],()=>r(3890));module.exports=o})();