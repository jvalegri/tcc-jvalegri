"use strict";(()=>{var e={};e.id=717,e.ids=[717],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3794:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>g,requestAsyncStorage:()=>b,routeModule:()=>j,serverHooks:()=>I,staticGenerationAsyncStorage:()=>x});var o={};t.r(o),t.d(o,{DELETE:()=>l,GET:()=>d,PUT:()=>p,dynamic:()=>c});var s=t(9303),n=t(8716),a=t(670),i=t(7070),m=t(3524);let c="force-dynamic",u=new m.PrismaClient;async function d(e,{params:r}){try{let e=await u.projectMember.findUnique({where:{id:r.memberId},include:{user:!0}});if(!e)return i.NextResponse.json({message:"Membro n\xe3o encontrado"},{status:404});return i.NextResponse.json(e)}catch(e){return console.error("Erro ao buscar membro:",e),i.NextResponse.json({message:"Erro interno do servidor"},{status:500})}finally{await u.$disconnect()}}async function p(e,{params:r}){try{let{status:t}=await e.json();if(!t||!["ATIVO","INATIVO"].includes(t))return i.NextResponse.json({message:"Status inv\xe1lido"},{status:400});let o=await u.projectMember.update({where:{id:r.memberId},data:{status:t},include:{user:!0}});return i.NextResponse.json(o)}catch(e){return console.error("Erro ao atualizar status:",e),i.NextResponse.json({message:"Erro interno do servidor"},{status:500})}finally{await u.$disconnect()}}async function l(e,{params:r}){try{let e=await u.projectMember.findUnique({where:{id:r.memberId},include:{user:!0}});if(!e)return i.NextResponse.json({message:"Membro n\xe3o encontrado"},{status:404});if("GESTOR"===e.role&&await u.projectMember.count({where:{projectId:r.projectId,role:"GESTOR",status:"ATIVO"}})<=1)return i.NextResponse.json({message:"N\xe3o \xe9 poss\xedvel remover o \xfaltimo gestor do projeto"},{status:400});return await u.projectMember.delete({where:{id:r.memberId}}),i.NextResponse.json({message:"Membro removido com sucesso"},{status:200})}catch(e){return console.error("Erro ao remover membro:",e),i.NextResponse.json({message:"Erro interno do servidor"},{status:500})}finally{await u.$disconnect()}}let j=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/projects/[projectId]/members/[memberId]/route",pathname:"/api/projects/[projectId]/members/[memberId]",filename:"route",bundlePath:"app/api/projects/[projectId]/members/[memberId]/route"},resolvedPagePath:"/Users/jvalegri/tcc-jvalegri-1/app/api/projects/[projectId]/members/[memberId]/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:b,staticGenerationAsyncStorage:x,serverHooks:I}=j,v="/api/projects/[projectId]/members/[memberId]/route";function g(){return(0,a.patchFetch)({serverHooks:I,staticGenerationAsyncStorage:x})}}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,972],()=>t(3794));module.exports=o})();