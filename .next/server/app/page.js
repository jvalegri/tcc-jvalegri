(()=>{var e={};e.id=979,e.ids=[979],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},2048:e=>{"use strict";e.exports=require("fs")},6162:e=>{"use strict";e.exports=require("stream")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4188:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>c}),r(908),r(1506),r(5866);var n=r(3191),i=r(8716),o=r(7922),a=r.n(o),s=r(5231),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,908)),"/Users/jvalegri/tcc-jvalegri-1/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"/Users/jvalegri/tcc-jvalegri-1/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/jvalegri/tcc-jvalegri-1/app/page.tsx"],u="/page",h={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6236:(e,t,r)=>{Promise.resolve().then(r.bind(r,5239))},8234:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},2640:()=>{},5239:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{default:()=>dT});var i,o,a,s,l,c,d,u,h,f=r(326),p=r(7577),g=r.t(p,2);function m(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n)}return i}(e))&&(n&&(n+=" "),n+=t);return n}let w=e=>{let t=A(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),y(r,t)||C(e)},getConflictingClassGroupIds:(e,t)=>{let i=r[e]||[];return t&&n[e]?[...i,...n[e]]:i}}},y=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],n=t.nextPart.get(r),i=n?y(e.slice(1),n):void 0;if(i)return i;if(0===t.validators.length)return;let o=e.join("-");return t.validators.find(({validator:e})=>e(o))?.classGroupId},E=/^\[(.+)\]$/,C=e=>{if(E.test(e)){let t=E.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},A=e=>{let{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return S(Object.entries(e.classGroups),r).forEach(([e,r])=>{x(r,n,e,t)}),n},x=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:b(t,e)).classGroupId=r;return}if("function"==typeof e){if(v(e)){x(e(n),t,r,n);return}t.validators.push({validator:e,classGroupId:r});return}Object.entries(e).forEach(([e,i])=>{x(i,b(t,e),r,n)})})},b=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},v=e=>e.isThemeGetter,S=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,I=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,n=new Map,i=(i,o)=>{r.set(i,o),++t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(i(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):i(e,t)}}},_=e=>{let{separator:t,experimentalParseClassName:r}=e,n=1===t.length,i=t[0],o=t.length,a=e=>{let r;let a=[],s=0,l=0;for(let c=0;c<e.length;c++){let d=e[c];if(0===s){if(d===i&&(n||e.slice(c,c+o)===t)){a.push(e.slice(l,c)),l=c+o;continue}if("/"===d){r=c;continue}}"["===d?s++:"]"===d&&s--}let c=0===a.length?e:e.substring(l),d=c.startsWith("!"),u=d?c.substring(1):c;return{modifiers:a,hasImportantModifier:d,baseClassName:u,maybePostfixModifierPosition:r&&r>l?r-l:void 0}};return r?e=>r({className:e,parseClassName:a}):a},T=e=>{if(e.length<=1)return e;let t=[],r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},N=e=>({cache:I(e.cacheSize),parseClassName:_(e),...w(e)}),R=/\s+/,M=(e,t)=>{let{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,o=[],a=e.trim().split(R),s="";for(let e=a.length-1;e>=0;e-=1){let t=a[e],{modifiers:l,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=r(t),h=!!u,f=n(h?d.substring(0,u):d);if(!f){if(!h||!(f=n(d))){s=t+(s.length>0?" "+s:s);continue}h=!1}let p=T(l).join(":"),g=c?p+"!":p,m=g+f;if(o.includes(m))continue;o.push(m);let w=i(f,h);for(let e=0;e<w.length;++e){let t=w[e];o.push(g+t)}s=t+(s.length>0?" "+s:s)}return s};function D(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=O(e))&&(n&&(n+=" "),n+=t);return n}let O=e=>{let t;if("string"==typeof e)return e;let r="";for(let n=0;n<e.length;n++)e[n]&&(t=O(e[n]))&&(r&&(r+=" "),r+=t);return r},P=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},L=/^\[(?:([a-z-]+):)?(.+)\]$/i,j=/^\d+\/\d+$/,B=new Set(["px","full","screen"]),k=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,F=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,U=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,H=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,z=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,V=e=>G(e)||B.has(e)||j.test(e),Y=e=>ei(e,"length",eo),G=e=>!!e&&!Number.isNaN(Number(e)),W=e=>ei(e,"number",G),X=e=>!!e&&Number.isInteger(Number(e)),q=e=>e.endsWith("%")&&G(e.slice(0,-1)),Z=e=>L.test(e),Q=e=>k.test(e),K=new Set(["length","size","percentage"]),$=e=>ei(e,K,ea),J=e=>ei(e,"position",ea),ee=new Set(["image","url"]),et=e=>ei(e,ee,el),er=e=>ei(e,"",es),en=()=>!0,ei=(e,t,r)=>{let n=L.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},eo=e=>F.test(e)&&!U.test(e),ea=()=>!1,es=e=>H.test(e),el=e=>z.test(e);Symbol.toStringTag;let ec=function(e,...t){let r,n,i;let o=function(s){return n=(r=N(t.reduce((e,t)=>t(e),e()))).cache.get,i=r.cache.set,o=a,a(s)};function a(e){let t=n(e);if(t)return t;let o=M(e,r);return i(e,o),o}return function(){return o(D.apply(null,arguments))}}(()=>{let e=P("colors"),t=P("spacing"),r=P("blur"),n=P("brightness"),i=P("borderColor"),o=P("borderRadius"),a=P("borderSpacing"),s=P("borderWidth"),l=P("contrast"),c=P("grayscale"),d=P("hueRotate"),u=P("invert"),h=P("gap"),f=P("gradientColorStops"),p=P("gradientColorStopPositions"),g=P("inset"),m=P("margin"),w=P("opacity"),y=P("padding"),E=P("saturate"),C=P("scale"),A=P("sepia"),x=P("skew"),b=P("space"),v=P("translate"),S=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",Z,t],T=()=>[Z,t],N=()=>["",V,Y],R=()=>["auto",G,Z],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],D=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",Z],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>[G,Z];return{cacheSize:500,separator:":",theme:{colors:[en],spacing:[V,Y],blur:["none","",Q,Z],brightness:k(),borderColor:[e],borderRadius:["none","","full",Q,Z],borderSpacing:T(),borderWidth:N(),contrast:k(),grayscale:j(),hueRotate:k(),invert:j(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[q,Y],inset:_(),margin:_(),opacity:k(),padding:T(),saturate:k(),scale:k(),sepia:j(),skew:k(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",Z]}],container:["container"],columns:[{columns:[Q]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),Z]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",X,Z]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Z]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",X,Z]}],"grid-cols":[{"grid-cols":[en]}],"col-start-end":[{col:["auto",{span:["full",X,Z]},Z]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[en]}],"row-start-end":[{row:["auto",{span:[X,Z]},Z]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Z]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Z]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Z,t]}],"min-w":[{"min-w":[Z,t,"min","max","fit"]}],"max-w":[{"max-w":[Z,t,"none","full","min","max","fit","prose",{screen:[Q]},Q]}],h:[{h:[Z,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Z,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Z,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Z,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Q,Y]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",W]}],"font-family":[{font:[en]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Z]}],"line-clamp":[{"line-clamp":["none",G,W]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",V,Z]}],"list-image":[{"list-image":["none",Z]}],"list-style-type":[{list:["none","disc","decimal",Z]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",V,Y]}],"underline-offset":[{"underline-offset":["auto",V,Z]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),J]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},et]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...D(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:D()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...D()]}],"outline-offset":[{"outline-offset":[V,Z]}],"outline-w":[{outline:[V,Y]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[V,Y]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Q,er]}],"shadow-color":[{shadow:[en]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Q,Z]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[E]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Z]}],duration:[{duration:k()}],ease:[{ease:["linear","in","out","in-out",Z]}],delay:[{delay:k()}],animate:[{animate:["none","spin","ping","pulse","bounce",Z]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[X,Z]}],"translate-x":[{"translate-x":[v]}],"translate-y":[{"translate-y":[v]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Z]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Z]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Z]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[V,Y,W]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function ed(...e){return ec(m(e))}function eu(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function eh(...e){return t=>{let r=!1,n=e.map(e=>{let n=eu(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():eu(e[t],null)}}}}function ef(...e){return p.useCallback(eh(...e),e)}var ep=p.forwardRef((e,t)=>{let{children:r,...n}=e,i=p.Children.toArray(r),o=i.find(ew);if(o){let e=o.props.children,r=i.map(t=>t!==o?t:p.Children.count(e)>1?p.Children.only(null):p.isValidElement(e)?e.props.children:null);return(0,f.jsx)(eg,{...n,ref:t,children:p.isValidElement(e)?p.cloneElement(e,void 0,r):null})}return(0,f.jsx)(eg,{...n,ref:t,children:r})});ep.displayName="Slot";var eg=p.forwardRef((e,t)=>{let{children:r,...n}=e;if(p.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r);return p.cloneElement(r,{...function(e,t){let r={...t};for(let n in t){let i=e[n],o=t[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...e)=>{o(...e),i(...e)}:i&&(r[n]=i):"style"===n?r[n]={...i,...o}:"className"===n&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props),ref:t?eh(t,e):e})}return p.Children.count(r)>1?p.Children.only(null):null});eg.displayName="SlotClone";var em=({children:e})=>(0,f.jsx)(f.Fragment,{children:e});function ew(e){return p.isValidElement(e)&&e.type===em}let ey=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,eE=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return m(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:o}=t,a=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],n=null==o?void 0:o[e];if(null===t)return null;let a=ey(t)||ey(n);return i[e][a]}),s=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return m(e,a,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...i}=t;return Object.entries(i).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...s}[t]):({...o,...s})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)},eC=eE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),eA=p.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},o)=>{let a=n?ep:"button";return f.jsx(a,{className:ed(eC({variant:t,size:r,className:e})),ref:o,...i})});eA.displayName="Button";let ex=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eb=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var ev={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let eS=(0,p.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:a,...s},l)=>(0,p.createElement)("svg",{ref:l,...ev,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:eb("lucide",i),...s},[...a.map(([e,t])=>(0,p.createElement)(e,t)),...Array.isArray(o)?o:[o]])),eI=(e,t)=>{let r=(0,p.forwardRef)(({className:r,...n},i)=>(0,p.createElement)(eS,{ref:i,iconNode:t,className:eb(`lucide-${ex(e)}`,r),...n}));return r.displayName=`${e}`,r},e_=eI("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),eT=eI("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),eN=eI("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),eR=eI("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),eM=eI("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),eD=eI("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eO=eI("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),eP=eI("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),eL=eI("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ej=[{id:"dashboard",name:"Dashboard",icon:e_,roles:["GESTOR","COLABORADOR"]},{id:"materials",name:"Materiais",icon:eT,roles:["GESTOR","COLABORADOR"]},{id:"scanner",name:"Scanner QR",icon:eN,roles:["GESTOR","COLABORADOR"]},{id:"movements",name:"Movimenta\xe7\xf5es",icon:eR,roles:["GESTOR","COLABORADOR"]},{id:"users",name:"Gest\xe3o de Usu\xe1rios",icon:eM,roles:["GESTOR"]}];function eB({currentPage:e,setCurrentPage:t,sidebarOpen:r,setSidebarOpen:n,onLogout:i,currentUserRole:o,projectName:a,onBackToProjects:s}){let l=ej.filter(e=>!o||e.roles.includes(o));return(0,f.jsxs)(f.Fragment,{children:[r&&f.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 md:hidden",onClick:()=>n(!1)}),(0,f.jsxs)("div",{className:ed("fixed inset-y-0 left-0 z-50 w-64 bg-card border-r transform transition-transform duration-200 ease-in-out md:relative md:translate-x-0 flex flex-col",r?"translate-x-0":"-translate-x-full"),children:[(0,f.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,f.jsxs)("div",{className:"flex flex-col",children:[f.jsx("h1",{className:"text-xl font-bold",children:"EasyStock"}),a&&f.jsx("p",{className:"text-sm text-muted-foreground font-medium truncate",children:a})]}),f.jsx(eA,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>n(!1),children:f.jsx(eD,{className:"h-4 w-4"})})]}),f.jsx("nav",{className:"p-4 space-y-2 flex-1",children:l.map(r=>{let i=r.icon;return(0,f.jsxs)(eA,{variant:e===r.id?"default":"ghost",className:"w-full justify-start",onClick:()=>{t(r.id),n(!1)},children:[f.jsx(i,{className:"mr-2 h-4 w-4"}),r.name]},r.id)})}),(0,f.jsxs)("div",{className:"p-4 border-t space-y-2",children:[(0,f.jsxs)(eA,{variant:"outline",className:"w-full justify-start",onClick:()=>{t("profile"),n(!1)},children:[f.jsx(eO,{className:"mr-2 h-4 w-4"}),"Perfil"]}),(0,f.jsxs)(eA,{variant:"outline",className:"w-full justify-start",onClick:()=>{s?.(),n(!1)},children:[f.jsx(eP,{className:"mr-2 h-4 w-4"}),"Meus Projetos"]}),(0,f.jsxs)(eA,{variant:"outline",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:i,children:[f.jsx(eL,{className:"mr-2 h-4 w-4"}),"Sair"]})]})]})]})}let ek=eI("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),eF=eI("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),eU=eI("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),eH=eI("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var ez=(e,t,r,n,i,o,a,s)=>{let l=document.documentElement,c=["light","dark"];function d(t){(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&o?i.map(e=>o[e]||e):i;r?(l.classList.remove(...n),l.classList.add(o&&o[t]?o[t]:t)):l.setAttribute(e,t)}),s&&c.includes(t)&&(l.style.colorScheme=t)}if(n)d(n);else try{let e=localStorage.getItem(t)||r,n=a&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(n)}catch(e){}},eV=["light","dark"],eY="(prefers-color-scheme: dark)",eG=p.createContext(void 0),eW={setTheme:e=>{},themes:[]},eX=()=>{var e;return null!=(e=p.useContext(eG))?e:eW},eq=e=>p.useContext(eG)?p.createElement(p.Fragment,null,e.children):p.createElement(eQ,{...e}),eZ=["light","dark"],eQ=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:i="theme",themes:o=eZ,defaultTheme:a=r?"system":"light",attribute:s="data-theme",value:l,children:c,nonce:d,scriptProps:u})=>{let[h,f]=p.useState(()=>e$(i,a)),[g,m]=p.useState(()=>"system"===h?e1():h),w=l?Object.values(l):o,y=p.useCallback(e=>{let i=e;if(!i)return;"system"===e&&r&&(i=e1());let o=l?l[i]:i,c=t?eJ(d):null,u=document.documentElement,h=e=>{"class"===e?(u.classList.remove(...w),o&&u.classList.add(o)):e.startsWith("data-")&&(o?u.setAttribute(e,o):u.removeAttribute(e))};if(Array.isArray(s)?s.forEach(h):h(s),n){let e=eV.includes(a)?a:null,t=eV.includes(i)?i:e;u.style.colorScheme=t}null==c||c()},[d]),E=p.useCallback(e=>{let t="function"==typeof e?e(h):e;f(t);try{localStorage.setItem(i,t)}catch(e){}},[h]),C=p.useCallback(t=>{m(e1(t)),"system"===h&&r&&!e&&y("system")},[h,e]);p.useEffect(()=>{let e=window.matchMedia(eY);return e.addListener(C),C(e),()=>e.removeListener(C)},[C]),p.useEffect(()=>{let e=e=>{e.key===i&&(e.newValue?f(e.newValue):E(a))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[E]),p.useEffect(()=>{y(null!=e?e:h)},[e,h]);let A=p.useMemo(()=>({theme:h,setTheme:E,forcedTheme:e,resolvedTheme:"system"===h?g:h,themes:r?[...o,"system"]:o,systemTheme:r?g:void 0}),[h,E,e,g,r,o]);return p.createElement(eG.Provider,{value:A},p.createElement(eK,{forcedTheme:e,storageKey:i,attribute:s,enableSystem:r,enableColorScheme:n,defaultTheme:a,value:l,themes:o,nonce:d,scriptProps:u}),c)},eK=p.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:o,value:a,themes:s,nonce:l,scriptProps:c})=>{let d=JSON.stringify([r,t,o,e,s,a,n,i]).slice(1,-1);return p.createElement("script",{...c,suppressHydrationWarning:!0,nonce:l,dangerouslySetInnerHTML:{__html:`(${ez.toString()})(${d})`}})}),e$=(e,t)=>{},eJ=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},e1=e=>(e||(e=window.matchMedia(eY)),e.matches?"dark":"light");let e0={dashboard:"Dashboard",materials:"Materiais",scanner:"Scanner QR",movements:"Movimenta\xe7\xf5es",profile:"Perfil",users:"Gest\xe3o de Usu\xe1rios"};function e2({currentPage:e,setSidebarOpen:t,projectName:r}){let{theme:n,setTheme:i}=eX();return(0,f.jsxs)("header",{className:"bg-card border-b px-4 py-3 flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center gap-4",children:[f.jsx(eA,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>t(!0),children:f.jsx(ek,{className:"h-4 w-4"})}),(0,f.jsxs)("div",{className:"flex items-center gap-3",children:[r&&(0,f.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[f.jsx(eF,{className:"h-4 w-4"}),f.jsx("span",{className:"text-sm font-medium",children:r}),f.jsx("span",{className:"text-muted-foreground",children:"â€¢"})]}),f.jsx("h2",{className:"text-lg font-semibold",children:e0[e]})]})]}),f.jsx("div",{className:"flex items-center gap-2",children:(0,f.jsxs)(eA,{variant:"ghost",size:"icon",onClick:()=>i("dark"===n?"light":"dark"),children:[f.jsx(eU,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),f.jsx(eH,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]})})]})}let e4=p.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ed("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));e4.displayName="Card";let e3=p.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ed("flex flex-col space-y-1.5 p-6",e),...t}));e3.displayName="CardHeader";let e8=p.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ed("text-2xl font-semibold leading-none tracking-tight",e),...t}));e8.displayName="CardTitle";let e6=p.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ed("text-sm text-muted-foreground",e),...t}));e6.displayName="CardDescription";let e5=p.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ed("p-6 pt-0",e),...t}));e5.displayName="CardContent",p.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ed("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";let e7=eE("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function e9({className:e,variant:t,...r}){return f.jsx("div",{className:ed(e7({variant:t}),e),...r})}let te=eI("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),tt=eI("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),tr=eI("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),tn=e=>{let t;let r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,o={setState:n,getState:i,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(n,i,o);return o},ti=e=>e?tn(e):tn,to=e=>e,ta=e=>{let t=ti(e),r=e=>(function(e,t=to){let r=p.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return p.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},ts=(n=(e,t)=>({materials:[],movements:[],currentProjectId:null,currentUserId:null,isLoading:!1,error:null,setMaterials:t=>e({materials:t}),setMovements:t=>e({movements:t}),setCurrentProjectId:t=>e({currentProjectId:t}),setCurrentUserId:t=>e({currentUserId:t}),setError:t=>e({error:t}),fetchMaterials:async t=>{try{e({isLoading:!0,error:null});let r=await fetch(`/api/materials?projectId=${t}`);if(!r.ok)throw Error(`Erro ao buscar materiais: ${r.status}`);let n=await r.json();e({materials:n,isLoading:!1})}catch(t){throw console.error("Erro ao buscar materiais:",t),e({error:t instanceof Error?t.message:"Erro desconhecido",isLoading:!1}),t}},fetchMovements:async t=>{try{e({isLoading:!0,error:null});let r=await fetch(`/api/movements?projectId=${t}`);if(!r.ok)throw Error(`Erro ao buscar movimenta\xe7\xf5es: ${r.status}`);let n=await r.json();e({movements:n,isLoading:!1})}catch(t){throw console.error("Erro ao buscar movimenta\xe7\xf5es:",t),e({error:t instanceof Error?t.message:"Erro desconhecido",isLoading:!1}),t}},addMaterial:async(t,r)=>{try{e({isLoading:!0,error:null});let r=await fetch("/api/materials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error(`Erro ao adicionar material: ${r.status}`);let n=await r.json();e(e=>({materials:[...e.materials,n],isLoading:!1}))}catch(t){throw console.error("Erro ao adicionar material:",t),e({error:t instanceof Error?t.message:"Erro desconhecido",isLoading:!1}),t}},updateMaterial:async(t,r)=>{try{e({isLoading:!0,error:null});let n={id:t,name:r.name,description:r.notes,type:r.category,currentQuantity:r.quantity,unit:r.unit,price:r.price,supplier:r.supplier,minStock:r.minStock},i=await fetch("/api/materials",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw Error(`Erro ao atualizar material: ${i.status}`);let o=await i.json();e(e=>({materials:e.materials.map(e=>e.id===t?o:e),isLoading:!1}))}catch(t){throw console.error("Erro ao atualizar material:",t),e({error:t instanceof Error?t.message:"Erro desconhecido",isLoading:!1}),t}},updateMaterialQuantity:(t,r)=>{e(e=>({materials:e.materials.map(e=>e.id===t?{...e,quantity:r}:e)}))},deleteMaterial:t=>{e(e=>({materials:e.materials.filter(e=>e.id!==t)}))},addMovement:async(t,r,n)=>{try{e({isLoading:!0,error:null});let i=await fetch("/api/movements",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,projectId:r,userId:n})});if(!i.ok)throw Error(`Erro ao adicionar movimenta\xe7\xe3o: ${i.status}`);let o=await i.json();e(e=>({movements:[...e.movements,o],isLoading:!1})),"entrada"===t.type?e(e=>({materials:e.materials.map(e=>e.id===t.materialId?{...e,quantity:e.quantity+t.quantity}:e)})):e(e=>({materials:e.materials.map(e=>e.id===t.materialId?{...e,quantity:Math.max(0,e.quantity-t.quantity)}:e)}))}catch(t){throw console.error("Erro ao adicionar movimenta\xe7\xe3o:",t),e({error:t instanceof Error?t.message:"Erro desconhecido",isLoading:!1}),t}},clearData:()=>{e({materials:[],movements:[],currentProjectId:null,currentUserId:null,isLoading:!1,error:null})}}))?ta(n):ta;function tl(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}function tc(e,t=[]){let r=[],n=()=>{let t=r.map(e=>p.createContext(e));return function(r){let n=r?.[e]||t;return p.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){let i=p.createContext(n),o=r.length;r=[...r,n];let a=t=>{let{scope:r,children:n,...a}=t,s=r?.[e]?.[o]||i,l=p.useMemo(()=>a,Object.values(a));return(0,f.jsx)(s.Provider,{value:l,children:n})};return a.displayName=t+"Provider",[a,function(r,a){let s=a?.[e]?.[o]||i,l=p.useContext(s);if(l)return l;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let i=r(e)[`__scope${n}`];return{...t,...i}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(n,...t)]}var td=globalThis?.document?p.useLayoutEffect:()=>{},tu=g["useId".toString()]||(()=>void 0),th=0;function tf(e){let[t,r]=p.useState(tu());return td(()=>{e||r(e=>e??String(th++))},[e]),e||(t?`radix-${t}`:"")}function tp(e){let t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...e)=>t.current?.(...e),[])}function tg({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,i]=function({defaultProp:e,onChange:t}){let r=p.useState(e),[n]=r,i=p.useRef(n),o=tp(t);return p.useEffect(()=>{i.current!==n&&(o(n),i.current=n)},[n,i,o]),r}({defaultProp:t,onChange:r}),o=void 0!==e,a=o?e:n,s=tp(r);return[a,p.useCallback(t=>{if(o){let r="function"==typeof t?t(e):t;r!==e&&s(r)}else i(t)},[o,e,i,s])]}var tm=r(962),tw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=p.forwardRef((e,r)=>{let{asChild:n,...i}=e,o=n?ep:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,f.jsx)(o,{...i,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function ty(e,t){e&&tm.flushSync(()=>e.dispatchEvent(t))}var tE="dismissableLayer.update",tC=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tA=p.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:s,onDismiss:l,...c}=e,d=p.useContext(tC),[u,h]=p.useState(null),g=u?.ownerDocument??globalThis?.document,[,m]=p.useState({}),w=ef(t,e=>h(e)),y=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),C=y.indexOf(E),A=u?y.indexOf(u):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,b=A>=C,v=function(e,t=globalThis?.document){let r=tp(e),n=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{let e=e=>{if(e.target&&!n.current){let n=function(){tv("dismissableLayer.pointerDownOutside",r,o,{discrete:!0})},o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=n,t.addEventListener("click",i.current,{once:!0})):n()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{let t=e.target,r=[...d.branches].some(e=>e.contains(t));!b||r||(i?.(e),s?.(e),e.defaultPrevented||l?.())},g),S=function(e,t=globalThis?.document){let r=tp(e),n=p.useRef(!1);return p.useEffect(()=>{let e=e=>{e.target&&!n.current&&tv("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{let t=e.target;[...d.branches].some(e=>e.contains(t))||(a?.(e),s?.(e),e.defaultPrevented||l?.())},g);return function(e,t=globalThis?.document){let r=tp(e);p.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{A!==d.layers.size-1||(n?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},g),p.useEffect(()=>{if(u)return r&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(o=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),tb(),()=>{r&&1===d.layersWithOutsidePointerEventsDisabled.size&&(g.body.style.pointerEvents=o)}},[u,g,r,d]),p.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),tb())},[u,d]),p.useEffect(()=>{let e=()=>m({});return document.addEventListener(tE,e),()=>document.removeEventListener(tE,e)},[]),(0,f.jsx)(tw.div,{...c,ref:w,style:{pointerEvents:x?b?"auto":"none":void 0,...e.style},onFocusCapture:tl(e.onFocusCapture,S.onFocusCapture),onBlurCapture:tl(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:tl(e.onPointerDownCapture,v.onPointerDownCapture)})});tA.displayName="DismissableLayer";var tx=p.forwardRef((e,t)=>{let r=p.useContext(tC),n=p.useRef(null),i=ef(t,n);return p.useEffect(()=>{let e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,f.jsx)(tw.div,{...e,ref:i})});function tb(){let e=new CustomEvent(tE);document.dispatchEvent(e)}function tv(e,t,r,{discrete:n}){let i=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?ty(i,o):i.dispatchEvent(o)}tx.displayName="DismissableLayerBranch";var tS="focusScope.autoFocusOnMount",tI="focusScope.autoFocusOnUnmount",t_={bubbles:!1,cancelable:!0},tT=p.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...a}=e,[s,l]=p.useState(null),c=tp(i),d=tp(o),u=p.useRef(null),h=ef(t,e=>l(e)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let e=function(e){if(g.paused||!s)return;let t=e.target;s.contains(t)?u.current=t:tM(u.current,{select:!0})},t=function(e){if(g.paused||!s)return;let t=e.relatedTarget;null===t||s.contains(t)||tM(u.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&tM(s)});return s&&r.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,s,g.paused]),p.useEffect(()=>{if(s){tD.add(g);let e=document.activeElement;if(!s.contains(e)){let t=new CustomEvent(tS,t_);s.addEventListener(tS,c),s.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(tM(n,{select:t}),document.activeElement!==r)return}(tN(s).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&tM(s))}return()=>{s.removeEventListener(tS,c),setTimeout(()=>{let t=new CustomEvent(tI,t_);s.addEventListener(tI,d),s.dispatchEvent(t),t.defaultPrevented||tM(e??document.body,{select:!0}),s.removeEventListener(tI,d),tD.remove(g)},0)}}},[s,c,d,g]);let m=p.useCallback(e=>{if(!r&&!n||g.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let t=e.currentTarget,[n,o]=function(e){let t=tN(e);return[tR(t,e),tR(t.reverse(),e)]}(t);n&&o?e.shiftKey||i!==o?e.shiftKey&&i===n&&(e.preventDefault(),r&&tM(o,{select:!0})):(e.preventDefault(),r&&tM(n,{select:!0})):i===t&&e.preventDefault()}},[r,n,g.paused]);return(0,f.jsx)(tw.div,{tabIndex:-1,...a,ref:h,onKeyDown:m})});function tN(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function tR(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function tM(e,{select:t=!1}={}){if(e&&e.focus){var r;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}tT.displayName="FocusScope";var tD=function(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),(e=tO(e,t)).unshift(t)},remove(t){e=tO(e,t),e[0]?.resume()}}}();function tO(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}var tP=p.forwardRef((e,t)=>{let{container:r,...n}=e,[i,o]=p.useState(!1);td(()=>o(!0),[]);let a=r||i&&globalThis?.document?.body;return a?tm.createPortal((0,f.jsx)(tw.div,{...n,ref:t}),a):null});tP.displayName="Portal";var tL=e=>{let{present:t,children:r}=e,n=function(e){var t,r;let[n,i]=p.useState(),o=p.useRef({}),a=p.useRef(e),s=p.useRef("none"),[l,c]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},p.useReducer((e,t)=>r[e][t]??e,t));return p.useEffect(()=>{let e=tj(o.current);s.current="mounted"===l?e:"none"},[l]),td(()=>{let t=o.current,r=a.current;if(r!==e){let n=s.current,i=tj(t);e?c("MOUNT"):"none"===i||t?.display==="none"?c("UNMOUNT"):r&&n!==i?c("ANIMATION_OUT"):c("UNMOUNT"),a.current=e}},[e,c]),td(()=>{if(n){let e;let t=n.ownerDocument.defaultView??window,r=r=>{let i=tj(o.current).includes(r.animationName);if(r.target===n&&i&&(c("ANIMATION_END"),!a.current)){let r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)})}},i=e=>{e.target===n&&(s.current=tj(o.current))};return n.addEventListener("animationstart",i),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",i),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(e=>{e&&(o.current=getComputedStyle(e)),i(e)},[])}}(t),i="function"==typeof r?r({present:n.isPresent}):p.Children.only(r),o=ef(n.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(i));return"function"==typeof r||n.isPresent?p.cloneElement(i,{ref:o}):null};function tj(e){return e?.animationName||"none"}tL.displayName="Presence";var tB=0;function tk(){p.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??tF()),document.body.insertAdjacentElement("beforeend",e[1]??tF()),tB++,()=>{1===tB&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tB--}},[])}function tF(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var tU=function(){return(tU=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function tH(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}Object.create,Object.create;var tz=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),tV="width-before-scroll-bar";function tY(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var tG="undefined"!=typeof window?p.useLayoutEffect:p.useEffect,tW=new WeakMap;function tX(e){return e}var tq=function(e){void 0===e&&(e={});var t,r,n,i=(void 0===t&&(t=tX),r=[],n=!1,{read:function(){if(n)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:null},useMedium:function(e){var i=t(e,n);return r.push(i),function(){r=r.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var i=r;r=[],i.forEach(e),t=r}var o=function(){var r=t;t=[],r.forEach(e)},a=function(){return Promise.resolve().then(o)};a(),r={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),r}}}});return i.options=tU({async:!0,ssr:!1},e),i}(),tZ=function(){},tQ=p.forwardRef(function(e,t){var r,n,i,o,a=p.useRef(null),s=p.useState({onScrollCapture:tZ,onWheelCapture:tZ,onTouchMoveCapture:tZ}),l=s[0],c=s[1],d=e.forwardProps,u=e.children,h=e.className,f=e.removeScrollBar,g=e.enabled,m=e.shards,w=e.sideCar,y=e.noRelative,E=e.noIsolation,C=e.inert,A=e.allowPinchZoom,x=e.as,b=e.gapMode,v=tH(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=(r=[a,t],n=function(e){return r.forEach(function(t){return tY(t,e)})},(i=(0,p.useState)(function(){return{value:null,callback:n,facade:{get current(){return i.value},set current(value){var e=i.value;e!==value&&(i.value=value,i.callback(value,e))}}}})[0]).callback=n,o=i.facade,tG(function(){var e=tW.get(o);if(e){var t=new Set(e),n=new Set(r),i=o.current;t.forEach(function(e){n.has(e)||tY(e,null)}),n.forEach(function(e){t.has(e)||tY(e,i)})}tW.set(o,r)},[r]),o),I=tU(tU({},v),l);return p.createElement(p.Fragment,null,g&&p.createElement(w,{sideCar:tq,removeScrollBar:f,shards:m,noRelative:y,noIsolation:E,inert:C,setCallbacks:c,allowPinchZoom:!!A,lockRef:a,gapMode:b}),d?p.cloneElement(p.Children.only(u),tU(tU({},I),{ref:S})):p.createElement(void 0===x?"div":x,tU({},I,{className:h,ref:S}),u))});tQ.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},tQ.classNames={fullWidth:tV,zeroRight:tz};var tK=function(e){var t=e.sideCar,r=tH(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return p.createElement(n,tU({},r))};tK.isSideCarExport=!0;var t$=function(){var e=0,t=null;return{add:function(n){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=a||r.nc;return t&&e.setAttribute("nonce",t),e}())){var i,o;(i=t).styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),o=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(o)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tJ=function(){var e=t$();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},t1=function(){var e=tJ();return function(t){return e(t.styles,t.dynamic),null}},t0={left:0,top:0,right:0,gap:0},t2=function(e){return parseInt(e||"",10)||0},t4=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[t2(r),t2(n),t2(i)]},t3=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return t0;var t=t4(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},t8=t1(),t6="data-scroll-locked",t5=function(e,t,r,n){var i=e.left,o=e.top,a=e.right,s=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(s,"px ").concat(n,";\n  }\n  body[").concat(t6,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(tz," {\n    right: ").concat(s,"px ").concat(n,";\n  }\n  \n  .").concat(tV," {\n    margin-right: ").concat(s,"px ").concat(n,";\n  }\n  \n  .").concat(tz," .").concat(tz," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(tV," .").concat(tV," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(t6,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},t7=function(){var e=parseInt(document.body.getAttribute(t6)||"0",10);return isFinite(e)?e:0},t9=function(){p.useEffect(function(){return document.body.setAttribute(t6,(t7()+1).toString()),function(){var e=t7()-1;e<=0?document.body.removeAttribute(t6):document.body.setAttribute(t6,e.toString())}},[])},re=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=void 0===n?"margin":n;t9();var o=p.useMemo(function(){return t3(i)},[i]);return p.createElement(t8,{styles:t5(o,!t,i,r?"":"!important")})},rt=!1;if("undefined"!=typeof window)try{var rr=Object.defineProperty({},"passive",{get:function(){return rt=!0,!0}});window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch(e){rt=!1}var rn=!!rt&&{passive:!1},ri=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===r[t])},ro=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),ra(e,n)){var i=rs(e,n);if(i[1]>i[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},ra=function(e,t){return"v"===e?ri(t,"overflowY"):ri(t,"overflowX")},rs=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},rl=function(e,t,r,n,i){var o,a=(o=window.getComputedStyle(t).direction,"h"===e&&"rtl"===o?-1:1),s=a*n,l=r.target,c=t.contains(l),d=!1,u=s>0,h=0,f=0;do{if(!l)break;var p=rs(e,l),g=p[0],m=p[1]-p[2]-a*g;(g||m)&&ra(e,l)&&(h+=m,f+=g);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return u&&(i&&1>Math.abs(h)||!i&&s>h)?d=!0:!u&&(i&&1>Math.abs(f)||!i&&-s>f)&&(d=!0),d},rc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rd=function(e){return[e.deltaX,e.deltaY]},ru=function(e){return e&&"current"in e?e.current:e},rh=0,rf=[];let rp=(i=function(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),i=p.useState(rh++)[0],o=p.useState(t1)[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=(function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(ru),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var s=p.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var i,o=rc(e),s=r.current,l="deltaX"in e?e.deltaX:s[0]-o[0],c="deltaY"in e?e.deltaY:s[1]-o[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=ro(u,d);if(!h)return!0;if(h?i=u:(i="v"===u?"h":"v",h=ro(u,d)),!h)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=i),!i)return!0;var f=n.current||i;return rl(f,t,e,"h"===f?l:c,!0)},[]),l=p.useCallback(function(e){if(rf.length&&rf[rf.length-1]===o){var r="deltaY"in e?rd(e):rc(e),n=t.current.filter(function(t){var n;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(n=t.delta)[0]===r[0]&&n[1]===r[1]})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var i=(a.current.shards||[]).map(ru).filter(Boolean).filter(function(t){return t.contains(e.target)});(i.length>0?s(e,i[0]):!a.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=p.useCallback(function(e,r,n,i){var o={name:e,delta:r,target:n,should:i,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(n)};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),d=p.useCallback(function(e){r.current=rc(e),n.current=void 0},[]),u=p.useCallback(function(t){c(t.type,rd(t),t.target,s(t,e.lockRef.current))},[]),h=p.useCallback(function(t){c(t.type,rc(t),t.target,s(t,e.lockRef.current))},[]);p.useEffect(function(){return rf.push(o),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,rn),document.addEventListener("touchmove",l,rn),document.addEventListener("touchstart",d,rn),function(){rf=rf.filter(function(e){return e!==o}),document.removeEventListener("wheel",l,rn),document.removeEventListener("touchmove",l,rn),document.removeEventListener("touchstart",d,rn)}},[]);var f=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(o,{styles:"\n  .block-interactivity-".concat(i," {pointer-events: none;}\n  .allow-interactivity-").concat(i," {pointer-events: all;}\n")}):null,f?p.createElement(re,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},tq.useMedium(i),tK);var rg=p.forwardRef(function(e,t){return p.createElement(tQ,tU({},e,{ref:t,sideCar:rp}))});rg.classNames=tQ.classNames;var rm=new WeakMap,rw=new WeakMap,ry={},rE=0,rC=function(e){return e&&(e.host||rC(e.parentNode))},rA=function(e,t,r,n){var i=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=rC(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});ry[r]||(ry[r]=new WeakMap);var o=ry[r],a=[],s=new Set,l=new Set(i),c=function(e){!e||s.has(e)||(s.add(e),c(e.parentNode))};i.forEach(c);var d=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(s.has(e))d(e);else try{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(rm.get(e)||0)+1,c=(o.get(e)||0)+1;rm.set(e,l),o.set(e,c),a.push(e),1===l&&i&&rw.set(e,!0),1===c&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return d(t),s.clear(),rE++,function(){a.forEach(function(e){var t=rm.get(e)-1,i=o.get(e)-1;rm.set(e,t),o.set(e,i),t||(rw.has(e)||e.removeAttribute(n),rw.delete(e)),i||e.removeAttribute(r)}),--rE||(rm=new WeakMap,rm=new WeakMap,rw=new WeakMap,ry={})}},rx=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n,i=Array.from(Array.isArray(e)?e:[e]),o=t||(n=e,"undefined"==typeof document?null:(Array.isArray(n)?n[0]:n).ownerDocument.body);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live], script"))),rA(i,o,r,"aria-hidden")):function(){return null}},rb="Dialog",[rv,rS]=tc(rb),[rI,r_]=rv(rb),rT=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:o,modal:a=!0}=e,s=p.useRef(null),l=p.useRef(null),[c=!1,d]=tg({prop:n,defaultProp:i,onChange:o});return(0,f.jsx)(rI,{scope:t,triggerRef:s,contentRef:l,contentId:tf(),titleId:tf(),descriptionId:tf(),open:c,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(e=>!e),[d]),modal:a,children:r})};rT.displayName=rb;var rN="DialogTrigger",rR=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=r_(rN,r),o=ef(t,i.triggerRef);return(0,f.jsx)(tw.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":rZ(i.open),...n,ref:o,onClick:tl(e.onClick,i.onOpenToggle)})});rR.displayName=rN;var rM="DialogPortal",[rD,rO]=rv(rM,{forceMount:void 0}),rP=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:i}=e,o=r_(rM,t);return(0,f.jsx)(rD,{scope:t,forceMount:r,children:p.Children.map(n,e=>(0,f.jsx)(tL,{present:r||o.open,children:(0,f.jsx)(tP,{asChild:!0,container:i,children:e})}))})};rP.displayName=rM;var rL="DialogOverlay",rj=p.forwardRef((e,t)=>{let r=rO(rL,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=r_(rL,e.__scopeDialog);return o.modal?(0,f.jsx)(tL,{present:n||o.open,children:(0,f.jsx)(rB,{...i,ref:t})}):null});rj.displayName=rL;var rB=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=r_(rL,r);return(0,f.jsx)(rg,{as:ep,allowPinchZoom:!0,shards:[i.contentRef],children:(0,f.jsx)(tw.div,{"data-state":rZ(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),rk="DialogContent",rF=p.forwardRef((e,t)=>{let r=rO(rk,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=r_(rk,e.__scopeDialog);return(0,f.jsx)(tL,{present:n||o.open,children:o.modal?(0,f.jsx)(rU,{...i,ref:t}):(0,f.jsx)(rH,{...i,ref:t})})});rF.displayName=rk;var rU=p.forwardRef((e,t)=>{let r=r_(rk,e.__scopeDialog),n=p.useRef(null),i=ef(t,r.contentRef,n);return p.useEffect(()=>{let e=n.current;if(e)return rx(e)},[]),(0,f.jsx)(rz,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:tl(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:tl(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:tl(e.onFocusOutside,e=>e.preventDefault())})}),rH=p.forwardRef((e,t)=>{let r=r_(rk,e.__scopeDialog),n=p.useRef(!1),i=p.useRef(!1);return(0,f.jsx)(rz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"!==t.detail.originalEvent.type||(i.current=!0));let o=t.target;r.triggerRef.current?.contains(o)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),rz=p.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,...a}=e,s=r_(rk,r),l=p.useRef(null),c=ef(t,l);return tk(),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(tT,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o,children:(0,f.jsx)(tA,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":rZ(s.open),...a,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(rJ,{titleId:s.titleId}),(0,f.jsx)(r1,{contentRef:l,descriptionId:s.descriptionId})]})]})}),rV="DialogTitle",rY=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=r_(rV,r);return(0,f.jsx)(tw.h2,{id:i.titleId,...n,ref:t})});rY.displayName=rV;var rG="DialogDescription",rW=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=r_(rG,r);return(0,f.jsx)(tw.p,{id:i.descriptionId,...n,ref:t})});rW.displayName=rG;var rX="DialogClose",rq=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=r_(rX,r);return(0,f.jsx)(tw.button,{type:"button",...n,ref:t,onClick:tl(e.onClick,()=>i.onOpenChange(!1))})});function rZ(e){return e?"open":"closed"}rq.displayName=rX;var rQ="DialogTitleWarning",[rK,r$]=function(e,t){let r=p.createContext(t),n=e=>{let{children:t,...n}=e,i=p.useMemo(()=>n,Object.values(n));return(0,f.jsx)(r.Provider,{value:i,children:t})};return n.displayName=e+"Provider",[n,function(n){let i=p.useContext(r);if(i)return i;if(void 0!==t)return t;throw Error(`\`${n}\` must be used within \`${e}\``)}]}(rQ,{contentName:rk,titleName:rV,docsSlug:"dialog"}),rJ=({titleId:e})=>{let t=r$(rQ),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&!document.getElementById(e)&&console.error(r)},[r,e]),null},r1=({contentRef:e,descriptionId:t})=>{let r=r$("DialogDescriptionWarning"),n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return p.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&!document.getElementById(t)&&console.warn(n)},[n,e,t]),null};let r0=p.forwardRef(({className:e,...t},r)=>f.jsx(rj,{ref:r,className:ed("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));r0.displayName=rj.displayName;let r2=p.forwardRef(({className:e,children:t,...r},n)=>(0,f.jsxs)(rP,{children:[f.jsx(r0,{}),(0,f.jsxs)(rF,{ref:n,className:ed("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,f.jsxs)(rq,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(eD,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));r2.displayName=rF.displayName;let r4=({className:e,...t})=>f.jsx("div",{className:ed("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});r4.displayName="DialogHeader";let r3=({className:e,...t})=>f.jsx("div",{className:ed("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});r3.displayName="DialogFooter";let r8=p.forwardRef(({className:e,...t},r)=>f.jsx(rY,{ref:r,className:ed("text-lg font-semibold leading-none tracking-tight",e),...t}));r8.displayName=rY.displayName;let r6=p.forwardRef(({className:e,...t},r)=>f.jsx(rW,{ref:r,className:ed("text-sm text-muted-foreground",e),...t}));r6.displayName=rW.displayName;let r5=p.forwardRef(({className:e,type:t,...r},n)=>f.jsx("input",{type:t,className:ed("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));r5.displayName="Input";var r7=p.forwardRef((e,t)=>(0,f.jsx)(tw.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r7.displayName="Label";let r9=eE("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ne=p.forwardRef(({className:e,...t},r)=>f.jsx(r7,{ref:r,className:ed(r9(),e),...t}));ne.displayName=r7.displayName;let nt=p.forwardRef(({className:e,...t},r)=>f.jsx("textarea",{className:ed("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));nt.displayName="Textarea";let nr=0,nn=new Map,ni=e=>{if(nn.has(e))return;let t=setTimeout(()=>{nn.delete(e),nl({type:"REMOVE_TOAST",toastId:e})},1e6);nn.set(e,t)},no=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?ni(r):e.toasts.forEach(e=>{ni(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},na=[],ns={toasts:[]};function nl(e){ns=no(ns,e),na.forEach(e=>{e(ns)})}function nc({...e}){let t=(nr=(nr+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>nl({type:"DISMISS_TOAST",toastId:t});return nl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>nl({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function nd(){let[e,t]=p.useState(ns);return p.useEffect(()=>(na.push(t),()=>{let e=na.indexOf(t);e>-1&&na.splice(e,1)}),[e]),{...e,toast:nc,dismiss:e=>nl({type:"DISMISS_TOAST",toastId:e})}}function nu({material:e,onSuccess:t}){let{addMaterial:r,updateMaterial:n,currentProjectId:i}=ts(),{toast:o}=nd(),[a,s]=(0,p.useState)({name:e?.name||"",category:e?.category||"",supplier:e?.supplier||"",quantity:e?.quantity||"",unit:e?.unit||"un",price:e?.price||"",minStock:e?.minStock||"",notes:e?.notes||""}),[l,c]=(0,p.useState)({}),d=()=>{let e={};a.name.trim()||(e.name="Nome \xe9 obrigat\xf3rio"),a.category.trim()||(e.category="Categoria \xe9 obrigat\xf3ria"),a.supplier.trim()||(e.supplier="Fornecedor \xe9 obrigat\xf3rio");let t=parseFloat(a.quantity.toString());(isNaN(t)||t<0)&&(e.quantity="Quantidade deve ser um n\xfamero positivo");let r=parseFloat(a.price.toString());(isNaN(r)||r<0)&&(e.price="Pre\xe7o deve ser um n\xfamero positivo");let n=parseFloat(a.minStock.toString());return(isNaN(n)||n<0)&&(e.minStock="Estoque m\xednimo deve ser um n\xfamero positivo"),c(e),0===Object.keys(e).length},u=async s=>{if(s.preventDefault(),d()){if(!i){o({title:"Erro",description:"Nenhum projeto selecionado. Selecione um projeto primeiro.",variant:"destructive"});return}try{if(e){let t={name:a.name,category:a.category,supplier:a.supplier,quantity:parseFloat(a.quantity.toString())||0,unit:a.unit,price:parseFloat(a.price.toString())||0,minStock:parseFloat(a.minStock.toString())||0,notes:a.notes,status:parseFloat(a.quantity.toString())<=parseFloat(a.minStock.toString())?0===parseFloat(a.quantity.toString())?"Sem Estoque":"Estoque Baixo":"Em Estoque"};await n(e.id,t),o({title:"Material atualizado",description:"Material foi atualizado com sucesso!"})}else{let e={name:a.name,description:a.notes,type:a.category,currentQuantity:parseFloat(a.quantity.toString())||0,unit:a.unit,price:parseFloat(a.price.toString())||0,supplier:a.supplier,minStock:parseFloat(a.minStock.toString())||0,isConsumable:!1,projectId:i};await r(e,i),o({title:"Material adicionado",description:"Novo material foi cadastrado com sucesso!"})}t()}catch(e){o({title:"Erro",description:"Erro ao salvar material. Tente novamente.",variant:"destructive"})}}},h=(e,t)=>{s(r=>({...r,[e]:t})),l[e]&&c(t=>({...t,[e]:""}))},g=(e,t)=>{(""===t||/^[0-9]*[.,]?[0-9]*$/.test(t))&&h(e,t)},m=e=>""===e||0===e?"":e.toString();return(0,f.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"name",children:"Nome *"}),f.jsx(r5,{id:"name",value:a.name,onChange:e=>h("name",e.target.value),placeholder:"Ex: Tinta Acr\xedlica Branca"}),l.name&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.name})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"category",children:"Categoria *"}),f.jsx(r5,{id:"category",value:a.category,onChange:e=>h("category",e.target.value),placeholder:"Ex: Tintas, Pisos, Ilumina\xe7\xe3o"}),l.category&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.category})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"supplier",children:"Fornecedor *"}),f.jsx(r5,{id:"supplier",value:a.supplier,onChange:e=>h("supplier",e.target.value),placeholder:"Ex: Suvinil, Portobello"}),l.supplier&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.supplier})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"quantity",children:"Quantidade *"}),f.jsx(r5,{id:"quantity",type:"text",value:m(a.quantity),onChange:e=>g("quantity",e.target.value),placeholder:"0",className:"font-mono"}),l.quantity&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.quantity}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Digite apenas n\xfameros. Use v\xedrgula ou ponto para decimais (ex: 3,5 ou 2.4)"})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"unit",children:"Unidade"}),(0,f.jsxs)("select",{id:"unit",value:a.unit,onChange:e=>h("unit",e.target.value),className:"w-full p-2 border rounded-md",children:[f.jsx("option",{value:"un",children:"Unidade"}),f.jsx("option",{value:"m\xb2",children:"Metro Quadrado"}),f.jsx("option",{value:"m",children:"Metro"}),f.jsx("option",{value:"cm",children:"Cent\xedmetro"}),f.jsx("option",{value:"mm",children:"Mil\xedmetro"}),f.jsx("option",{value:"kg",children:"Quilograma"}),f.jsx("option",{value:"g",children:"Grama"}),f.jsx("option",{value:"l",children:"Litro"}),f.jsx("option",{value:"ml",children:"Mililitro"}),f.jsx("option",{value:"cx",children:"Caixa"}),f.jsx("option",{value:"p\xe7",children:"Pe\xe7a"}),f.jsx("option",{value:"rol",children:"Rolo"}),f.jsx("option",{value:"pct",children:"Pacote"})]})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"price",children:"Pre\xe7o (R$) *"}),f.jsx(r5,{id:"price",type:"text",value:m(a.price),onChange:e=>g("price",e.target.value),placeholder:"0,00",className:"font-mono"}),l.price&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.price}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Digite apenas n\xfameros e use v\xedrgula ou ponto para decimais"})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"minStock",children:"Estoque M\xednimo *"}),f.jsx(r5,{id:"minStock",type:"text",value:m(a.minStock),onChange:e=>g("minStock",e.target.value),placeholder:"0",className:"font-mono"}),l.minStock&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.minStock}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Digite apenas n\xfameros. Use v\xedrgula ou ponto para decimais"})]})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"notes",children:"Observa\xe7\xf5es"}),f.jsx(nt,{id:"notes",value:a.notes,onChange:e=>h("notes",e.target.value),placeholder:"Informa\xe7\xf5es adicionais sobre o material...",rows:3})]}),!i&&f.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:f.jsx("p",{className:"text-sm text-yellow-800",children:"âš ï¸ Nenhum projeto selecionado. Selecione um projeto para adicionar materiais."})}),f.jsx("div",{className:"flex gap-2 pt-4",children:(0,f.jsxs)(eA,{type:"submit",className:"flex-1",disabled:!i,children:[e?"Atualizar":"Cadastrar"," Material"]})})]})}let nh=["top","right","bottom","left"],nf=Math.min,np=Math.max,ng=Math.round,nm=Math.floor,nw=e=>({x:e,y:e}),ny={left:"right",right:"left",bottom:"top",top:"bottom"},nE={start:"end",end:"start"};function nC(e,t){return"function"==typeof e?e(t):e}function nA(e){return e.split("-")[0]}function nx(e){return e.split("-")[1]}function nb(e){return"x"===e?"y":"x"}function nv(e){return"y"===e?"height":"width"}let nS=new Set(["top","bottom"]);function nI(e){return nS.has(nA(e))?"y":"x"}function n_(e){return e.replace(/start|end/g,e=>nE[e])}let nT=["left","right"],nN=["right","left"],nR=["top","bottom"],nM=["bottom","top"];function nD(e){return e.replace(/left|right|bottom|top/g,e=>ny[e])}function nO(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function nP(e){let{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function nL(e,t,r){let n,{reference:i,floating:o}=e,a=nI(t),s=nb(nI(t)),l=nv(s),c=nA(t),d="y"===a,u=i.x+i.width/2-o.width/2,h=i.y+i.height/2-o.height/2,f=i[l]/2-o[l]/2;switch(c){case"top":n={x:u,y:i.y-o.height};break;case"bottom":n={x:u,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:h};break;case"left":n={x:i.x-o.width,y:h};break;default:n={x:i.x,y:i.y}}switch(nx(t)){case"start":n[s]-=f*(r&&d?-1:1);break;case"end":n[s]+=f*(r&&d?-1:1)}return n}let nj=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:a}=r,s=o.filter(Boolean),l=await (null==a.isRTL?void 0:a.isRTL(t)),c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:u}=nL(c,n,l),h=n,f={},p=0;for(let r=0;r<s.length;r++){let{name:o,fn:g}=s[r],{x:m,y:w,data:y,reset:E}=await g({x:d,y:u,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:c,platform:a,elements:{reference:e,floating:t}});d=null!=m?m:d,u=null!=w?w:u,f={...f,[o]:{...f[o],...y}},E&&p<=50&&(p++,"object"==typeof E&&(E.placement&&(h=E.placement),E.rects&&(c=!0===E.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:d,y:u}=nL(c,h,l)),r=-1)}return{x:d,y:u,placement:h,strategy:i,middlewareData:f}};async function nB(e,t){var r;void 0===t&&(t={});let{x:n,y:i,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:f=0}=nC(t,e),p=nO(f),g=s[h?"floating"===u?"reference":"floating":u],m=nP(await o.getClippingRect({element:null==(r=await (null==o.isElement?void 0:o.isElement(g)))||r?g:g.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:c,rootBoundary:d,strategy:l})),w="floating"===u?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,y=await (null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),E=await (null==o.isElement?void 0:o.isElement(y))&&await (null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},C=nP(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:w,offsetParent:y,strategy:l}):w);return{top:(m.top-C.top+p.top)/E.y,bottom:(C.bottom-m.bottom+p.bottom)/E.y,left:(m.left-C.left+p.left)/E.x,right:(C.right-m.right+p.right)/E.x}}function nk(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function nF(e){return nh.some(t=>e[t]>=0)}let nU=new Set(["left","top"]);async function nH(e,t){let{placement:r,platform:n,elements:i}=e,o=await (null==n.isRTL?void 0:n.isRTL(i.floating)),a=nA(r),s=nx(r),l="y"===nI(r),c=nU.has(a)?-1:1,d=o&&l?-1:1,u=nC(t,e),{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return s&&"number"==typeof p&&(f="end"===s?-1*p:p),l?{x:f*d,y:h*c}:{x:h*c,y:f*d}}function nz(){return"undefined"!=typeof window}function nV(e){return nW(e)?(e.nodeName||"").toLowerCase():"#document"}function nY(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function nG(e){var t;return null==(t=(nW(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function nW(e){return!!nz()&&(e instanceof Node||e instanceof nY(e).Node)}function nX(e){return!!nz()&&(e instanceof Element||e instanceof nY(e).Element)}function nq(e){return!!nz()&&(e instanceof HTMLElement||e instanceof nY(e).HTMLElement)}function nZ(e){return!!nz()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof nY(e).ShadowRoot)}let nQ=new Set(["inline","contents"]);function nK(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=n7(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!nQ.has(i)}let n$=new Set(["table","td","th"]),nJ=[":popover-open",":modal"];function n1(e){return nJ.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let n0=["transform","translate","scale","rotate","perspective"],n2=["transform","translate","scale","rotate","perspective","filter"],n4=["paint","layout","strict","content"];function n3(e){let t=n8(),r=nX(e)?n7(e):e;return n0.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||n2.some(e=>(r.willChange||"").includes(e))||n4.some(e=>(r.contain||"").includes(e))}function n8(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let n6=new Set(["html","body","#document"]);function n5(e){return n6.has(nV(e))}function n7(e){return nY(e).getComputedStyle(e)}function n9(e){return nX(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ie(e){if("html"===nV(e))return e;let t=e.assignedSlot||e.parentNode||nZ(e)&&e.host||nG(e);return nZ(t)?t.host:t}function it(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let i=function e(t){let r=ie(t);return n5(r)?t.ownerDocument?t.ownerDocument.body:t.body:nq(r)&&nK(r)?r:e(r)}(e),o=i===(null==(n=e.ownerDocument)?void 0:n.body),a=nY(i);if(o){let e=ir(a);return t.concat(a,a.visualViewport||[],nK(i)?i:[],e&&r?it(e):[])}return t.concat(i,it(i,[],r))}function ir(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ii(e){let t=n7(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=nq(e),o=i?e.offsetWidth:r,a=i?e.offsetHeight:n,s=ng(r)!==o||ng(n)!==a;return s&&(r=o,n=a),{width:r,height:n,$:s}}function io(e){return nX(e)?e:e.contextElement}function ia(e){let t=io(e);if(!nq(t))return nw(1);let r=t.getBoundingClientRect(),{width:n,height:i,$:o}=ii(t),a=(o?ng(r.width):r.width)/n,s=(o?ng(r.height):r.height)/i;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}let is=nw(0);function il(e){let t=nY(e);return n8()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:is}function ic(e,t,r,n){var i;void 0===t&&(t=!1),void 0===r&&(r=!1);let o=e.getBoundingClientRect(),a=io(e),s=nw(1);t&&(n?nX(n)&&(s=ia(n)):s=ia(e));let l=(void 0===(i=r)&&(i=!1),n&&(!i||n===nY(a))&&i)?il(a):nw(0),c=(o.left+l.x)/s.x,d=(o.top+l.y)/s.y,u=o.width/s.x,h=o.height/s.y;if(a){let e=nY(a),t=n&&nX(n)?nY(n):n,r=e,i=ir(r);for(;i&&n&&t!==r;){let e=ia(i),t=i.getBoundingClientRect(),n=n7(i),o=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,h*=e.y,c+=o,d+=a,i=ir(r=nY(i))}}return nP({width:u,height:h,x:c,y:d})}function id(e,t){let r=n9(e).scrollLeft;return t?t.left+r:ic(nG(e)).left+r}function iu(e,t,r){void 0===r&&(r=!1);let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:id(e,n)),y:n.top+t.scrollTop}}let ih=new Set(["absolute","fixed"]);function ip(e,t,r){let n;if("viewport"===t)n=function(e,t){let r=nY(e),n=nG(e),i=r.visualViewport,o=n.clientWidth,a=n.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;let e=n8();(!e||e&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s,y:l}}(e,r);else if("document"===t)n=function(e){let t=nG(e),r=n9(e),n=e.ownerDocument.body,i=np(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=np(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),a=-r.scrollLeft+id(e),s=-r.scrollTop;return"rtl"===n7(n).direction&&(a+=np(t.clientWidth,n.clientWidth)-i),{width:i,height:o,x:a,y:s}}(nG(e));else if(nX(t))n=function(e,t){let r=ic(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,o=nq(e)?ia(e):nw(1),a=e.clientWidth*o.x;return{width:a,height:e.clientHeight*o.y,x:i*o.x,y:n*o.y}}(t,r);else{let r=il(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return nP(n)}function ig(e){return"static"===n7(e).position}function im(e,t){if(!nq(e)||"fixed"===n7(e).position)return null;if(t)return t(e);let r=e.offsetParent;return nG(e)===r&&(r=r.ownerDocument.body),r}function iw(e,t){var r;let n=nY(e);if(n1(e))return n;if(!nq(e)){let t=ie(e);for(;t&&!n5(t);){if(nX(t)&&!ig(t))return t;t=ie(t)}return n}let i=im(e,t);for(;i&&(r=i,n$.has(nV(r)))&&ig(i);)i=im(i,t);return i&&n5(i)&&ig(i)&&!n3(i)?n:i||function(e){let t=ie(e);for(;nq(t)&&!n5(t);){if(n3(t))return t;if(n1(t))break;t=ie(t)}return null}(e)||n}let iy=async function(e){let t=this.getOffsetParent||iw,r=this.getDimensions,n=await r(e.floating);return{reference:function(e,t,r){let n=nq(t),i=nG(t),o="fixed"===r,a=ic(e,!0,o,t),s={scrollLeft:0,scrollTop:0},l=nw(0);if(n||!n&&!o){if(("body"!==nV(t)||nK(i))&&(s=n9(t)),n){let e=ic(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=id(i))}o&&!n&&i&&(l.x=id(i));let c=!i||n||o?nw(0):iu(i,s);return{x:a.left+s.scrollLeft-l.x-c.x,y:a.top+s.scrollTop-l.y-c.y,width:a.width,height:a.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},iE={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e,o="fixed"===i,a=nG(n),s=!!t&&n1(t.floating);if(n===a||s&&o)return r;let l={scrollLeft:0,scrollTop:0},c=nw(1),d=nw(0),u=nq(n);if((u||!u&&!o)&&(("body"!==nV(n)||nK(a))&&(l=n9(n)),nq(n))){let e=ic(n);c=ia(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}let h=!a||u||o?nw(0):iu(a,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:r.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:nG,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e,o=[..."clippingAncestors"===r?n1(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let n=it(e,[],!1).filter(e=>nX(e)&&"body"!==nV(e)),i=null,o="fixed"===n7(e).position,a=o?ie(e):e;for(;nX(a)&&!n5(a);){let t=n7(a),r=n3(a);r||"fixed"!==t.position||(i=null),(o?!r&&!i:!r&&"static"===t.position&&!!i&&ih.has(i.position)||nK(a)&&!r&&function e(t,r){let n=ie(t);return!(n===r||!nX(n)||n5(n))&&("fixed"===n7(n).position||e(n,r))}(e,a))?n=n.filter(e=>e!==a):i=t,a=ie(a)}return t.set(e,n),n}(t,this._c):[].concat(r),n],a=o[0],s=o.reduce((e,r)=>{let n=ip(t,r,i);return e.top=np(n.top,e.top),e.right=nf(n.right,e.right),e.bottom=nf(n.bottom,e.bottom),e.left=np(n.left,e.left),e},ip(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:iw,getElementRects:iy,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=ii(e);return{width:t,height:r}},getScale:ia,isElement:nX,isRTL:function(e){return"rtl"===n7(e).direction}};function iC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let iA=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:d=0}=nC(e,t)||{};if(null==c)return{};let u=nO(d),h={x:r,y:n},f=nb(nI(i)),p=nv(f),g=await a.getDimensions(c),m="y"===f,w=m?"clientHeight":"clientWidth",y=o.reference[p]+o.reference[f]-h[f]-o.floating[p],E=h[f]-o.reference[f],C=await (null==a.getOffsetParent?void 0:a.getOffsetParent(c)),A=C?C[w]:0;A&&await (null==a.isElement?void 0:a.isElement(C))||(A=s.floating[w]||o.floating[p]);let x=A/2-g[p]/2-1,b=nf(u[m?"top":"left"],x),v=nf(u[m?"bottom":"right"],x),S=A-g[p]-v,I=A/2-g[p]/2+(y/2-E/2),_=np(b,nf(I,S)),T=!l.arrow&&null!=nx(i)&&I!==_&&o.reference[p]/2-(I<b?b:v)-g[p]/2<0,N=T?I<b?I-b:I-S:0;return{[f]:h[f]+N,data:{[f]:_,centerOffset:I-_-N,...T&&{alignmentOffset:N}},reset:T}}}),ix=(e,t,r)=>{let n=new Map,i={platform:iE,...r},o={...i.platform,_c:n};return nj(e,t,{...i,platform:o})};var ib="undefined"!=typeof document?p.useLayoutEffect:function(){};function iv(e,t){let r,n,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!iv(e[n],t[n]))return!1;return!0}if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){let r=i[n];if(("_owner"!==r||!e.$$typeof)&&!iv(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function iS(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function iI(e,t){let r=iS(e);return Math.round(t*r)/r}function i_(e){let t=p.useRef(e);return ib(()=>{t.current=e}),t}let iT=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:n}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?iA({element:r.current,padding:n}).fn(t):{}:r?iA({element:r,padding:n}).fn(t):{}}}),iN=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;let{x:i,y:o,placement:a,middlewareData:s}=t,l=await nH(t,e);return a===(null==(r=s.offset)?void 0:r.placement)&&null!=(n=s.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:a}}}}}(e),options:[e,t]}),iR=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:n,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=nC(e,t),c={x:r,y:n},d=await nB(t,l),u=nI(nA(i)),h=nb(u),f=c[h],p=c[u];if(o){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",r=f+d[e],n=f-d[t];f=np(r,nf(f,n))}if(a){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",r=p+d[e],n=p-d[t];p=np(r,nf(p,n))}let g=s.fn({...t,[h]:f,[u]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:o,[u]:a}}}}}}(e),options:[e,t]}),iM=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:n,placement:i,rects:o,middlewareData:a}=t,{offset:s=0,mainAxis:l=!0,crossAxis:c=!0}=nC(e,t),d={x:r,y:n},u=nI(i),h=nb(u),f=d[h],p=d[u],g=nC(s,t),m="number"==typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){let e="y"===h?"height":"width",t=o.reference[h]-o.floating[e]+m.mainAxis,r=o.reference[h]+o.reference[e]-m.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var w,y;let e="y"===h?"width":"height",t=nU.has(nA(i)),r=o.reference[u]-o.floating[e]+(t&&(null==(w=a.offset)?void 0:w[u])||0)+(t?0:m.crossAxis),n=o.reference[u]+o.reference[e]+(t?0:(null==(y=a.offset)?void 0:y[u])||0)-(t?m.crossAxis:0);p<r?p=r:p>n&&(p=n)}return{[h]:f,[u]:p}}}}(e),options:[e,t]}),iD=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n,i,o,a;let{placement:s,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:h}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0,...E}=nC(e,t);if(null!=(r=l.arrow)&&r.alignmentOffset)return{};let C=nA(s),A=nI(d),x=nA(d)===d,b=await (null==u.isRTL?void 0:u.isRTL(h.floating)),v=g||(x||!y?[nD(d)]:function(e){let t=nD(e);return[n_(e),t,n_(t)]}(d)),S="none"!==w;!g&&S&&v.push(...function(e,t,r,n){let i=nx(e),o=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?nN:nT;return t?nT:nN;case"left":case"right":return t?nR:nM;default:return[]}}(nA(e),"start"===r,n);return i&&(o=o.map(e=>e+"-"+i),t&&(o=o.concat(o.map(n_)))),o}(d,y,w,b));let I=[d,...v],_=await nB(t,E),T=[],N=(null==(n=l.flip)?void 0:n.overflows)||[];if(f&&T.push(_[C]),p){let e=function(e,t,r){void 0===r&&(r=!1);let n=nx(e),i=nb(nI(e)),o=nv(i),a="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=nD(a)),[a,nD(a)]}(s,c,b);T.push(_[e[0]],_[e[1]])}if(N=[...N,{placement:s,overflows:T}],!T.every(e=>e<=0)){let e=((null==(i=l.flip)?void 0:i.index)||0)+1,t=I[e];if(t&&(!("alignment"===p&&A!==nI(t))||N.every(e=>e.overflows[0]>0&&nI(e.placement)===A)))return{data:{index:e,overflows:N},reset:{placement:t}};let r=null==(o=N.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:o.placement;if(!r)switch(m){case"bestFit":{let e=null==(a=N.filter(e=>{if(S){let t=nI(e.placement);return t===A||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0];e&&(r=e);break}case"initialPlacement":r=d}if(s!==r)return{reset:{placement:r}}}return{}}}}(e),options:[e,t]}),iO=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;let i,o;let{placement:a,rects:s,platform:l,elements:c}=t,{apply:d=()=>{},...u}=nC(e,t),h=await nB(t,u),f=nA(a),p=nx(a),g="y"===nI(a),{width:m,height:w}=s.floating;"top"===f||"bottom"===f?(i=f,o=p===(await (null==l.isRTL?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(o=f,i="end"===p?"top":"bottom");let y=w-h.top-h.bottom,E=m-h.left-h.right,C=nf(w-h[i],y),A=nf(m-h[o],E),x=!t.middlewareData.shift,b=C,v=A;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(v=E),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(b=y),x&&!p){let e=np(h.left,0),t=np(h.right,0),r=np(h.top,0),n=np(h.bottom,0);g?v=m-2*(0!==e||0!==t?e+t:np(h.left,h.right)):b=w-2*(0!==r||0!==n?r+n:np(h.top,h.bottom))}await d({...t,availableWidth:v,availableHeight:b});let S=await l.getDimensions(c.floating);return m!==S.width||w!==S.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),iP=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:n="referenceHidden",...i}=nC(e,t);switch(n){case"referenceHidden":{let e=nk(await nB(t,{...i,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:nF(e)}}}case"escaped":{let e=nk(await nB(t,{...i,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:nF(e)}}}default:return{}}}}}(e),options:[e,t]}),iL=(e,t)=>({...iT(e),options:[e,t]});var ij=p.forwardRef((e,t)=>{let{children:r,width:n=10,height:i=5,...o}=e;return(0,f.jsx)(tw.svg,{...o,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,f.jsx)("polygon",{points:"0,0 30,0 15,10"})})});function iB(e){let[t,r]=p.useState(void 0);return td(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let o=t[0];if("borderBoxSize"in o){let e=o.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}ij.displayName="Arrow";var ik="Popper",[iF,iU]=tc(ik),[iH,iz]=iF(ik),iV=e=>{let{__scopePopper:t,children:r}=e,[n,i]=p.useState(null);return(0,f.jsx)(iH,{scope:t,anchor:n,onAnchorChange:i,children:r})};iV.displayName=ik;var iY="PopperAnchor",iG=p.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:n,...i}=e,o=iz(iY,r),a=p.useRef(null),s=ef(t,a);return p.useEffect(()=>{o.onAnchorChange(n?.current||a.current)}),n?null:(0,f.jsx)(tw.div,{...i,ref:s})});iG.displayName=iY;var iW="PopperContent",[iX,iq]=iF(iW),iZ=p.forwardRef((e,t)=>{let{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:h=!1,updatePositionStrategy:g="optimized",onPlaced:m,...w}=e,y=iz(iW,r),[E,C]=p.useState(null),A=ef(t,e=>C(e)),[x,b]=p.useState(null),v=iB(x),S=v?.width??0,I=v?.height??0,_="number"==typeof d?d:{top:0,right:0,bottom:0,left:0,...d},T=Array.isArray(c)?c:[c],N=T.length>0,R={padding:_,boundary:T.filter(iJ),altBoundary:N},{refs:M,floatingStyles:D,placement:O,isPositioned:P,middlewareData:L}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[d,u]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=p.useState(n);iv(h,n)||f(n);let[g,m]=p.useState(null),[w,y]=p.useState(null),E=p.useCallback(e=>{e!==b.current&&(b.current=e,m(e))},[]),C=p.useCallback(e=>{e!==v.current&&(v.current=e,y(e))},[]),A=o||g,x=a||w,b=p.useRef(null),v=p.useRef(null),S=p.useRef(d),I=null!=l,_=i_(l),T=i_(i),N=i_(c),R=p.useCallback(()=>{if(!b.current||!v.current)return;let e={placement:t,strategy:r,middleware:h};T.current&&(e.platform=T.current),ix(b.current,v.current,e).then(e=>{let t={...e,isPositioned:!1!==N.current};M.current&&!iv(S.current,t)&&(S.current=t,tm.flushSync(()=>{u(t)}))})},[h,t,r,T,N]);ib(()=>{!1===c&&S.current.isPositioned&&(S.current.isPositioned=!1,u(e=>({...e,isPositioned:!1})))},[c]);let M=p.useRef(!1);ib(()=>(M.current=!0,()=>{M.current=!1}),[]),ib(()=>{if(A&&(b.current=A),x&&(v.current=x),A&&x){if(_.current)return _.current(A,x,R);R()}},[A,x,R,_,I]);let D=p.useMemo(()=>({reference:b,floating:v,setReference:E,setFloating:C}),[E,C]),O=p.useMemo(()=>({reference:A,floating:x}),[A,x]),P=p.useMemo(()=>{let e={position:r,left:0,top:0};if(!O.floating)return e;let t=iI(O.floating,d.x),n=iI(O.floating,d.y);return s?{...e,transform:"translate("+t+"px, "+n+"px)",...iS(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,s,O.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:R,refs:D,elements:O,floatingStyles:P}),[d,R,D,O,P])}({strategy:"fixed",placement:n+("center"!==o?"-"+o:""),whileElementsMounted:(...e)=>(function(e,t,r,n){let i;void 0===n&&(n={});let{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=n,d=io(e),u=o||a?[...d?it(d):[],...it(t)]:[];u.forEach(e=>{o&&e.addEventListener("scroll",r,{passive:!0}),a&&e.addEventListener("resize",r)});let h=d&&l?function(e,t){let r,n=null,i=nG(e);function o(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();let c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:f}=c;if(s||t(),!h||!f)return;let p=nm(u),g=nm(i.clientWidth-(d+h)),m={rootMargin:-p+"px "+-g+"px "+-nm(i.clientHeight-(u+f))+"px "+-nm(d)+"px",threshold:np(0,nf(1,l))||1},w=!0;function y(t){let n=t[0].intersectionRatio;if(n!==l){if(!w)return a();n?a(!1,n):r=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==n||iC(c,e.getBoundingClientRect())||a(),w=!1}try{n=new IntersectionObserver(y,{...m,root:i.ownerDocument})}catch(e){n=new IntersectionObserver(y,m)}n.observe(e)}(!0),o}(d,r):null,f=-1,p=null;s&&(p=new ResizeObserver(e=>{let[n]=e;n&&n.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let g=c?ic(e):null;return c&&function t(){let n=ic(e);g&&!iC(g,n)&&r(),g=n,i=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{o&&e.removeEventListener("scroll",r),a&&e.removeEventListener("resize",r)}),null==h||h(),null==(e=p)||e.disconnect(),p=null,c&&cancelAnimationFrame(i)}})(...e,{animationFrame:"always"===g}),elements:{reference:y.anchor},middleware:[iN({mainAxis:i+I,alignmentAxis:a}),l&&iR({mainAxis:!0,crossAxis:!1,limiter:"partial"===u?iM():void 0,...R}),l&&iD({...R}),iO({...R,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:i,height:o}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${r}px`),a.setProperty("--radix-popper-available-height",`${n}px`),a.setProperty("--radix-popper-anchor-width",`${i}px`),a.setProperty("--radix-popper-anchor-height",`${o}px`)}}),x&&iL({element:x,padding:s}),i1({arrowWidth:S,arrowHeight:I}),h&&iP({strategy:"referenceHidden",...R})]}),[j,B]=i0(O),k=tp(m);td(()=>{P&&k?.()},[P,k]);let F=L.arrow?.x,U=L.arrow?.y,H=L.arrow?.centerOffset!==0,[z,V]=p.useState();return td(()=>{E&&V(window.getComputedStyle(E).zIndex)},[E]),(0,f.jsx)("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:P?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,f.jsx)(iX,{scope:r,placedSide:j,onArrowChange:b,arrowX:F,arrowY:U,shouldHideArrow:H,children:(0,f.jsx)(tw.div,{"data-side":j,"data-align":B,...w,ref:A,style:{...w.style,animation:P?void 0:"none"}})})})});iZ.displayName=iW;var iQ="PopperArrow",iK={top:"bottom",right:"left",bottom:"top",left:"right"},i$=p.forwardRef(function(e,t){let{__scopePopper:r,...n}=e,i=iq(iQ,r),o=iK[i.placedSide];return(0,f.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,f.jsx)(ij,{...n,ref:t,style:{...n.style,display:"block"}})})});function iJ(e){return null!==e}i$.displayName=iQ;var i1=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:n,middlewareData:i}=t,o=i.arrow?.centerOffset!==0,a=o?0:e.arrowWidth,s=o?0:e.arrowHeight,[l,c]=i0(r),d={start:"0%",center:"50%",end:"100%"}[c],u=(i.arrow?.x??0)+a/2,h=(i.arrow?.y??0)+s/2,f="",p="";return"bottom"===l?(f=o?d:`${u}px`,p=`${-s}px`):"top"===l?(f=o?d:`${u}px`,p=`${n.floating.height+s}px`):"right"===l?(f=`${-s}px`,p=o?d:`${h}px`):"left"===l&&(f=`${n.floating.width+s}px`,p=o?d:`${h}px`),{data:{x:f,y:p}}}});function i0(e){let[t,r="center"]=e.split("-");return[t,r]}var i2=p.forwardRef((e,t)=>(0,f.jsx)(tw.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));i2.displayName="VisuallyHidden";var[i4,i3]=tc("Tooltip",[iU]),i8=iU(),i6="TooltipProvider",i5="tooltip.open",[i7,i9]=i4(i6),oe=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:o}=e,[a,s]=p.useState(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,f.jsx)(i7,{scope:t,isOpenDelayed:a,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),s(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>s(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(e=>{l.current=e},[]),disableHoverableContent:i,children:o})};oe.displayName=i6;var ot="Tooltip",[or,on]=i4(ot),oi=e=>{let{__scopeTooltip:t,children:r,open:n,defaultOpen:i=!1,onOpenChange:o,disableHoverableContent:a,delayDuration:s}=e,l=i9(ot,e.__scopeTooltip),c=i8(t),[d,u]=p.useState(null),h=tf(),g=p.useRef(0),m=a??l.disableHoverableContent,w=s??l.delayDuration,y=p.useRef(!1),[E=!1,C]=tg({prop:n,defaultProp:i,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(i5))):l.onClose(),o?.(e)}}),A=p.useMemo(()=>E?y.current?"delayed-open":"instant-open":"closed",[E]),x=p.useCallback(()=>{window.clearTimeout(g.current),g.current=0,y.current=!1,C(!0)},[C]),b=p.useCallback(()=>{window.clearTimeout(g.current),g.current=0,C(!1)},[C]),v=p.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{y.current=!0,C(!0),g.current=0},w)},[w,C]);return p.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),(0,f.jsx)(iV,{...c,children:(0,f.jsx)(or,{scope:t,contentId:h,open:E,stateAttribute:A,trigger:d,onTriggerChange:u,onTriggerEnter:p.useCallback(()=>{l.isOpenDelayed?v():x()},[l.isOpenDelayed,v,x]),onTriggerLeave:p.useCallback(()=>{m?b():(window.clearTimeout(g.current),g.current=0)},[b,m]),onOpen:x,onClose:b,disableHoverableContent:m,children:r})})};oi.displayName=ot;var oo="TooltipTrigger",oa=p.forwardRef((e,t)=>{let{__scopeTooltip:r,...n}=e,i=on(oo,r),o=i9(oo,r),a=i8(r),s=ef(t,p.useRef(null),i.onTriggerChange),l=p.useRef(!1),c=p.useRef(!1),d=p.useCallback(()=>l.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),(0,f.jsx)(iG,{asChild:!0,...a,children:(0,f.jsx)(tw.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:s,onPointerMove:tl(e.onPointerMove,e=>{"touch"===e.pointerType||c.current||o.isPointerInTransitRef.current||(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:tl(e.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:tl(e.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:tl(e.onFocus,()=>{l.current||i.onOpen()}),onBlur:tl(e.onBlur,i.onClose),onClick:tl(e.onClick,i.onClose)})})});oa.displayName=oo;var[os,ol]=i4("TooltipPortal",{forceMount:void 0}),oc="TooltipContent",od=p.forwardRef((e,t)=>{let r=ol(oc,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...o}=e,a=on(oc,e.__scopeTooltip);return(0,f.jsx)(tL,{present:n||a.open,children:a.disableHoverableContent?(0,f.jsx)(op,{side:i,...o,ref:t}):(0,f.jsx)(ou,{side:i,...o,ref:t})})}),ou=p.forwardRef((e,t)=>{let r=on(oc,e.__scopeTooltip),n=i9(oc,e.__scopeTooltip),i=p.useRef(null),o=ef(t,i),[a,s]=p.useState(null),{trigger:l,onClose:c}=r,d=i.current,{onPointerInTransitChange:u}=n,h=p.useCallback(()=>{s(null),u(!1)},[u]),g=p.useCallback((e,t)=>{let r=e.currentTarget,n={x:e.clientX,y:e.clientY},i=function(e,t){let r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,i,o)){case o:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw Error("unreachable")}}(n,r.getBoundingClientRect());s(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let n=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x))t.pop();else break}t.push(n)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let n=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(n.y-t.y)>=(e.y-t.y)*(n.x-t.x))r.pop();else break}r.push(n)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(t)}([...function(e,t,r=5){let n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,i),...function(e){let{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}(t.getBoundingClientRect())])),u(!0)},[u]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(l&&d){let e=e=>g(e,d),t=e=>g(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,g,h]),p.useEffect(()=>{if(a){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},n=l?.contains(t)||d?.contains(t),i=!function(e,t){let{x:r,y:n}=e,i=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let a=t[e].x,s=t[e].y,l=t[o].x,c=t[o].y;s>n!=c>n&&r<(l-a)*(n-s)/(c-s)+a&&(i=!i)}return i}(r,a);n?h():i&&(h(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,a,c,h]),(0,f.jsx)(op,{...e,ref:o})}),[oh,of]=i4(ot,{isInside:!1}),op=p.forwardRef((e,t)=>{let{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=e,l=on(oc,r),c=i8(r),{onClose:d}=l;return p.useEffect(()=>(document.addEventListener(i5,d),()=>document.removeEventListener(i5,d)),[d]),p.useEffect(()=>{if(l.trigger){let e=e=>{let t=e.target;t?.contains(l.trigger)&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),(0,f.jsx)(tA,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:(0,f.jsxs)(iZ,{"data-state":l.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,f.jsx)(em,{children:n}),(0,f.jsx)(oh,{scope:r,isInside:!0,children:(0,f.jsx)(i2,{id:l.contentId,role:"tooltip",children:i||n})})]})})});od.displayName=oc;var og="TooltipArrow";p.forwardRef((e,t)=>{let{__scopeTooltip:r,...n}=e,i=i8(r);return of(og,r).isInside?null:(0,f.jsx)(i$,{...i,...n,ref:t})}).displayName=og;let om=p.forwardRef(({className:e,sideOffset:t=4,...r},n)=>f.jsx(od,{ref:n,sideOffset:t,className:ed("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));function ow({setCurrentPage:e}){let{materials:t,movements:r}=ts(),[n,i]=(0,p.useState)(!1),o=[...new Set(t.map(e=>e.category))].length,a=t.filter(e=>e.quantity<=e.minStock).length,s=r.slice(0,5);return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,f.jsxs)(e4,{children:[(0,f.jsxs)(e3,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(e8,{className:"text-sm font-medium",children:"Tipos de Materiais"}),f.jsx(eT,{className:"h-4 w-4 text-muted-foreground"})]}),(0,f.jsxs)(e5,{children:[f.jsx("div",{className:"text-2xl font-bold",children:o}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Tipos diferentes de materiais registrados"})]})]}),(0,f.jsxs)(e4,{children:[(0,f.jsxs)(e3,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(e8,{className:"text-sm font-medium",children:"Estoque Baixo"}),f.jsx(te,{className:"h-4 w-4 text-yellow-500"})]}),(0,f.jsxs)(e5,{children:[f.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Requer aten\xe7\xe3o"})]})]}),(0,f.jsxs)(e4,{children:[(0,f.jsxs)(e3,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(e8,{className:"text-sm font-medium",children:"Movimenta\xe7\xf5es"}),f.jsx(tt,{className:"h-4 w-4 text-blue-500"})]}),(0,f.jsxs)(e5,{children:[f.jsx("div",{className:"text-2xl font-bold",children:r.length}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Total registradas"})]})]})]}),(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:f.jsx(e8,{children:"A\xe7\xf5es R\xe1pidas"})}),f.jsx(e5,{children:(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,f.jsxs)(rT,{open:n,onOpenChange:i,children:[f.jsx(rR,{asChild:!0,children:(0,f.jsxs)(eA,{className:"h-20 flex flex-col gap-2",children:[f.jsx(tr,{className:"h-6 w-6"}),"Adicionar Material"]})}),(0,f.jsxs)(r2,{className:"max-w-2xl",children:[f.jsx(r4,{children:f.jsx(r8,{children:"Adicionar Novo Material"})}),f.jsx(nu,{onSuccess:()=>i(!1)})]})]}),(0,f.jsxs)(eA,{variant:"outline",className:"h-20 flex flex-col gap-2 bg-transparent",onClick:()=>e("scanner"),children:[f.jsx(eN,{className:"h-6 w-6"}),"Escanear QR"]}),(0,f.jsxs)(eA,{variant:"outline",className:"h-20 flex flex-col gap-2 bg-transparent",onClick:()=>e("movements"),children:[f.jsx(tt,{className:"h-6 w-6"}),"Relat\xf3rios"]})]})})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:f.jsx(e8,{children:"Materiais com Estoque Baixo"})}),f.jsx(e5,{children:(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(oe,{children:t.filter(e=>e.quantity<=e.minStock).slice(0,5).map(e=>(0,f.jsxs)(oi,{children:[f.jsx(oa,{asChild:!0,children:(0,f.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-muted/50 cursor-help transition-colors",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"font-medium",children:e.name}),f.jsx("p",{className:"text-sm text-muted-foreground",children:e.category})]}),(0,f.jsxs)(e9,{variant:"destructive",children:[e.quantity," ",e.unit]})]})}),f.jsx(om,{className:"max-w-xs p-3",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("div",{className:"font-semibold text-amber-700 dark:text-amber-300",children:"âš ï¸ Estoque Baixo"}),(0,f.jsxs)("div",{className:"text-sm space-y-1",children:[(0,f.jsxs)("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Material:"}),f.jsx("span",{children:e.name})]}),(0,f.jsxs)("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Quantidade Atual:"}),(0,f.jsxs)("span",{className:"text-red-600 font-semibold",children:[e.quantity," ",e.unit]})]}),(0,f.jsxs)("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Estoque M\xednimo:"}),(0,f.jsxs)("span",{className:"text-amber-600 font-semibold",children:[e.minStock," ",e.unit]})]}),(0,f.jsxs)("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Deficit:"}),(0,f.jsxs)("span",{className:"text-red-600 font-semibold",children:[Math.max(0,e.minStock-e.quantity)," ",e.unit]})]}),e.price>0&&(0,f.jsxs)("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Pre\xe7o Unit\xe1rio:"}),(0,f.jsxs)("span",{className:"text-green-600 font-semibold",children:["R$ ",e.price.toFixed(2)]})]})]}),f.jsx("div",{className:"text-xs text-muted-foreground pt-1 border-t",children:"Considere fazer um novo pedido"})]})})]},e.id))}),0===t.filter(e=>e.quantity<=e.minStock).length&&f.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhum material com estoque baixo"})]})})]}),(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:f.jsx(e8,{children:"Movimenta\xe7\xf5es Recentes"})}),f.jsx(e5,{children:(0,f.jsxs)("div",{className:"space-y-3",children:[s.map(e=>(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"font-medium",children:e.materialName}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground",children:["entrada"===e.actionType?"Entrada":"Sa\xedda"," - ",e.location]})]}),(0,f.jsxs)(e9,{variant:"entrada"===e.actionType?"default":"secondary",children:["entrada"===e.actionType?"+":"-",e.quantity]})]},e.id)),0===s.length&&f.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhuma movimenta\xe7\xe3o recente"})]})})]})]})]})}om.displayName=od.displayName;let oy=p.forwardRef(({className:e,...t},r)=>f.jsx("div",{className:"relative w-full overflow-auto",children:f.jsx("table",{ref:r,className:ed("w-full caption-bottom text-sm",e),...t})}));oy.displayName="Table";let oE=p.forwardRef(({className:e,...t},r)=>f.jsx("thead",{ref:r,className:ed("[&_tr]:border-b",e),...t}));oE.displayName="TableHeader";let oC=p.forwardRef(({className:e,...t},r)=>f.jsx("tbody",{ref:r,className:ed("[&_tr:last-child]:border-0",e),...t}));oC.displayName="TableBody",p.forwardRef(({className:e,...t},r)=>f.jsx("tfoot",{ref:r,className:ed("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let oA=p.forwardRef(({className:e,...t},r)=>f.jsx("tr",{ref:r,className:ed("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));oA.displayName="TableRow";let ox=p.forwardRef(({className:e,...t},r)=>f.jsx("th",{ref:r,className:ed("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ox.displayName="TableHead";let ob=p.forwardRef(({className:e,...t},r)=>f.jsx("td",{ref:r,className:ed("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));function ov(e){let t=e+"CollectionProvider",[r,n]=tc(t),[i,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=e=>{let{scope:t,children:r}=e,n=p.useRef(null),o=p.useRef(new Map).current;return(0,f.jsx)(i,{scope:t,itemMap:o,collectionRef:n,children:r})};a.displayName=t;let s=e+"CollectionSlot",l=p.forwardRef((e,t)=>{let{scope:r,children:n}=e,i=ef(t,o(s,r).collectionRef);return(0,f.jsx)(ep,{ref:i,children:n})});l.displayName=s;let c=e+"CollectionItemSlot",d="data-radix-collection-item",u=p.forwardRef((e,t)=>{let{scope:r,children:n,...i}=e,a=p.useRef(null),s=ef(t,a),l=o(c,r);return p.useEffect(()=>(l.itemMap.set(a,{ref:a,...i}),()=>void l.itemMap.delete(a))),(0,f.jsx)(ep,{[d]:"",ref:s,children:n})});return u.displayName=c,[{Provider:a,Slot:l,ItemSlot:u},function(t){let r=o(e+"CollectionConsumer",t);return p.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},n]}ob.displayName="TableCell",p.forwardRef(({className:e,...t},r)=>f.jsx("caption",{ref:r,className:ed("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";var oS=p.createContext(void 0);function oI(e){let t=p.useContext(oS);return e||t||"ltr"}var o_="rovingFocusGroup.onEntryFocus",oT={bubbles:!1,cancelable:!0},oN="RovingFocusGroup",[oR,oM,oD]=ov(oN),[oO,oP]=tc(oN,[oD]),[oL,oj]=oO(oN),oB=p.forwardRef((e,t)=>(0,f.jsx)(oR.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(oR.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(ok,{...e,ref:t})})}));oB.displayName=oN;var ok=p.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=e,h=p.useRef(null),g=ef(t,h),m=oI(o),[w=null,y]=tg({prop:a,defaultProp:s,onChange:l}),[E,C]=p.useState(!1),A=tp(c),x=oM(r),b=p.useRef(!1),[v,S]=p.useState(0);return p.useEffect(()=>{let e=h.current;if(e)return e.addEventListener(o_,A),()=>e.removeEventListener(o_,A)},[A]),(0,f.jsx)(oL,{scope:r,orientation:n,dir:m,loop:i,currentTabStopId:w,onItemFocus:p.useCallback(e=>y(e),[y]),onItemShiftTab:p.useCallback(()=>C(!0),[]),onFocusableItemAdd:p.useCallback(()=>S(e=>e+1),[]),onFocusableItemRemove:p.useCallback(()=>S(e=>e-1),[]),children:(0,f.jsx)(tw.div,{tabIndex:E||0===v?-1:0,"data-orientation":n,...u,ref:g,style:{outline:"none",...e.style},onMouseDown:tl(e.onMouseDown,()=>{b.current=!0}),onFocus:tl(e.onFocus,e=>{let t=!b.current;if(e.target===e.currentTarget&&t&&!E){let t=new CustomEvent(o_,oT);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=x().filter(e=>e.focusable);oz([e.find(e=>e.active),e.find(e=>e.id===w),...e].filter(Boolean).map(e=>e.ref.current),d)}}b.current=!1}),onBlur:tl(e.onBlur,()=>C(!1))})})}),oF="RovingFocusGroupItem",oU=p.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:o,...a}=e,s=tf(),l=o||s,c=oj(oF,r),d=c.currentTabStopId===l,u=oM(r),{onFocusableItemAdd:h,onFocusableItemRemove:g}=c;return p.useEffect(()=>{if(n)return h(),()=>g()},[n,h,g]),(0,f.jsx)(oR.ItemSlot,{scope:r,id:l,focusable:n,active:i,children:(0,f.jsx)(tw.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...a,ref:t,onMouseDown:tl(e.onMouseDown,e=>{n?c.onItemFocus(l):e.preventDefault()}),onFocus:tl(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:tl(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){c.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var n;let i=(n=e.key,"rtl"!==r?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(i))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(i)))return oH[i]}(e,c.orientation,c.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=u().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let n=r.indexOf(e.currentTarget);r=c.loop?function(e,t){return e.map((r,n)=>e[(t+n)%e.length])}(r,n+1):r.slice(n+1)}setTimeout(()=>oz(r))}})})})});oU.displayName=oF;var oH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oz(e,t=!1){let r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}var oV=["Enter"," "],oY=["ArrowUp","PageDown","End"],oG=["ArrowDown","PageUp","Home",...oY],oW={ltr:[...oV,"ArrowRight"],rtl:[...oV,"ArrowLeft"]},oX={ltr:["ArrowLeft"],rtl:["ArrowRight"]},oq="Menu",[oZ,oQ,oK]=ov(oq),[o$,oJ]=tc(oq,[oK,iU,oP]),o1=iU(),o0=oP(),[o2,o4]=o$(oq),[o3,o8]=o$(oq),o6=e=>{let{__scopeMenu:t,open:r=!1,children:n,dir:i,onOpenChange:o,modal:a=!0}=e,s=o1(t),[l,c]=p.useState(null),d=p.useRef(!1),u=tp(o),h=oI(i);return p.useEffect(()=>{let e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,f.jsx)(iV,{...s,children:(0,f.jsx)(o2,{scope:t,open:r,onOpenChange:u,content:l,onContentChange:c,children:(0,f.jsx)(o3,{scope:t,onClose:p.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:d,dir:h,modal:a,children:n})})})};o6.displayName=oq;var o5=p.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,i=o1(r);return(0,f.jsx)(iG,{...i,...n,ref:t})});o5.displayName="MenuAnchor";var o7="MenuPortal",[o9,ae]=o$(o7,{forceMount:void 0}),at=e=>{let{__scopeMenu:t,forceMount:r,children:n,container:i}=e,o=o4(o7,t);return(0,f.jsx)(o9,{scope:t,forceMount:r,children:(0,f.jsx)(tL,{present:r||o.open,children:(0,f.jsx)(tP,{asChild:!0,container:i,children:n})})})};at.displayName=o7;var ar="MenuContent",[an,ai]=o$(ar),ao=p.forwardRef((e,t)=>{let r=ae(ar,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,o=o4(ar,e.__scopeMenu),a=o8(ar,e.__scopeMenu);return(0,f.jsx)(oZ.Provider,{scope:e.__scopeMenu,children:(0,f.jsx)(tL,{present:n||o.open,children:(0,f.jsx)(oZ.Slot,{scope:e.__scopeMenu,children:a.modal?(0,f.jsx)(aa,{...i,ref:t}):(0,f.jsx)(as,{...i,ref:t})})})})}),aa=p.forwardRef((e,t)=>{let r=o4(ar,e.__scopeMenu),n=p.useRef(null),i=ef(t,n);return p.useEffect(()=>{let e=n.current;if(e)return rx(e)},[]),(0,f.jsx)(al,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:tl(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),as=p.forwardRef((e,t)=>{let r=o4(ar,e.__scopeMenu);return(0,f.jsx)(al,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),al=p.forwardRef((e,t)=>{let{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:g,disableOutsideScroll:m,...w}=e,y=o4(ar,r),E=o8(ar,r),C=o1(r),A=o0(r),x=oQ(r),[b,v]=p.useState(null),S=p.useRef(null),I=ef(t,S,y.onContentChange),_=p.useRef(0),T=p.useRef(""),N=p.useRef(0),R=p.useRef(null),M=p.useRef("right"),D=p.useRef(0),O=m?rg:p.Fragment,P=m?{as:ep,allowPinchZoom:!0}:void 0,L=e=>{let t=T.current+e,r=x().filter(e=>!e.disabled),n=document.activeElement,i=r.find(e=>e.ref.current===n)?.textValue,o=function(e,t,r){var n;let i=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=(n=Math.max(r?e.indexOf(r):-1,0),e.map((t,r)=>e[(n+r)%e.length]));1===i.length&&(o=o.filter(e=>e!==r));let a=o.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return a!==r?a:void 0}(r.map(e=>e.textValue),t,i),a=r.find(e=>e.textValue===o)?.ref.current;(function e(t){T.current=t,window.clearTimeout(_.current),""!==t&&(_.current=window.setTimeout(()=>e(""),1e3))})(t),a&&setTimeout(()=>a.focus())};p.useEffect(()=>()=>window.clearTimeout(_.current),[]),tk();let j=p.useCallback(e=>M.current===R.current?.side&&function(e,t){return!!t&&function(e,t){let{x:r,y:n}=e,i=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let a=t[e].x,s=t[e].y,l=t[o].x,c=t[o].y;s>n!=c>n&&r<(l-a)*(n-s)/(c-s)+a&&(i=!i)}return i}({x:e.clientX,y:e.clientY},t)}(e,R.current?.area),[]);return(0,f.jsx)(an,{scope:r,searchRef:T,onItemEnter:p.useCallback(e=>{j(e)&&e.preventDefault()},[j]),onItemLeave:p.useCallback(e=>{j(e)||(S.current?.focus(),v(null))},[j]),onTriggerLeave:p.useCallback(e=>{j(e)&&e.preventDefault()},[j]),pointerGraceTimerRef:N,onPointerGraceIntentChange:p.useCallback(e=>{R.current=e},[]),children:(0,f.jsx)(O,{...P,children:(0,f.jsx)(tT,{asChild:!0,trapped:i,onMountAutoFocus:tl(o,e=>{e.preventDefault(),S.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:(0,f.jsx)(tA,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:g,children:(0,f.jsx)(oB,{asChild:!0,...A,dir:E.dir,orientation:"vertical",loop:n,currentTabStopId:b,onCurrentTabStopIdChange:v,onEntryFocus:tl(l,e=>{E.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,f.jsx)(iZ,{role:"menu","aria-orientation":"vertical","data-state":aP(y.open),"data-radix-menu-content":"",dir:E.dir,...C,...w,ref:I,style:{outline:"none",...w.style},onKeyDown:tl(w.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&n&&L(e.key));let i=S.current;if(e.target!==i||!oG.includes(e.key))return;e.preventDefault();let o=x().filter(e=>!e.disabled).map(e=>e.ref.current);oY.includes(e.key)&&o.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(o)}),onBlur:tl(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(_.current),T.current="")}),onPointerMove:tl(e.onPointerMove,aB(e=>{let t=e.target,r=D.current!==e.clientX;if(e.currentTarget.contains(t)&&r){let t=e.clientX>D.current?"right":"left";M.current=t,D.current=e.clientX}}))})})})})})})});ao.displayName=ar;var ac=p.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,f.jsx)(tw.div,{role:"group",...n,ref:t})});ac.displayName="MenuGroup";var ad=p.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,f.jsx)(tw.div,{...n,ref:t})});ad.displayName="MenuLabel";var au="MenuItem",ah="menu.itemSelect",af=p.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:n,...i}=e,o=p.useRef(null),a=o8(au,e.__scopeMenu),s=ai(au,e.__scopeMenu),l=ef(t,o),c=p.useRef(!1);return(0,f.jsx)(ap,{...i,ref:l,disabled:r,onClick:tl(e.onClick,()=>{let e=o.current;if(!r&&e){let t=new CustomEvent(ah,{bubbles:!0,cancelable:!0});e.addEventListener(ah,e=>n?.(e),{once:!0}),ty(e,t),t.defaultPrevented?c.current=!1:a.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),c.current=!0},onPointerUp:tl(e.onPointerUp,e=>{c.current||e.currentTarget?.click()}),onKeyDown:tl(e.onKeyDown,e=>{let t=""!==s.searchRef.current;!r&&(!t||" "!==e.key)&&oV.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});af.displayName=au;var ap=p.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:n=!1,textValue:i,...o}=e,a=ai(au,r),s=o0(r),l=p.useRef(null),c=ef(t,l),[d,u]=p.useState(!1),[h,g]=p.useState("");return p.useEffect(()=>{let e=l.current;e&&g((e.textContent??"").trim())},[o.children]),(0,f.jsx)(oZ.ItemSlot,{scope:r,disabled:n,textValue:i??h,children:(0,f.jsx)(oU,{asChild:!0,...s,focusable:!n,children:(0,f.jsx)(tw.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:c,onPointerMove:tl(e.onPointerMove,aB(e=>{n?a.onItemLeave(e):(a.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:tl(e.onPointerLeave,aB(e=>a.onItemLeave(e))),onFocus:tl(e.onFocus,()=>u(!0)),onBlur:tl(e.onBlur,()=>u(!1))})})})}),ag=p.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:n,...i}=e;return(0,f.jsx)(ab,{scope:e.__scopeMenu,checked:r,children:(0,f.jsx)(af,{role:"menuitemcheckbox","aria-checked":aL(r)?"mixed":r,...i,ref:t,"data-state":aj(r),onSelect:tl(i.onSelect,()=>n?.(!!aL(r)||!r),{checkForDefaultPrevented:!1})})})});ag.displayName="MenuCheckboxItem";var am="MenuRadioGroup",[aw,ay]=o$(am,{value:void 0,onValueChange:()=>{}}),aE=p.forwardRef((e,t)=>{let{value:r,onValueChange:n,...i}=e,o=tp(n);return(0,f.jsx)(aw,{scope:e.__scopeMenu,value:r,onValueChange:o,children:(0,f.jsx)(ac,{...i,ref:t})})});aE.displayName=am;var aC="MenuRadioItem",aA=p.forwardRef((e,t)=>{let{value:r,...n}=e,i=ay(aC,e.__scopeMenu),o=r===i.value;return(0,f.jsx)(ab,{scope:e.__scopeMenu,checked:o,children:(0,f.jsx)(af,{role:"menuitemradio","aria-checked":o,...n,ref:t,"data-state":aj(o),onSelect:tl(n.onSelect,()=>i.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});aA.displayName=aC;var ax="MenuItemIndicator",[ab,av]=o$(ax,{checked:!1}),aS=p.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:n,...i}=e,o=av(ax,r);return(0,f.jsx)(tL,{present:n||aL(o.checked)||!0===o.checked,children:(0,f.jsx)(tw.span,{...i,ref:t,"data-state":aj(o.checked)})})});aS.displayName=ax;var aI=p.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,f.jsx)(tw.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});aI.displayName="MenuSeparator";var a_=p.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,i=o1(r);return(0,f.jsx)(i$,{...i,...n,ref:t})});a_.displayName="MenuArrow";var[aT,aN]=o$("MenuSub"),aR="MenuSubTrigger",aM=p.forwardRef((e,t)=>{let r=o4(aR,e.__scopeMenu),n=o8(aR,e.__scopeMenu),i=aN(aR,e.__scopeMenu),o=ai(aR,e.__scopeMenu),a=p.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=o,c={__scopeMenu:e.__scopeMenu},d=p.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{let e=s.current;return()=>{window.clearTimeout(e),l(null)}},[s,l]),(0,f.jsx)(o5,{asChild:!0,...c,children:(0,f.jsx)(ap,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":aP(r.open),...e,ref:eh(t,i.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:tl(e.onPointerMove,aB(t=>{o.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||a.current||(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:tl(e.onPointerLeave,aB(e=>{d();let t=r.content?.getBoundingClientRect();if(t){let n=r.content?.dataset.side,i="right"===n,a=t[i?"left":"right"],l=t[i?"right":"left"];o.onPointerGraceIntentChange({area:[{x:e.clientX+(i?-5:5),y:e.clientY},{x:a,y:t.top},{x:l,y:t.top},{x:l,y:t.bottom},{x:a,y:t.bottom}],side:n}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(e),e.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:tl(e.onKeyDown,t=>{let i=""!==o.searchRef.current;!e.disabled&&(!i||" "!==t.key)&&oW[n.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())})})})});aM.displayName=aR;var aD="MenuSubContent",aO=p.forwardRef((e,t)=>{let r=ae(ar,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,o=o4(ar,e.__scopeMenu),a=o8(ar,e.__scopeMenu),s=aN(aD,e.__scopeMenu),l=p.useRef(null),c=ef(t,l);return(0,f.jsx)(oZ.Provider,{scope:e.__scopeMenu,children:(0,f.jsx)(tL,{present:n||o.open,children:(0,f.jsx)(oZ.Slot,{scope:e.__scopeMenu,children:(0,f.jsx)(al,{id:s.contentId,"aria-labelledby":s.triggerId,...i,ref:c,align:"start",side:"rtl"===a.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{a.isUsingKeyboardRef.current&&l.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:tl(e.onFocusOutside,e=>{e.target!==s.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:tl(e.onEscapeKeyDown,e=>{a.onClose(),e.preventDefault()}),onKeyDown:tl(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=oX[a.dir].includes(e.key);t&&r&&(o.onOpenChange(!1),s.trigger?.focus(),e.preventDefault())})})})})})});function aP(e){return e?"open":"closed"}function aL(e){return"indeterminate"===e}function aj(e){return aL(e)?"indeterminate":e?"checked":"unchecked"}function aB(e){return t=>"mouse"===t.pointerType?e(t):void 0}aO.displayName=aD;var ak="DropdownMenu",[aF,aU]=tc(ak,[oJ]),aH=oJ(),[az,aV]=aF(ak),aY=e=>{let{__scopeDropdownMenu:t,children:r,dir:n,open:i,defaultOpen:o,onOpenChange:a,modal:s=!0}=e,l=aH(t),c=p.useRef(null),[d=!1,u]=tg({prop:i,defaultProp:o,onChange:a});return(0,f.jsx)(az,{scope:t,triggerId:tf(),triggerRef:c,contentId:tf(),open:d,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(e=>!e),[u]),modal:s,children:(0,f.jsx)(o6,{...l,open:d,onOpenChange:u,dir:n,modal:s,children:r})})};aY.displayName=ak;var aG="DropdownMenuTrigger",aW=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:n=!1,...i}=e,o=aV(aG,r),a=aH(r);return(0,f.jsx)(o5,{asChild:!0,...a,children:(0,f.jsx)(tw.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:eh(t,o.triggerRef),onPointerDown:tl(e.onPointerDown,e=>{n||0!==e.button||!1!==e.ctrlKey||(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:tl(e.onKeyDown,e=>{!n&&(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});aW.displayName=aG;var aX=e=>{let{__scopeDropdownMenu:t,...r}=e,n=aH(t);return(0,f.jsx)(at,{...n,...r})};aX.displayName="DropdownMenuPortal";var aq="DropdownMenuContent",aZ=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aV(aq,r),o=aH(r),a=p.useRef(!1);return(0,f.jsx)(ao,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...n,ref:t,onCloseAutoFocus:tl(e.onCloseAutoFocus,e=>{a.current||i.triggerRef.current?.focus(),a.current=!1,e.preventDefault()}),onInteractOutside:tl(e.onInteractOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;(!i.modal||n)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});aZ.displayName=aq,p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(ac,{...i,...n,ref:t})}).displayName="DropdownMenuGroup";var aQ=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(ad,{...i,...n,ref:t})});aQ.displayName="DropdownMenuLabel";var aK=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(af,{...i,...n,ref:t})});aK.displayName="DropdownMenuItem";var a$=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(ag,{...i,...n,ref:t})});a$.displayName="DropdownMenuCheckboxItem",p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(aE,{...i,...n,ref:t})}).displayName="DropdownMenuRadioGroup";var aJ=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(aA,{...i,...n,ref:t})});aJ.displayName="DropdownMenuRadioItem";var a1=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(aS,{...i,...n,ref:t})});a1.displayName="DropdownMenuItemIndicator";var a0=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(aI,{...i,...n,ref:t})});a0.displayName="DropdownMenuSeparator",p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(a_,{...i,...n,ref:t})}).displayName="DropdownMenuArrow";var a2=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(aM,{...i,...n,ref:t})});a2.displayName="DropdownMenuSubTrigger";var a4=p.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=aH(r);return(0,f.jsx)(aO,{...i,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a4.displayName="DropdownMenuSubContent";let a3=eI("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),a8=eI("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),a6=eI("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);p.forwardRef(({className:e,inset:t,children:r,...n},i)=>(0,f.jsxs)(a2,{ref:i,className:ed("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n,children:[r,f.jsx(a3,{className:"ml-auto"})]})).displayName=a2.displayName,p.forwardRef(({className:e,...t},r)=>f.jsx(a4,{ref:r,className:ed("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=a4.displayName;let a5=p.forwardRef(({className:e,sideOffset:t=4,...r},n)=>f.jsx(aX,{children:f.jsx(aZ,{ref:n,sideOffset:t,className:ed("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));a5.displayName=aZ.displayName;let a7=p.forwardRef(({className:e,inset:t,...r},n)=>f.jsx(aK,{ref:n,className:ed("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));a7.displayName=aK.displayName,p.forwardRef(({className:e,children:t,checked:r,...n},i)=>(0,f.jsxs)(a$,{ref:i,className:ed("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(a1,{children:f.jsx(a8,{className:"h-4 w-4"})})}),t]})).displayName=a$.displayName,p.forwardRef(({className:e,children:t,...r},n)=>(0,f.jsxs)(aJ,{ref:n,className:ed("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(a1,{children:f.jsx(a6,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=aJ.displayName,p.forwardRef(({className:e,inset:t,...r},n)=>f.jsx(aQ,{ref:n,className:ed("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r})).displayName=aQ.displayName,p.forwardRef(({className:e,...t},r)=>f.jsx(a0,{ref:r,className:ed("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=a0.displayName;let a9=eI("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),se=eI("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),st=eI("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),sr=eI("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),sn=eI("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var si=r(1270);function so({material:e}){let{deleteMaterial:t}=ts(),{toast:r}=nd(),[n,i]=(0,p.useState)(!1),[o,a]=(0,p.useState)(!1),s=async()=>{try{let t=await si.toDataURL(e.id),n=document.createElement("a");n.download=`qr-${e.name.replace(/\s+/g,"-").toLowerCase()}.png`,n.href=t,n.click(),r({title:"QR Code gerado",description:"QR Code do material foi baixado com sucesso!"})}catch(e){r({title:"Erro ao gerar QR Code",description:"N\xe3o foi poss\xedvel gerar o QR Code.",variant:"destructive"})}};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(aY,{children:[f.jsx(aW,{asChild:!0,children:f.jsx(eA,{variant:"ghost",className:"h-8 w-8 p-0",children:f.jsx(a9,{className:"h-4 w-4"})})}),(0,f.jsxs)(a5,{align:"end",children:[(0,f.jsxs)(a7,{onClick:()=>a(!0),children:[f.jsx(se,{className:"mr-2 h-4 w-4"}),"Ver Detalhes"]}),(0,f.jsxs)(a7,{onClick:s,children:[f.jsx(eN,{className:"mr-2 h-4 w-4"}),"Gerar QR Code"]}),(0,f.jsxs)(a7,{onClick:()=>i(!0),children:[f.jsx(st,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,f.jsxs)(a7,{onClick:()=>{let t=new Blob([JSON.stringify({...e,exportDate:new Date().toISOString()},null,2)],{type:"application/json"}),n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=`material-${e.name.replace(/\s+/g,"-").toLowerCase()}.json`,i.click(),window.URL.revokeObjectURL(n),r({title:"Material exportado",description:"Dados do material foram exportados com sucesso!"})},children:[f.jsx(sr,{className:"mr-2 h-4 w-4"}),"Exportar"]}),(0,f.jsxs)(a7,{onClick:()=>{window.confirm(`Tem certeza que deseja excluir "${e.name}"?`)&&(t(e.id),r({title:"Material exclu\xeddo",description:"Material foi removido com sucesso!",variant:"destructive"}))},className:"text-red-600",children:[f.jsx(sn,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]}),f.jsx(rT,{open:n,onOpenChange:i,children:(0,f.jsxs)(r2,{className:"max-w-2xl",children:[f.jsx(r4,{children:f.jsx(r8,{children:"Editar Material"})}),f.jsx(nu,{material:e,onSuccess:()=>i(!1)})]})}),f.jsx(rT,{open:o,onOpenChange:a,children:(0,f.jsxs)(r2,{className:"max-w-2xl",children:[f.jsx(r4,{children:f.jsx(r8,{children:"Detalhes do Material"})}),(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:"Nome"}),f.jsx("p",{children:e.name})]}),(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:"Categoria"}),f.jsx("p",{children:e.category})]}),(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:"Fornecedor"}),f.jsx("p",{children:e.supplier})]}),(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:"Quantidade"}),(0,f.jsxs)("p",{children:[e.quantity," ",e.unit]})]}),(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:"Pre\xe7o Unit\xe1rio"}),(0,f.jsxs)("p",{children:["R$ ",e.price.toFixed(2)]})]}),(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:"Valor Total"}),(0,f.jsxs)("p",{children:["R$ ",(e.price*e.quantity).toFixed(2)]})]}),(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:"Estoque M\xednimo"}),(0,f.jsxs)("p",{children:[e.minStock," ",e.unit]})]}),(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:"Status"}),f.jsx("p",{children:e.status})]})]}),e.notes&&(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:"Observa\xe7\xf5es"}),f.jsx("p",{className:"text-muted-foreground",children:e.notes})]})]})]})})]})}let sa=eI("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ss=eI("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function sl(){let{materials:e}=ts(),[t,r]=(0,p.useState)(""),[n,i]=(0,p.useState)(""),[o,a]=(0,p.useState)(""),[s,l]=(0,p.useState)(!1),c=[...new Set(e.map(e=>e.category))],d=e.filter(e=>{let r=e.name.toLowerCase().includes(t.toLowerCase())||e.supplier.toLowerCase().includes(t.toLowerCase()),i=!n||e.category===n,a=!o||e.status===o;return r&&i&&a}),u=e=>{switch(e){case"Em Estoque":default:return"default";case"Estoque Baixo":return"secondary";case"Sem Estoque":return"destructive"}};return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Materiais"}),(0,f.jsxs)(rT,{open:s,onOpenChange:l,children:[f.jsx(rR,{asChild:!0,children:(0,f.jsxs)(eA,{children:[f.jsx(tr,{className:"mr-2 h-4 w-4"}),"Adicionar Material"]})}),(0,f.jsxs)(r2,{className:"max-w-2xl",children:[f.jsx(r4,{children:f.jsx(r8,{children:"Adicionar Novo Material"})}),f.jsx(nu,{onSuccess:()=>l(!1)})]})]})]}),(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:(0,f.jsxs)(e8,{className:"flex items-center gap-2",children:[f.jsx(sa,{className:"h-4 w-4"}),"Filtros"]})}),f.jsx(e5,{children:(0,f.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,f.jsxs)("div",{className:"relative flex-1",children:[f.jsx(ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),f.jsx(r5,{placeholder:"Buscar por nome ou fornecedor...",value:t,onChange:e=>r(e.target.value),className:"pl-10"})]}),(0,f.jsxs)("div",{className:"flex flex-wrap gap-2",children:[f.jsx(e9,{variant:""===n?"default":"outline",className:"cursor-pointer",onClick:()=>i(""),children:"Todas Categorias"}),c.map(e=>f.jsx(e9,{variant:n===e?"default":"outline",className:"cursor-pointer",onClick:()=>i(e),children:e},e))]}),(0,f.jsxs)("div",{className:"flex flex-wrap gap-2",children:[f.jsx(e9,{variant:""===o?"default":"outline",className:"cursor-pointer",onClick:()=>a(""),children:"Todos Status"}),["Em Estoque","Estoque Baixo","Sem Estoque"].map(e=>f.jsx(e9,{variant:o===e?"default":"outline",className:"cursor-pointer",onClick:()=>a(e),children:e},e))]})]})})]}),f.jsx(e4,{children:(0,f.jsxs)(e5,{className:"p-0",children:[f.jsx("div",{className:"overflow-x-auto",children:(0,f.jsxs)(oy,{children:[f.jsx(oE,{children:(0,f.jsxs)(oA,{children:[f.jsx(ox,{children:"Nome"}),f.jsx(ox,{children:"Categoria"}),f.jsx(ox,{children:"Fornecedor"}),f.jsx(ox,{children:"Quantidade"}),f.jsx(ox,{children:"Pre\xe7o"}),f.jsx(ox,{children:"Status"}),f.jsx(ox,{className:"text-right",children:"A\xe7\xf5es"})]})}),f.jsx(oC,{children:d.map(e=>(0,f.jsxs)(oA,{children:[f.jsx(ob,{className:"font-medium",children:e.name}),f.jsx(ob,{children:e.category}),f.jsx(ob,{children:e.supplier}),(0,f.jsxs)(ob,{children:[e.quantity," ",e.unit]}),(0,f.jsxs)(ob,{children:["R$ ",e.price.toFixed(2)]}),f.jsx(ob,{children:f.jsx(e9,{variant:u(e.status),children:e.status})}),f.jsx(ob,{className:"text-right",children:f.jsx(so,{material:e})})]},e.id))})]})}),0===d.length&&f.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum material encontrado"})]})})]})}let sc=eI("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),sd=eI("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(s||(s={}));var su=new Map([[s.QR_CODE,"QR_CODE"],[s.AZTEC,"AZTEC"],[s.CODABAR,"CODABAR"],[s.CODE_39,"CODE_39"],[s.CODE_93,"CODE_93"],[s.CODE_128,"CODE_128"],[s.DATA_MATRIX,"DATA_MATRIX"],[s.MAXICODE,"MAXICODE"],[s.ITF,"ITF"],[s.EAN_13,"EAN_13"],[s.EAN_8,"EAN_8"],[s.PDF_417,"PDF_417"],[s.RSS_14,"RSS_14"],[s.RSS_EXPANDED,"RSS_EXPANDED"],[s.UPC_A,"UPC_A"],[s.UPC_E,"UPC_E"],[s.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(l||(l={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(c||(c={}));var sh=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[c.SCAN_TYPE_CAMERA,c.SCAN_TYPE_FILE],e}(),sf=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!su.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,su.get(t))},e}(),sp=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(d||(d={}));var sg=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:d.UNKWOWN_ERROR}},e}(),sm=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function sw(e){return null==e}var sy=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),sE=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),sC=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),sA=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!=typeof e){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var n=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=Object.keys(e),o=0;o<i.length;o++){var a=i[o];if(n.has(a))return t.logError("".concat(a," is not supported videoConstaints."),!0),!1}return!0},e}(),sx=r(10),sb=function(){function e(e,t,r){if(this.formatMap=new Map([[s.QR_CODE,sx.BarcodeFormat.QR_CODE],[s.AZTEC,sx.BarcodeFormat.AZTEC],[s.CODABAR,sx.BarcodeFormat.CODABAR],[s.CODE_39,sx.BarcodeFormat.CODE_39],[s.CODE_93,sx.BarcodeFormat.CODE_93],[s.CODE_128,sx.BarcodeFormat.CODE_128],[s.DATA_MATRIX,sx.BarcodeFormat.DATA_MATRIX],[s.MAXICODE,sx.BarcodeFormat.MAXICODE],[s.ITF,sx.BarcodeFormat.ITF],[s.EAN_13,sx.BarcodeFormat.EAN_13],[s.EAN_8,sx.BarcodeFormat.EAN_8],[s.PDF_417,sx.BarcodeFormat.PDF_417],[s.RSS_14,sx.BarcodeFormat.RSS_14],[s.RSS_EXPANDED,sx.BarcodeFormat.RSS_EXPANDED],[s.UPC_A,sx.BarcodeFormat.UPC_A],[s.UPC_E,sx.BarcodeFormat.UPC_E],[s.UPC_EAN_EXTENSION,sx.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!sx)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var n=this.createZXingFormats(e),i=new Map;i.set(sx.DecodeHintType.POSSIBLE_FORMATS,n),i.set(sx.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,n){try{r(t.decode(e))}catch(e){n(e)}})},e.prototype.decode=function(e){var t=new sx.MultiFormatReader(this.verbose,this.hints),r=new sx.HTMLCanvasElementLuminanceSource(e),n=new sx.BinaryBitmap(new sx.HybridBinarizer(r)),i=t.decode(n);return{text:i.text,format:sf.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];this.formatMap.has(n)?t.push(this.formatMap.get(n)):this.logger.logError("".concat(n," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),sv=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},sS=function(){function e(t,r,n){if(this.formatMap=new Map([[s.QR_CODE,"qr_code"],[s.AZTEC,"aztec"],[s.CODABAR,"codabar"],[s.CODE_39,"code_39"],[s.CODE_93,"code_93"],[s.CODE_128,"code_128"],[s.DATA_MATRIX,"data_matrix"],[s.ITF,"itf"],[s.EAN_13,"ean_13"],[s.EAN_8,"ean_8"],[s.PDF_417,"pdf417"],[s.UPC_A,"upc_a"],[s.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&(new BarcodeDetector({formats:["qr_code"]}),!0)},e.prototype.decodeAsync=function(e){var t,r,n,i;return t=this,r=void 0,n=void 0,i=function(){var t,r;return sv(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=n.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(t)).rawValue,format:sf.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})},new(n||(n=Promise))(function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof n?r:new n(function(e){e(r)})).then(a,s)}l((i=i.apply(t,r||[])).next())})},e.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,n=0;n<e.length;n++){var i=e[n],o=i.boundingBox.width*i.boundingBox.height;o>r&&(r=o,t=i)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];this.formatMap.has(n)?t.push(this.formatMap.get(n)):this.logger.warn("".concat(n," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),sI=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},s_=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},sT=function(){function e(e,t,r,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&sS.isSupported()?(this.primaryDecoder=new sS(e,r,n),this.secondaryDecoder=new sb(e,r,n)):this.primaryDecoder=new sb(e,r,n)}return e.prototype.decodeAsync=function(e){return sI(this,void 0,void 0,function(){var t;return s_(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return sI(this,void 0,void 0,function(){var t,r;return s_(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,n.sent()];case 3:if(r=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++)e+=r[t];var n=e/this.executionResults.length;console.log("".concat(n," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),sN=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sR=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},sM=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},sD=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};return t[this.name]=e,this.track.applyConstraints({advanced:[t]})},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),sO=function(e){function t(t){return e.call(this,"zoom",t)||this}return sN(t,e),t}(function(e){function t(t,r){return e.call(this,t,r)||this}return sN(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};return t[this.name]=e,this.track.applyConstraints({advanced:[t]})},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw Error("".concat(this.name," capability not supported"))},t}(sD)),sP=function(e){function t(t){return e.call(this,"torch",t)||this}return sN(t,e),t}(sD),sL=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new sO(this.track)},e.prototype.torchFeature=function(){return new sP(this.track)},e}(),sj=function(){function e(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,n),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,i){return sR(this,void 0,void 0,function(){var o,a;return sM(this,function(s){switch(s.label){case 0:if(o=new e(t,r,i),!n.aspectRatio)return[3,2];return a={aspectRatio:n.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(a)];case 1:s.sent(),s.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return sR(this,void 0,void 0,function(){return sM(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var n=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach(function(r){e.mediaStream.removeTrack(r),r.stop(),++i>=n&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new sL(this.getFirstTrackOrFail())},e}(),sB=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,r){return sR(this,void 0,void 0,function(){return sM(this,function(n){return[2,sj.create(e,this.mediaStream,t,r)]})})},e.create=function(t){return sR(this,void 0,void 0,function(){var r;return sM(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return[2,new e(n.sent())]}})})},e}(),sk=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},sF=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},sU=function(){function e(){}return e.failIfNotSupported=function(){return sk(this,void 0,void 0,function(){return sF(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return sk(this,void 0,void 0,function(){return sF(this,function(t){return[2,sB.create(e)]})})},e}(),sH=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},sz=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=sy.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=sy.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){var e,t,r,n;return e=this,t=void 0,r=void 0,n=function(){var e,t,r,n,i,o,a;return sH(this,function(s){switch(s.label){case 0:return e=function(e){for(var t=e.getVideoTracks(),r=0;r<t.length;r++){var n=t[r];n.enabled=!1,n.stop(),e.removeTrack(n)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=0,r=s.sent(),n=[],o=r;i<o.length;i++)"videoinput"===(a=o[i]).kind&&n.push({id:a.deviceId,label:a.label});return e(t),[2,n]}})},new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var r=[],n=0;n<t.length;n++){var i=t[n];"video"===i.kind&&r.push({id:i.id,label:i.label})}e(r)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(u||(u={}));var sV=function(){function e(){this.state=u.NOT_STARTED,this.onGoingTransactionNewState=u.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===u.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=u.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===u.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=u.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==u.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case u.UNKNOWN:throw"Transition from unknown is not allowed";case u.NOT_STARTED:this.failIfNewStateIs(e,[u.PAUSED]);case u.SCANNING:case u.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var r=0;r<t.length;r++)if(e===t[r])throw"Cannot transition from ".concat(this.state," to ").concat(e)},e}(),sY=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===u.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==u.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===u.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===u.PAUSED},e}(),sG=function(){function e(){}return e.create=function(){return new sY(new sV)},e}(),sW=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sW(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(sh),sq=function(){function e(e,t){this.logger=t,this.fps=sX.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=sX.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?sA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!sw(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),sZ=function(){function e(e,t){var r;if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(r=t,this.verbose=!0===r.verbose,r.experimentalFeatures),this.logger=new sm(this.verbose),this.qrcode=new sT(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=sG.create()}return e.prototype.start=function(e,t,r,n){var i,o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";i=n||(this.verbose?this.logger.log:function(){});var a=sq.create(t,this.logger);this.clearElement();var s=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?s=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=s,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:sX.DEFAULT_WIDTH,c.style.position="relative",this.shouldScan=!0,this.element=c;var d=this,h=this.stateManagerProxy.startTransition(u.SCANNING);return new Promise(function(t,n){var s=l?a.videoConstraints:d.createVideoConstraints(e);if(!s){h.cancel(),n("videoConstraints should be defined");return}var c={};(!l||a.aspectRatio)&&(c.aspectRatio=a.aspectRatio);var u={onRenderSurfaceReady:function(e,t){d.setupUi(e,t,a),d.isScanning=!0,d.foreverScan(a,r,i)}};sU.failIfNotSupported().then(function(e){e.create(s).then(function(e){return e.render(o.element,c,u).then(function(e){d.renderedCamera=e,h.execute(),t(null)}).catch(function(e){h.cancel(),n(e)})}).catch(function(e){h.cancel(),n(sy.errorGettingUserMedia(e))})}).catch(function(e){h.cancel(),n(sy.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(u.PAUSED),this.showPausedState(),(sw(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(u.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(u.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var t=document.getElementById(sX.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}},n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),r(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(sw(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var e=o.width,a=o.height,s=document.getElementById(r.elementId),l=s.clientWidth?s.clientWidth:sX.DEFAULT_WIDTH,c=Math.max(s.clientHeight?s.clientHeight:a,sX.FILE_SCAN_MIN_HEIGHT),d=r.computeCanvasDrawConfig(e,a,l,c);if(t){var u=r.createCanvasElement(l,c,"qr-canvas-visible");u.style.display="inline-block",s.appendChild(u);var h=u.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(o,0,0,e,a,d.x,d.y,d.width,d.height)}var f=sX.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(o.width,d.width),g=Math.max(o.height,d.height),m=p+2*f,w=g+2*f,y=r.createCanvasElement(m,w);s.appendChild(y);var E=y.getContext("2d");if(!E)throw"Unable to get 2d context from canvas";E.canvas.width=m,E.canvas.height=w,E.drawImage(o,0,0,e,a,f,f,p,g);try{r.qrcode.decodeRobustlyAsync(y).then(function(e){n(sp.createFromQrcodeResult(e))}).catch(i)}catch(e){i("QR code parse error, error = ".concat(e))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return sz.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(e){if(!sA.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[s.QR_CODE,s.AZTEC,s.CODABAR,s.CODE_39,s.CODE_93,s.CODE_128,s.DATA_MATRIX,s.MAXICODE,s.ITF,s.EAN_13,s.EAN_8,s.PDF_417,s.RSS_14,s.RSS_EXPANDED,s.UPC_A,s.UPC_E,s.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],n=0,i=e.formatsToSupport;n<i.length;n++){var o=i[n];Object.values(s).includes(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(0===r.length)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(sw(e))return!0;if(!sw(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(sw(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!sw(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,r){var n,i=r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,t,i),a=function(e){if(e<sX.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(sX.MIN_QR_BOX_SIZE,"px.")};a(o.width),a(o.height),o.width=((n=o.width)>e&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),n=e),n)},e.prototype.validateQrboxConfig=function(e){if("number"!=typeof e&&"function"!=typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,r){if("number"==typeof r)return{width:r,height:r};if("function"==typeof r)try{return r(e,t)}catch(e){throw Error("qrbox config was passed as a function but it failed with unknown error"+e)}return r},e.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var n=sw(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(n);var i=this.toQrdimensions(e,t,n);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&i.height<=t,a=o?this.getShadedRegionBounds(e,t,i):{x:0,y:0,width:e,height:t},s=this.createCanvasElement(a.width,a.height),l=s.getContext("2d",{willReadFrequently:!0});l.canvas.width=a.width,l.canvas.height=a.height,this.element.append(s),o&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=l,this.canvasElement=s},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=sy.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,sp.createFromQrcodeResult(t)),r.possiblyUpdateShaders(!0),!0}).catch(function(e){r.possiblyUpdateShaders(!1);var n=sy.codeParseError(e);return t(n,sg.createFrom(n)),!1})},e.prototype.foreverScan=function(e,t,r){var n=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,a=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var s=this.qrRegion.width*o,l=this.qrRegion.height*a,c=this.qrRegion.x*o,d=this.qrRegion.y*a;this.context.drawImage(i,c,d,s,l,0,0,this.qrRegion.width,this.qrRegion.height);var u=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(e,t,r)},n.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(i){i||!0===e.disableFlip?u():(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(t,r).finally(function(){u()}))}).catch(function(e){n.logger.logError("Error happend while scanning context",e),u()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",r="deviceId",n={user:!0,environment:!0},i="exact",o=function(e){if(e in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},a=Object.keys(e);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var s=Object.keys(e)[0];if(s!==t&&s!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(s===t){var l=e.facingMode;if("string"==typeof l){if(o(l))return{facingMode:l}}else if("object"==typeof l){if(i in l){if(o(l["".concat(i)]))return{facingMode:{exact:l["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.")}else{var c=typeof l;throw"Invalid type of 'facingMode' = ".concat(c)}}else{var d=e.deviceId;if("string"==typeof d)return{deviceId:d};if("object"==typeof d){if(i in d)return{deviceId:{exact:d["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof d)}}var u=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(u)},e.prototype.computeCanvasDrawConfig=function(e,t,r,n){if(e<=r&&t<=n)return{x:(r-e)/2,y:(n-t)/2,width:e,height:t};var i=e,o=t;return e>r&&(t=r/e*t,e=r),t>n&&(e=n/t*e,t=n),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(o)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,n)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?sX.BORDER_SHADER_MATCH_COLOR:sX.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,r){var n=document.createElement("canvas");return n.style.width="".concat(e,"px"),n.style.height="".concat(t,"px"),n.style.display="none",n.id=sw(r)?"qr-canvas":r,n},e.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(e,t,r,n){if(!(t-n.width<1)&&!(r-n.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(t-n.width)/2,a=(r-n.height)/2;i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(sX.SHADED_REGION_ELEMENT_ID),t-n.width<11||r-n.height<11?this.hasBorderShaders=!1:(this.insertShaderBorders(i,40,5,-5,null,0,!0),this.insertShaderBorders(i,40,5,-5,null,0,!1),this.insertShaderBorders(i,40,5,null,-5,0,!0),this.insertShaderBorders(i,40,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0),e.append(i)}},e.prototype.insertShaderBorders=function(e,t,r,n,i,o,a){var s=document.createElement("div");s.style.position="absolute",s.style.backgroundColor=sX.BORDER_SHADER_DEFAULT_COLOR,s.style.width="".concat(t,"px"),s.style.height="".concat(r,"px"),null!==n&&(s.style.top="".concat(n,"px")),null!==i&&(s.style.bottom="".concat(i,"px")),a?s.style.left="".concat(o,"px"):s.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(s),e.appendChild(s)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),sQ="data:image/svg+xml;base64,",sK=sQ+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",s$=sQ+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",sJ=sQ+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",s1=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),s0=function(){function e(){this.data=s1.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=s1.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),s2=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=sC.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var r=document.createElement("br"),n=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(n);var i=document.createElement("a");i.innerText=sC.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),s4=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=sJ,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=sJ,this.infoIcon.style.opacity="0.6")},e}(),s3=function(){function e(){var e=this;this.infoDiv=new s2,this.infoIcon=new s4(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),s8=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},s6=function(){function e(){}return e.hasPermissions=function(){var e,t,r,n;return e=this,t=void 0,r=void 0,n=function(){var e,t,r;return s8(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=0,t=n.sent();e<t.length;e++)if("videoinput"===(r=t[e]).kind&&r.label)return[2,!0];return[2,!1]}})},new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},e}(),s5=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,r=this.supportedScanTypes;t<r.length;t++){var n=r[t];if(e.isCameraScanType(n))return!0}return!1},e.isCameraScanType=function(e){return e===c.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===c.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return sh.DEFAULT_SUPPORTED_SCAN_TYPE;var t=sh.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var r=0;r<e.length;r++){var n=e[r];if(!sh.DEFAULT_SUPPORTED_SCAN_TYPE.includes(n))throw"Unsupported scan type ".concat(n)}return e},e}(),s7=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),s9=function(){function e(){}return e.createElement=function(e,t){var r=document.createElement(e);return r.id=t,r.classList.add(s7.ALL_ELEMENT_CLASS),"button"===e&&r.setAttribute("type","button"),r},e}(),le=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},lt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},lr=function(){function e(e,t,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return le(this,void 0,void 0,function(){var e,t;return lt(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=r.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?sE.torchOffButton():sE.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var r=e?sE.torchOnFailedMessage():sE.torchOffFailedMessage();t&&(r+="; Error = "+t),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),ln=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=s9.createElement("button",s7.TORCH_BUTTON_ID),this.torchController=new lr(e,this,t)}return e.prototype.render=function(e,t){var r=this;this.torchButton.innerText=sE.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var n=this;this.torchButton.addEventListener("click",function(e){return le(r,void 0,void 0,function(){return lt(this,function(e){switch(e.label){case 0:return[4,n.torchController.flipState()];case 1:return e.sent(),n.torchController.isTorchEnabled()?(n.torchButton.classList.remove(s7.TORCH_BUTTON_CLASS_TORCH_OFF),n.torchButton.classList.add(s7.TORCH_BUTTON_CLASS_TORCH_ON)):(n.torchButton.classList.remove(s7.TORCH_BUTTON_CLASS_TORCH_ON),n.torchButton.classList.add(s7.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new lr(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=sE.torchOnButton(),this.torchController.reset()},e.create=function(t,r,n,i){var o=new e(r,i);return o.render(t,n),o},e}(),li=function(){function e(e,t,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var n=document.createElement("label");n.setAttribute("for",this.getFileScanInputId()),n.style.display="inline-block",this.fileBasedScanRegion.appendChild(n),this.fileSelectionButton=s9.createElement("button",s7.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){n.click()}),n.append(this.fileSelectionButton),this.fileScanInput=s9.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",n.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var n=t.files[0],o=n.name;i.setImageNameToButton(o),r(n)}}});var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var n=t.files;if(!n||0===n.length)return;for(var a=!1,s=0;s<n.length;++s){var l=n.item(s);if(l){var c=/image.*/;if(l.type.match(c)){a=!0;var d=l.name;i.setImageNameToButton(d),r(l),o.innerText=sE.dragAndDropMessage();break}}}a||(o.innerText=sE.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=sE.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),r=e.length,n=e.substring(r-8,r);e="".concat(t,"....").concat(n)}var i=sE.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=sE.fileSelectionChooseImage()+" - "+sE.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,r,n){return new e(t,r,n)},e}(),lo=function(){function e(e){this.selectElement=s9.createElement("select",s7.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var r=this.cameras.length;if(0===r)throw Error("No cameras found");if(1===r)t.style.display="none";else{var n=sE.selectCamera();t.innerText="".concat(n," (").concat(this.cameras.length,")  ")}for(var i=1,o=0,a=this.cameras;o<a.length;o++){var s=a[o],l=s.id,c=null==s.label?l:s.label;c&&""!==c||(c=[sE.anonymousCameraPrefix(),i++].join(" "));var d=document.createElement("option");d.value=l,d.innerText=c,this.options.push(d),this.selectElement.appendChild(d)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,r=this.options;t<r.length;t++)if(r[t].value===e)return!0;return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,r){var n=new e(r);return n.render(t),n},e}(),la=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=s9.createElement("input",s7.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=sE.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var n=this;this.rangeInput.addEventListener("input",function(){return n.onValueChange()}),this.rangeInput.addEventListener("change",function(){return n.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=sE.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,r,n){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=n.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,r){var n=new e;return n.render(t,r),n},e}();function ls(){var e;let[t,r]=(0,p.useState)(""),[n,i]=(0,p.useState)(!1),[o,a]=(0,p.useState)(null),[s,l]=(0,p.useState)({type:"adicionar",quantity:""}),c=(0,p.useRef)(null),d=(0,p.useRef)(null),u=(0,p.useRef)(null),{materials:h}=ts(),{toast:g}=nd(),m=async()=>{let e=await sZ.getCameras().then(e=>e[0]?.id);if(!e){g({title:"Erro",description:"Nenhuma c\xe2mera foi detectada no dispositivo.",variant:"destructive"});return}i(!0);let t=new sZ("qr-reader");c.current=t,t.start(e,{fps:10,qrbox:250},async e=>{await t.stop(),await t.clear(),c.current=null,i(!1),r(""),w(e)},()=>{}).catch(e=>{g({title:"Erro ao iniciar c\xe2mera",description:String(e),variant:"destructive"}),i(!1)})},w=e=>{let t=h.find(t=>t.id===e);r(e),a(t),g({title:t?"Material encontrado":"Material n\xe3o encontrado",description:t?`Material "${t.name}" foi identificado.`:"O c\xf3digo QR n\xe3o corresponde a nenhum material cadastrado.",variant:t?"default":"destructive"})},y=e=>{(""===e||/^[0-9]*[.,]?[0-9]*$/.test(e))&&l(t=>({...t,quantity:e}))},E=async()=>{if(!o)return;let e=parseFloat(s.quantity.toString());if(isNaN(e)||e<=0){g({title:"Erro",description:"Quantidade deve ser um n\xfamero positivo maior que zero.",variant:"destructive"});return}try{let t=o.quantity,n="adicionar"===s.type?t+e:Math.max(0,t-e),{addMovement:c,currentProjectId:d,currentUserId:u}=ts.getState();if(!d||!u){g({title:"Erro",description:"Projeto ou usu\xe1rio n\xe3o selecionado. Fa\xe7a login novamente.",variant:"destructive"});return}await c({type:"adicionar"===s.type?"entrada":"sa\xedda",materialId:o.id,materialName:o.name,materialCategory:o.category,quantity:e,location:"Dep\xf3sito Central",justification:"Ajuste via QR Scanner"},d,u),g({title:"Estoque atualizado",description:`Novo estoque: ${n} ${o.unit}`}),a(null),r(""),i(!1),l(e=>({...e,quantity:""}))}catch(e){console.error("Erro ao atualizar estoque:",e),g({title:"Erro",description:"N\xe3o foi poss\xedvel atualizar o estoque. Tente novamente.",variant:"destructive"})}};return(0,f.jsxs)("div",{className:"space-y-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Scanner QR"}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:(0,f.jsxs)(e8,{className:"flex items-center gap-2",children:[f.jsx(sc,{className:"h-5 w-5"}),"Escanear com C\xe2mera"]})}),(0,f.jsxs)(e5,{children:[!n&&!t&&f.jsx(eA,{onClick:m,className:"w-full",children:"Iniciar Escaneamento"}),n&&!t&&(0,f.jsxs)(f.Fragment,{children:[f.jsx(eA,{variant:"destructive",onClick:()=>{c.current?.stop().then(()=>{c.current?.clear(),i(!1)}).catch(e=>{g({title:"Erro ao parar escaneamento",description:String(e),variant:"destructive"})})},className:"w-full",children:"Parar Escaneamento"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Escaneando... aponte a c\xe2mera para o QR code"})]}),f.jsx("div",{id:"qr-reader",ref:d,className:"mt-4"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Aponte a c\xe2mera para o c\xf3digo QR do material"})]})]}),(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:(0,f.jsxs)(e8,{className:"flex items-center gap-2",children:[f.jsx(sd,{className:"h-5 w-5"}),"Upload de Imagem"]})}),(0,f.jsxs)(e5,{children:[f.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&new sZ("image-scan").scanFile(t,!0).then(e=>{w(e),setTimeout(()=>r(""),500)}).catch(()=>{g({title:"QR Code n\xe3o detectado",description:"N\xe3o foi poss\xedvel ler um c\xf3digo QR da imagem.",variant:"destructive"})})},ref:u,className:"hidden"}),f.jsx(eA,{onClick:()=>u.current?.click(),variant:"outline",className:"w-full",children:"Selecionar Imagem"}),f.jsx("div",{id:"image-scan",className:"hidden"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Fa\xe7a upload de uma imagem contendo o c\xf3digo QR"})]})]})]}),f.jsx(rT,{open:!!o,onOpenChange:e=>{e||(a(null),r(""),l(e=>({...e,quantity:""})))},children:(0,f.jsxs)(r2,{children:[f.jsx(r4,{children:f.jsx(r8,{children:"Atualizar Estoque"})}),o&&f.jsx("div",{className:"space-y-4",children:(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"updateType",children:"Tipo de atualiza\xe7\xe3o"}),(0,f.jsxs)("select",{id:"updateType",value:s.type,onChange:e=>l(t=>({...t,type:e.target.value})),className:"w-full p-2 border rounded-md",children:[f.jsx("option",{value:"adicionar",children:"Adicionar"}),f.jsx("option",{value:"remover",children:"Remover"})]})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"stockQuantity",children:"Quantidade *"}),f.jsx(r5,{id:"stockQuantity",type:"text",value:""===(e=s.quantity)||0===e?"":e.toString(),onChange:e=>y(e.target.value),placeholder:"0",className:"font-mono"}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Digite apenas n\xfameros. Use v\xedrgula ou ponto para decimais"})]})]})}),f.jsx(r3,{children:f.jsx(eA,{onClick:E,className:"w-full",disabled:!s.quantity||0>=parseFloat(s.quantity.toString()),children:"Atualizar Estoque"})})]})})]})}(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(h||(h={})),function(){function e(e,t,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===r,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new s5(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new sm(this.verbose),this.persistedDataManager=new s0,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var r,n,i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(i.lastMatchFound===t)return;i.lastMatchFound=t,i.setHeaderMessage(sE.lastMatch(t),h.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,r){t&&t(e,r)};var o=document.getElementById(this.elementId);if(!o)throw"HTML Element with id=".concat(this.elementId," not found");o.innerHTML="",this.createBasicLayout(o),this.html5Qrcode=new sZ(this.getScanRegionId(),(r=this.config,n=this.verbose,{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:n}))},e.prototype.pause=function(e){(sw(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(r,n){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(n){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),t(),r()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),n(t)}):(e.html5Qrcode.clear(),t(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=sh.SCAN_DEFAULT_FPS),!sh.DEFAULT_REMEMBER_LAST_CAMERA_USED!==e.rememberLastUsedCamera&&(e.rememberLastUsedCamera=sh.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=sh.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:sh.SCAN_DEFAULT_FPS,rememberLastUsedCamera:sh.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:sh.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),r=this.getScanRegionId();t.id=r,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),s5.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var n=document.createElement("div"),i=this.getDashboardId();n.id=i,n.style.width="100%",e.appendChild(n),this.setupInitialDashboard(n)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),new s3().renderInto(t);var r=document.createElement("div");r.id=this.getHeaderMessageContainerId(),r.style.display="none",r.style.textAlign="center",r.style.fontSize="14px",r.style.padding="2px 10px",r.style.margin="4px",r.style.borderTop="1px solid #f6f6f6",t.appendChild(r)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,r){var n=this;n.showHideScanTypeSwapLink(!1),n.setHeaderMessage(sE.cameraPermissionRequesting());var i=function(){r||n.createPermissionButton(e,t)};sZ.getCameras().then(function(r){n.persistedDataManager.setHasPermission(!0),n.showHideScanTypeSwapLink(!0),n.resetHeaderMessage(),r&&r.length>0?(e.removeChild(t),n.renderCameraSelection(r)):(n.setHeaderMessage(sE.noCameraFound(),h.STATUS_WARNING),i())}).catch(function(e){n.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:i(),n.setHeaderMessage(e,h.STATUS_WARNING),n.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var r=this,n=s9.createElement("button",this.getCameraPermissionButtonId());n.innerText=sE.cameraPermissionTitle(),n.addEventListener("click",function(){n.disabled=!0,r.createCameraListUi(e,t,n)}),t.appendChild(n)},e.prototype.createPermissionsUi=function(e,t){var r=this;if(s5.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){s6.hasPermissions().then(function(n){n?r.createCameraListUi(e,t):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,t))}).catch(function(n){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=s5.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(r);var n=document.createElement("div");n.style.textAlign="center",r.appendChild(n),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,n),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=s5.isFileScanType(this.currentScanType),r=this;this.fileSelectionUi=li.create(e,t,function(e){if(!r.html5Qrcode)throw"html5Qrcode not defined";s5.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(sE.loadingImage()),r.html5Qrcode.scanFileV2(e,!0).then(function(e){r.resetHeaderMessage(),r.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){r.setHeaderMessage(e,h.STATUS_WARNING),r.qrCodeErrorCallback(e,sg.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t,r=this,n=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var o=la.create(i,!1),a=function(e){var t,n,i,a=e.zoomFeature();if(a.isSupported()){o.setOnCameraZoomValueChangeCallback(function(e){a.apply(e)});var s=1;r.config.defaultZoomValueIfSupported&&(s=r.config.defaultZoomValueIfSupported),t=s,n=a.min(),s=t>(i=a.max())?i:t<n?n:t,o.setValues(a.min(),a.max(),s,a.step()),o.show()}},s=lo.create(i,e),l=document.createElement("span"),c=s9.createElement("button",s7.CAMERA_START_BUTTON_ID);c.innerText=sE.scanButtonStartScanningText(),l.appendChild(c);var d=s9.createElement("button",s7.CAMERA_STOP_BUTTON_ID);d.innerText=sE.scanButtonStopScanningText(),d.style.display="none",d.disabled=!0,l.appendChild(d);var u=function(e){if(!e.torchFeature().isSupported()){t&&t.hide();return}t?t.updateTorchCapability(e.torchFeature()):t=ln.create(l,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,h.STATUS_WARNING)}),t.show()};i.appendChild(l);var f=function(e){e||(c.style.display="none"),c.innerText=sE.scanButtonStartScanningText(),c.style.opacity="1",c.disabled=!1,e&&(c.style.display="inline-block")};if(c.addEventListener("click",function(e){c.innerText=sE.scanButtonScanningStarting(),s.disable(),c.disabled=!0,c.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var t,i=s.getValue();n.persistedDataManager.setLastUsedCameraId(i),n.html5Qrcode.start(i,{fps:(t=n.config).fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints},n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){d.disabled=!1,d.style.display="inline-block",f(!1);var t=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===r.config.showTorchButtonIfSupported&&u(t),!0===r.config.showZoomSliderIfSupported&&a(t)}).catch(function(e){n.showHideScanTypeSwapLink(!0),s.enable(),f(!0),n.setHeaderMessage(e,h.STATUS_WARNING)})}),s.hasSingleItem()&&c.click(),d.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";d.disabled=!0,n.html5Qrcode.stop().then(function(e){r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),s.enable(),c.disabled=!1,d.style.display="none",c.style.display="inline-block",t&&(t.reset(),t.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){d.disabled=!1,n.setHeaderMessage(e,h.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var p=n.persistedDataManager.getLastUsedCameraId();s.hasValue(p)?(s.setValue(p),c.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=sE.textIfCameraScanSelected(),r=sE.textIfFileScanSelected(),n=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var o=s9.createElement("span",this.getDashboardSectionSwapLinkId());o.style.textDecoration="underline",o.style.cursor="pointer",o.innerText=s5.isCameraScanType(this.currentScanType)?t:r,o.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,s5.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),o.innerText=r,e.currentScanType=c.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),o.innerText=t,e.currentScanType=c.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),i.appendChild(o),n.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){s6.hasPermissions().then(function(r){if(r){var n=document.getElementById(t.getCameraPermissionButtonId());if(!n)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";n.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=h.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",t){case h.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case h.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case h.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=sK,this.cameraScanImage.alt=sE.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=s$,this.fileScanImage.alt=sE.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return s7.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return s7.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();var ll="Tabs",[lc,ld]=tc(ll,[oP]),lu=oP(),[lh,lf]=lc(ll),lp=p.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:i,defaultValue:o,orientation:a="horizontal",dir:s,activationMode:l="automatic",...c}=e,d=oI(s),[u,h]=tg({prop:n,onChange:i,defaultProp:o});return(0,f.jsx)(lh,{scope:r,baseId:tf(),value:u,onValueChange:h,orientation:a,dir:d,activationMode:l,children:(0,f.jsx)(tw.div,{dir:d,"data-orientation":a,...c,ref:t})})});lp.displayName=ll;var lg="TabsList",lm=p.forwardRef((e,t)=>{let{__scopeTabs:r,loop:n=!0,...i}=e,o=lf(lg,r),a=lu(r);return(0,f.jsx)(oB,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:n,children:(0,f.jsx)(tw.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});lm.displayName=lg;var lw="TabsTrigger",ly=p.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,disabled:i=!1,...o}=e,a=lf(lw,r),s=lu(r),l=lA(a.baseId,n),c=lx(a.baseId,n),d=n===a.value;return(0,f.jsx)(oU,{asChild:!0,...s,focusable:!i,active:d,children:(0,f.jsx)(tw.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...o,ref:t,onMouseDown:tl(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():a.onValueChange(n)}),onKeyDown:tl(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&a.onValueChange(n)}),onFocus:tl(e.onFocus,()=>{let e="manual"!==a.activationMode;d||i||!e||a.onValueChange(n)})})})});ly.displayName=lw;var lE="TabsContent",lC=p.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,forceMount:i,children:o,...a}=e,s=lf(lE,r),l=lA(s.baseId,n),c=lx(s.baseId,n),d=n===s.value,u=p.useRef(d);return p.useEffect(()=>{let e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,f.jsx)(tL,{present:i||d,children:({present:r})=>(0,f.jsx)(tw.div,{"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!r,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:r&&o})})});function lA(e,t){return`${e}-trigger-${t}`}function lx(e,t){return`${e}-content-${t}`}lC.displayName=lE;let lb=p.forwardRef(({className:e,...t},r)=>f.jsx(lm,{ref:r,className:ed("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));lb.displayName=lm.displayName;let lv=p.forwardRef(({className:e,...t},r)=>f.jsx(ly,{ref:r,className:ed("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));lv.displayName=ly.displayName;let lS=p.forwardRef(({className:e,...t},r)=>f.jsx(lC,{ref:r,className:ed("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));lS.displayName=lC.displayName;let lI=eI("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);function l_(){let{movements:e}=ts(),{toast:t}=nd(),[r,n]=(0,p.useState)(""),[i,o]=(0,p.useState)(""),a=e.filter(e=>{let t=e.materialName.toLowerCase().includes(r.toLowerCase())||e.location.toLowerCase().includes(r.toLowerCase())||e.justification.toLowerCase().includes(r.toLowerCase()),n=!i||new Date(e.date).toISOString().split("T")[0]===i;return t&&n}),s=e.reduce((e,t)=>{let r=t.materialName;return e[r]||(e[r]={entrada:0,saida:0,total:0}),"entrada"===t.actionType?e[r].entrada+=t.quantity:e[r].saida+=t.quantity,e[r].total=e[r].entrada-e[r].saida,e},{});return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Movimenta\xe7\xf5es"}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsxs)(eA,{onClick:()=>{let e=new Blob([["Data,Material,Categoria,Tipo,Quantidade,Local,Justificativa",...a.map(e=>[new Date(e.date).toLocaleDateString("pt-BR"),e.materialName,e.materialCategory,"entrada"===e.actionType?"Entrada":"Sa\xedda",e.quantity,e.location,`"${e.justification}"`].join(","))].join("\n")],{type:"text/csv"}),r=window.URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`movimentacoes_${new Date().toISOString().split("T")[0]}.csv`,n.click(),window.URL.revokeObjectURL(r),t({title:"Exporta\xe7\xe3o conclu\xedda",description:"Arquivo CSV baixado com sucesso!"})},variant:"outline",size:"sm",children:[f.jsx(sr,{className:"mr-2 h-4 w-4"}),"CSV"]}),(0,f.jsxs)(eA,{onClick:()=>{let e=new Blob([a.map(e=>`Data: ${new Date(e.date).toLocaleDateString("pt-BR")}
Material: ${e.materialName}
Categoria: ${e.materialCategory}
Tipo: ${"entrada"===e.actionType?"Entrada":"Sa\xedda"}
Quantidade: ${e.quantity}
Local: ${e.location}
Justificativa: ${e.justification}
${"=".repeat(50)}
`).join("\n")],{type:"text/plain"}),r=window.URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`relatorio_movimentacoes_${new Date().toISOString().split("T")[0]}.txt`,n.click(),window.URL.revokeObjectURL(r),t({title:"Relat\xf3rio exportado",description:"Arquivo TXT baixado com sucesso!"})},variant:"outline",size:"sm",children:[f.jsx(tt,{className:"mr-2 h-4 w-4"}),"TXT"]}),(0,f.jsxs)(eA,{onClick:()=>{t({title:"Email enviado",description:"Relat\xf3rio enviado para seu email com sucesso! (simulado)"})},variant:"outline",size:"sm",children:[f.jsx(lI,{className:"mr-2 h-4 w-4"}),"Email"]})]})]}),(0,f.jsxs)(lp,{defaultValue:"history",className:"space-y-4",children:[(0,f.jsxs)(lb,{children:[f.jsx(lv,{value:"history",children:"Hist\xf3rico"}),f.jsx(lv,{value:"reports",children:"Relat\xf3rios"})]}),(0,f.jsxs)(lS,{value:"history",className:"space-y-4",children:[(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:f.jsx(e8,{children:"Filtros"})}),f.jsx(e5,{children:(0,f.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[f.jsx(r5,{placeholder:"Buscar por material, local ou justificativa...",value:r,onChange:e=>n(e.target.value),className:"flex-1"}),f.jsx(r5,{type:"date",value:i,onChange:e=>o(e.target.value),className:"w-full md:w-auto"})]})})]}),f.jsx(e4,{children:(0,f.jsxs)(e5,{className:"p-0",children:[f.jsx("div",{className:"overflow-x-auto",children:(0,f.jsxs)(oy,{children:[f.jsx(oE,{children:(0,f.jsxs)(oA,{children:[f.jsx(ox,{children:"Data"}),f.jsx(ox,{children:"Material"}),f.jsx(ox,{children:"Categoria"}),f.jsx(ox,{children:"Tipo"}),f.jsx(ox,{children:"Quantidade"}),f.jsx(ox,{children:"Local"}),f.jsx(ox,{children:"Justificativa"})]})}),f.jsx(oC,{children:a.map(e=>(0,f.jsxs)(oA,{children:[f.jsx(ob,{children:new Date(e.date).toLocaleDateString("pt-BR")}),f.jsx(ob,{className:"font-medium",children:e.materialName}),f.jsx(ob,{children:e.materialCategory}),f.jsx(ob,{children:f.jsx(e9,{variant:"entrada"===e.actionType?"default":"secondary",children:"entrada"===e.actionType?"Entrada":"Sa\xedda"})}),f.jsx(ob,{children:e.quantity}),f.jsx(ob,{children:e.location}),f.jsx(ob,{className:"max-w-xs truncate",children:e.justification})]},e.id))})]})}),0===a.length&&f.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma movimenta\xe7\xe3o encontrada"})]})})]}),f.jsx(lS,{value:"reports",className:"space-y-4",children:(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:f.jsx(e8,{children:"Resumo por Material"})}),f.jsx(e5,{children:(0,f.jsxs)("div",{className:"space-y-3",children:[Object.entries(s).map(([e,t])=>(0,f.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"font-medium",children:e}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Entrada: ",t.entrada," | Sa\xedda: ",t.saida]})]}),(0,f.jsxs)(e9,{variant:t.total>=0?"default":"destructive",children:[t.total>=0?"+":"",t.total]})]},e)),0===Object.keys(s).length&&f.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhuma movimenta\xe7\xe3o registrada"})]})})]}),(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:f.jsx(e8,{children:"Estat\xedsticas"})}),f.jsx(e5,{children:(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Total de Movimenta\xe7\xf5es:"}),f.jsx("span",{className:"font-bold",children:e.length})]}),(0,f.jsxs)("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Entradas:"}),f.jsx("span",{className:"font-bold text-green-600",children:e.filter(e=>"entrada"===e.actionType).length})]}),(0,f.jsxs)("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Sa\xeddas:"}),f.jsx("span",{className:"font-bold text-red-600",children:e.filter(e=>"sa\xedda"===e.actionType).length})]}),(0,f.jsxs)("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Materiais \xdanicos:"}),f.jsx("span",{className:"font-bold",children:new Set(e.map(e=>e.materialId)).size})]})]})})]})]})})]})]})}let lT=eI("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),lN=eI("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),lR=eI("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),lM=eI("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),lD=eI("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function lO({user:e,onUpdateProfile:t}){let{toast:r}=nd(),[n,i]=(0,p.useState)(!1),[o,a]=(0,p.useState)(!1),[s,l]=(0,p.useState)(!1),[c,d]=(0,p.useState)({name:"",email:""}),[u,h]=(0,p.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[g,m]=(0,p.useState)({current:!1,new:!1,confirm:!1}),w=(e,t)=>{d(r=>({...r,[e]:t}))},y=(e,t)=>{h(r=>({...r,[e]:t}))},E=e=>{m(t=>({...t,[e]:!t[e]}))},C=async()=>{if(e){a(!0);try{if(!c.name.trim()||!c.email.trim()){r({title:"Erro de valida\xe7\xe3o",description:"Nome e email s\xe3o obrigat\xf3rios.",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)){r({title:"Email inv\xe1lido",description:"Digite um email v\xe1lido.",variant:"destructive"});return}let n=await fetch("/api/auth/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,name:c.name.trim(),email:c.email.trim()})});if(n.ok){let e=await n.json();t(e),i(!1),r({title:"Perfil atualizado",description:"Suas informa\xe7\xf5es foram salvas com sucesso!"})}else{let e=await n.json();throw Error(e.message||"Erro ao atualizar perfil")}}catch(e){r({title:"Erro ao atualizar",description:e instanceof Error?e.message:"N\xe3o foi poss\xedvel atualizar o perfil.",variant:"destructive"})}finally{a(!1)}}},A=async()=>{if(e){if(!u.currentPassword||!u.newPassword||!u.confirmPassword){r({title:"Erro de valida\xe7\xe3o",description:"Todos os campos s\xe3o obrigat\xf3rios.",variant:"destructive"});return}if(u.newPassword!==u.confirmPassword){r({title:"Senhas n\xe3o coincidem",description:"A nova senha e confirma\xe7\xe3o devem ser iguais.",variant:"destructive"});return}if(u.newPassword.length<6){r({title:"Senha muito curta",description:"A nova senha deve ter pelo menos 6 caracteres.",variant:"destructive"});return}a(!0);try{let t=await fetch("/api/auth/change-password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,currentPassword:u.currentPassword,newPassword:u.newPassword})});if(t.ok)r({title:"Senha alterada",description:"Sua senha foi alterada com sucesso!"}),h({currentPassword:"",newPassword:"",confirmPassword:""}),l(!1);else{let e=await t.json();throw Error(e.message||"Erro ao alterar senha")}}catch(e){r({title:"Erro ao alterar senha",description:e instanceof Error?e.message:"N\xe3o foi poss\xedvel alterar a senha.",variant:"destructive"})}finally{a(!1)}}};return e?(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Perfil do Usu\xe1rio"}),f.jsx("p",{className:"text-muted-foreground",children:"Gerencie suas informa\xe7\xf5es pessoais e configura\xe7\xf5es da conta"})]}),!n&&(0,f.jsxs)(eA,{onClick:()=>i(!0),children:[f.jsx(lT,{className:"mr-2 h-4 w-4"}),"Editar Perfil"]})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:(0,f.jsxs)(e8,{className:"flex items-center gap-2",children:[f.jsx(eO,{className:"h-5 w-5"}),"Informa\xe7\xf5es Gerais"]})}),f.jsx(e5,{className:"space-y-4",children:n?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"name",children:"Nome Completo *"}),f.jsx(r5,{id:"name",value:c.name,onChange:e=>w("name",e.target.value),placeholder:"Seu nome completo",disabled:o})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"email",children:"E-mail *"}),f.jsx(r5,{id:"email",type:"email",value:c.email,onChange:e=>w("email",e.target.value),placeholder:"seu@email.com",disabled:o})]}),(0,f.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,f.jsxs)(eA,{onClick:C,disabled:o,children:[f.jsx(lN,{className:"mr-2 h-4 w-4"}),o?"Salvando...":"Salvar"]}),f.jsx(eA,{variant:"outline",onClick:()=>{e&&d({name:e.name||"",email:e.email||""}),i(!1)},disabled:o,children:"Cancelar"})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Nome"}),f.jsx("p",{className:"text-lg font-medium",children:e.name||"N\xe3o informado"})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"E-mail"}),f.jsx("p",{className:"text-lg font-medium",children:e.email})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Fun\xe7\xe3o"}),f.jsx("p",{className:"text-lg font-medium",children:e.role||"N\xe3o informado"})]})]})})]}),(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:(0,f.jsxs)(e8,{className:"flex items-center gap-2",children:[f.jsx(lR,{className:"h-5 w-5"}),"Detalhes da Conta"]})}),(0,f.jsxs)(e5,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"ID do Usu\xe1rio"}),f.jsx("p",{className:"text-sm font-mono bg-muted p-2 rounded",children:e.id})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Status da Conta"}),f.jsx(e9,{variant:"default",className:"w-fit",children:"Ativo"})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Data de Cria\xe7\xe3o"}),f.jsx("p",{className:"text-sm",children:new Date(e.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.lastLogin&&(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"\xdaltimo Login"}),f.jsx("p",{className:"text-sm",children:new Date(e.lastLogin).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]}),(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:(0,f.jsxs)(e8,{className:"flex items-center gap-2",children:[f.jsx(lM,{className:"h-5 w-5"}),"Seguran\xe7a da Conta"]})}),f.jsx(e5,{children:(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,f.jsxs)("div",{className:"space-y-1",children:[f.jsx("p",{className:"font-medium",children:"Alterar Senha"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Atualize sua senha para manter a conta segura"})]}),f.jsx(eA,{variant:"outline",onClick:()=>l(!s),children:s?"Cancelar":"Alterar Senha"})]}),s&&(0,f.jsxs)("div",{className:"p-4 border rounded-lg space-y-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"currentPassword",children:"Senha Atual *"}),(0,f.jsxs)("div",{className:"relative",children:[f.jsx(r5,{id:"currentPassword",type:g.current?"text":"password",value:u.currentPassword,onChange:e=>y("currentPassword",e.target.value),placeholder:"Digite sua senha atual",disabled:o}),f.jsx(eA,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>E("current"),children:g.current?f.jsx(lD,{className:"h-4 w-4"}):f.jsx(se,{className:"h-4 w-4"})})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"newPassword",children:"Nova Senha *"}),(0,f.jsxs)("div",{className:"relative",children:[f.jsx(r5,{id:"newPassword",type:g.new?"text":"password",value:u.newPassword,onChange:e=>y("newPassword",e.target.value),placeholder:"Digite a nova senha",disabled:o}),f.jsx(eA,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>E("new"),children:g.new?f.jsx(lD,{className:"h-4 w-4"}):f.jsx(se,{className:"h-4 w-4"})})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"confirmPassword",children:"Confirmar Nova Senha *"}),(0,f.jsxs)("div",{className:"relative",children:[f.jsx(r5,{id:"confirmPassword",type:g.confirm?"text":"password",value:u.confirmPassword,onChange:e=>y("confirmPassword",e.target.value),placeholder:"Confirme a nova senha",disabled:o}),f.jsx(eA,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>E("confirm"),children:g.confirm?f.jsx(lD,{className:"h-4 w-4"}):f.jsx(se,{className:"h-4 w-4"})})]})]}),(0,f.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,f.jsxs)(eA,{onClick:A,disabled:o,children:[f.jsx(lM,{className:"mr-2 h-4 w-4"}),o?"Alterando...":"Alterar Senha"]}),f.jsx(eA,{variant:"outline",onClick:()=>{h({currentPassword:"",newPassword:"",confirmPassword:""}),l(!1)},disabled:o,children:"Cancelar"})]})]})]})})]})]}):f.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,f.jsxs)("div",{className:"text-center",children:[f.jsx(eO,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Usu\xe1rio n\xe3o encontrado"}),f.jsx("p",{className:"text-muted-foreground",children:"Fa\xe7a login para acessar seu perfil."})]})})}function lP({children:e,...t}){return f.jsx(eq,{...t,attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:e})}var lL="ToastProvider",[lj,lB,lk]=ov("Toast"),[lF,lU]=tc("Toast",[lk]),[lH,lz]=lF(lL),lV=e=>{let{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=e,[s,l]=p.useState(null),[c,d]=p.useState(0),u=p.useRef(!1),h=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${lL}\`. Expected non-empty \`string\`.`),(0,f.jsx)(lj.Provider,{scope:t,children:(0,f.jsx)(lH,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:o,toastCount:c,viewport:s,onViewportChange:l,onToastAdd:p.useCallback(()=>d(e=>e+1),[]),onToastRemove:p.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:a})})};lV.displayName=lL;var lY="ToastViewport",lG=["F8"],lW="toast.viewportPause",lX="toast.viewportResume",lq=p.forwardRef((e,t)=>{let{__scopeToast:r,hotkey:n=lG,label:i="Notifications ({hotkey})",...o}=e,a=lz(lY,r),s=lB(r),l=p.useRef(null),c=p.useRef(null),d=p.useRef(null),u=p.useRef(null),h=ef(t,u,a.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=a.toastCount>0;p.useEffect(()=>{let e=e=>{0!==n.length&&n.every(t=>e[t]||e.code===t)&&u.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),p.useEffect(()=>{let e=l.current,t=u.current;if(m&&e&&t){let r=()=>{if(!a.isClosePausedRef.current){let e=new CustomEvent(lW);t.dispatchEvent(e),a.isClosePausedRef.current=!0}},n=()=>{if(a.isClosePausedRef.current){let e=new CustomEvent(lX);t.dispatchEvent(e),a.isClosePausedRef.current=!1}},i=t=>{e.contains(t.relatedTarget)||n()},o=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",i),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",o),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",o),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[m,a.isClosePausedRef]);let w=p.useCallback(({tabbingDirection:e})=>{let t=s().map(t=>{let r=t.ref.current,n=[r,...function(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}(r)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[s]);return p.useEffect(()=>{let e=u.current;if(e){let t=t=>{let r=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!r){let r=document.activeElement,n=t.shiftKey;if(t.target===e&&n){c.current?.focus();return}let i=w({tabbingDirection:n?"backwards":"forwards"}),o=i.findIndex(e=>e===r);cr(i.slice(o+1))?t.preventDefault():n?c.current?.focus():d.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[s,w]),(0,f.jsxs)(tx,{ref:l,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&(0,f.jsx)(lQ,{ref:c,onFocusFromOutsideViewport:()=>{cr(w({tabbingDirection:"forwards"}))}}),(0,f.jsx)(lj.Slot,{scope:r,children:(0,f.jsx)(tw.ol,{tabIndex:-1,...o,ref:h})}),m&&(0,f.jsx)(lQ,{ref:d,onFocusFromOutsideViewport:()=>{cr(w({tabbingDirection:"backwards"}))}})]})});lq.displayName=lY;var lZ="ToastFocusProxy",lQ=p.forwardRef((e,t)=>{let{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,o=lz(lZ,r);return(0,f.jsx)(i2,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:e=>{let t=e.relatedTarget;o.viewport?.contains(t)||n()}})});lQ.displayName=lZ;var lK="Toast",l$=p.forwardRef((e,t)=>{let{forceMount:r,open:n,defaultOpen:i,onOpenChange:o,...a}=e,[s=!0,l]=tg({prop:n,defaultProp:i,onChange:o});return(0,f.jsx)(tL,{present:r||s,children:(0,f.jsx)(l0,{open:s,...a,ref:t,onClose:()=>l(!1),onPause:tp(e.onPause),onResume:tp(e.onResume),onSwipeStart:tl(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:tl(e.onSwipeMove,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:tl(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:tl(e.onSwipeEnd,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),l(!1)})})})});l$.displayName=lK;var[lJ,l1]=lF(lK,{onClose(){}}),l0=p.forwardRef((e,t)=>{let{__scopeToast:r,type:n="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:g,...m}=e,w=lz(lK,r),[y,E]=p.useState(null),C=ef(t,e=>E(e)),A=p.useRef(null),x=p.useRef(null),b=i||w.duration,v=p.useRef(0),S=p.useRef(b),I=p.useRef(0),{onToastAdd:_,onToastRemove:T}=w,N=tp(()=>{y?.contains(document.activeElement)&&w.viewport?.focus(),a()}),R=p.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(I.current),v.current=new Date().getTime(),I.current=window.setTimeout(N,e))},[N]);p.useEffect(()=>{let e=w.viewport;if(e){let t=()=>{R(S.current),c?.()},r=()=>{let e=new Date().getTime()-v.current;S.current=S.current-e,window.clearTimeout(I.current),l?.()};return e.addEventListener(lW,r),e.addEventListener(lX,t),()=>{e.removeEventListener(lW,r),e.removeEventListener(lX,t)}}},[w.viewport,b,l,c,R]),p.useEffect(()=>{o&&!w.isClosePausedRef.current&&R(b)},[o,b,w.isClosePausedRef,R]),p.useEffect(()=>(_(),()=>T()),[_,T]);let M=p.useMemo(()=>y?function e(t){let r=[];return Array.from(t.childNodes).forEach(t=>{if(t.nodeType===t.TEXT_NODE&&t.textContent&&r.push(t.textContent),t.nodeType===t.ELEMENT_NODE){let n=t.ariaHidden||t.hidden||"none"===t.style.display,i=""===t.dataset.radixToastAnnounceExclude;if(!n){if(i){let e=t.dataset.radixToastAnnounceAlt;e&&r.push(e)}else r.push(...e(t))}}}),r}(y):null,[y]);return w.viewport?(0,f.jsxs)(f.Fragment,{children:[M&&(0,f.jsx)(l2,{__scopeToast:r,role:"status","aria-live":"foreground"===n?"assertive":"polite","aria-atomic":!0,children:M}),(0,f.jsx)(lJ,{scope:r,onClose:N,children:tm.createPortal((0,f.jsx)(lj.ItemSlot,{scope:r,children:(0,f.jsx)(tA,{asChild:!0,onEscapeKeyDown:tl(s,()=>{w.isFocusedToastEscapeKeyDownRef.current||N(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,f.jsx)(tw.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":w.swipeDirection,...m,ref:C,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:tl(e.onKeyDown,e=>{"Escape"!==e.key||(s?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:tl(e.onPointerDown,e=>{0===e.button&&(A.current={x:e.clientX,y:e.clientY})}),onPointerMove:tl(e.onPointerMove,e=>{if(!A.current)return;let t=e.clientX-A.current.x,r=e.clientY-A.current.y,n=!!x.current,i=["left","right"].includes(w.swipeDirection),o=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,a=i?o(0,t):0,s=i?0:o(0,r),l="touch"===e.pointerType?10:2,c={x:a,y:s},h={originalEvent:e,delta:c};n?(x.current=c,ce("toast.swipeMove",u,h,{discrete:!1})):ct(c,w.swipeDirection,l)?(x.current=c,ce("toast.swipeStart",d,h,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(A.current=null)}),onPointerUp:tl(e.onPointerUp,e=>{let t=x.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),x.current=null,A.current=null,t){let r=e.currentTarget,n={originalEvent:e,delta:t};ct(t,w.swipeDirection,w.swipeThreshold)?ce("toast.swipeEnd",g,n,{discrete:!0}):ce("toast.swipeCancel",h,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),l2=e=>{let{__scopeToast:t,children:r,...n}=e,i=lz(lK,t),[o,a]=p.useState(!1),[s,l]=p.useState(!1);return function(e=()=>{}){let t=tp(e);td(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>a(!0)),p.useEffect(()=>{let e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),s?null:(0,f.jsx)(tP,{asChild:!0,children:(0,f.jsx)(i2,{...n,children:o&&(0,f.jsxs)(f.Fragment,{children:[i.label," ",r]})})})},l4=p.forwardRef((e,t)=>{let{__scopeToast:r,...n}=e;return(0,f.jsx)(tw.div,{...n,ref:t})});l4.displayName="ToastTitle";var l3=p.forwardRef((e,t)=>{let{__scopeToast:r,...n}=e;return(0,f.jsx)(tw.div,{...n,ref:t})});l3.displayName="ToastDescription";var l8="ToastAction",l6=p.forwardRef((e,t)=>{let{altText:r,...n}=e;return r.trim()?(0,f.jsx)(l9,{altText:r,asChild:!0,children:(0,f.jsx)(l7,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${l8}\`. Expected non-empty \`string\`.`),null)});l6.displayName=l8;var l5="ToastClose",l7=p.forwardRef((e,t)=>{let{__scopeToast:r,...n}=e,i=l1(l5,r);return(0,f.jsx)(l9,{asChild:!0,children:(0,f.jsx)(tw.button,{type:"button",...n,ref:t,onClick:tl(e.onClick,i.onClose)})})});l7.displayName=l5;var l9=p.forwardRef((e,t)=>{let{__scopeToast:r,altText:n,...i}=e;return(0,f.jsx)(tw.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function ce(e,t,r,{discrete:n}){let i=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?ty(i,o):i.dispatchEvent(o)}var ct=(e,t,r=0)=>{let n=Math.abs(e.x),i=Math.abs(e.y),o=n>i;return"left"===t||"right"===t?o&&n>r:!o&&i>r};function cr(e){let t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}let cn=p.forwardRef(({className:e,...t},r)=>f.jsx(lq,{ref:r,className:ed("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));cn.displayName=lq.displayName;let ci=eE("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),co=p.forwardRef(({className:e,variant:t,...r},n)=>f.jsx(l$,{ref:n,className:ed(ci({variant:t}),e),...r}));co.displayName=l$.displayName,p.forwardRef(({className:e,...t},r)=>f.jsx(l6,{ref:r,className:ed("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=l6.displayName;let ca=p.forwardRef(({className:e,...t},r)=>f.jsx(l7,{ref:r,className:ed("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:f.jsx(eD,{className:"h-4 w-4"})}));ca.displayName=l7.displayName;let cs=p.forwardRef(({className:e,...t},r)=>f.jsx(l4,{ref:r,className:ed("text-sm font-semibold",e),...t}));cs.displayName=l4.displayName;let cl=p.forwardRef(({className:e,...t},r)=>f.jsx(l3,{ref:r,className:ed("text-sm opacity-90",e),...t}));function cc(){let{toasts:e}=nd();return(0,f.jsxs)(lV,{children:[e.map(function({id:e,title:t,description:r,action:n,...i}){return(0,f.jsxs)(co,{...i,children:[(0,f.jsxs)("div",{className:"grid gap-1",children:[t&&f.jsx(cs,{children:t}),r&&f.jsx(cl,{children:r})]}),n,f.jsx(ca,{})]},e)}),f.jsx(cn,{})]})}cl.displayName=l3.displayName;let cd=eI("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function cu({onSignup:e,goToLogin:t}){let[r,n]=(0,p.useState)(""),[i,o]=(0,p.useState)(""),[a,s]=(0,p.useState)(""),[l,c]=(0,p.useState)(""),[d,u]=(0,p.useState)(null),[h,g]=(0,p.useState)(!1),m=async t=>{t.preventDefault(),u(null),g(!0);try{if(!r.trim()||!i.trim()||!a.trim()){u("Por favor, preencha todos os campos obrigat\xf3rios."),g(!1);return}if(a!==l){u("As senhas n\xe3o coincidem."),g(!1);return}if(a.length<6){u("A senha deve ter pelo menos 6 caracteres."),g(!1);return}let t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.trim(),email:i.trim(),password:a})});if(t.ok){let r=await t.json();r&&r.id&&r.email?e(r):u("Resposta inv\xe1lida do servidor.")}else{let e=await t.json();u(e.message||"Erro ao criar conta.")}}catch(e){u("N\xe3o foi poss\xedvel conectar ao servidor. Tente novamente.")}finally{g(!1)}};return f.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,f.jsxs)(e4,{className:"w-full max-w-md",children:[(0,f.jsxs)(e3,{className:"space-y-1",children:[f.jsx(e8,{className:"text-2xl text-center",children:"Criar Conta"}),f.jsx(e6,{className:"text-center",children:"Preencha os dados para criar sua conta"})]}),f.jsx(e5,{children:(0,f.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"name",children:"Nome *"}),f.jsx(r5,{id:"name",type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"Seu nome completo",required:!0,disabled:h})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"email",children:"Email *"}),f.jsx(r5,{id:"email",type:"email",value:i,onChange:e=>o(e.target.value),placeholder:"seu@email.com",required:!0,disabled:h})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"password",children:"Senha *"}),f.jsx(r5,{id:"password",type:"password",value:a,onChange:e=>s(e.target.value),placeholder:"M\xednimo 6 caracteres",required:!0,disabled:h,minLength:6})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"confirm-password",children:"Confirmar Senha *"}),f.jsx(r5,{id:"confirm-password",type:"password",value:l,onChange:e=>c(e.target.value),placeholder:"Confirme sua senha",required:!0,disabled:h,minLength:6})]}),d&&f.jsx("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:d}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(eA,{type:"submit",className:"w-full",disabled:h,children:h?(0,f.jsxs)(f.Fragment,{children:[f.jsx(cd,{className:"h-4 w-4 mr-2 animate-spin"}),"Criando conta..."]}):"Criar Conta"}),f.jsx("div",{className:"text-center",children:f.jsx(eA,{type:"button",variant:"link",onClick:t,disabled:h,className:"text-sm",children:"J\xe1 tem uma conta? Fa\xe7a login"})})]})]})})]})})}function ch({user:e,onSelectProject:t}){let[r,n]=(0,p.useState)([]),[i,o]=(0,p.useState)(null),[a,s]=(0,p.useState)(!0),[l,c]=(0,p.useState)(null),[d,u]=(0,p.useState)(!1),[h,g]=(0,p.useState)(!1),[m,w]=(0,p.useState)(""),[y,E]=(0,p.useState)(""),C=async()=>{if(e?.id&&m.trim())try{u(!0),c(null);let t=await fetch("/api/auth/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.trim(),description:y.trim()||null,userId:e.id})});if(t.ok){let e=await t.json();n(t=>[...t,e]),o(e.id),w(""),E(""),g(!1),setTimeout(()=>{e.id&&console.log("Projeto criado e selecionado:",e.id)},0)}else{let e=await t.json();c(e.message||"Erro ao criar projeto.")}}catch(e){c("Erro ao conectar com o servidor.")}finally{u(!1)}};return a?f.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(cd,{className:"h-6 w-6 animate-spin"}),f.jsx("span",{children:"Carregando projetos..."})]})}):l?(0,f.jsxs)(e4,{className:"max-w-lg mx-auto",children:[f.jsx(e3,{children:f.jsx(e8,{className:"text-destructive",children:"Erro"})}),(0,f.jsxs)(e5,{children:[f.jsx("p",{className:"text-destructive mb-4",children:l}),f.jsx(eA,{onClick:()=>window.location.reload(),children:"Tentar Novamente"})]})]}):f.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:(0,f.jsxs)(e4,{children:[(0,f.jsxs)(e3,{children:[(0,f.jsxs)(e8,{children:["Bem-vindo",e?.name?`, ${e.name}`:""]}),f.jsx(e6,{children:"Selecione um projeto para continuar ou crie um novo"})]}),(0,f.jsxs)(e5,{className:"space-y-4",children:[r.length>0?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(ne,{className:"text-sm font-medium",children:"Selecione um projeto:"}),f.jsx("div",{className:"grid gap-3",children:r.map(e=>(0,f.jsxs)("div",{className:`flex items-center space-x-3 p-3 rounded-lg border cursor-pointer transition-colors ${i===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>o(e.id),children:[f.jsx("input",{type:"radio",name:"project",checked:i===e.id,onChange:()=>o(e.id),className:"text-primary"}),(0,f.jsxs)("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium",children:e.name}),e.description&&f.jsx("div",{className:"text-sm text-muted-foreground",children:e.description})]})]},e.id))})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(eA,{onClick:()=>{i?(console.log("Continuando com projeto selecionado:",i),t(i)):console.log("Nenhum projeto selecionado")},disabled:!i,className:"min-w-[100px]",children:i?"Continuar":"Selecione um projeto"})})]}):(0,f.jsxs)("div",{className:"text-center py-8",children:[f.jsx("div",{className:"text-muted-foreground mb-4",children:"Voc\xea ainda n\xe3o tem projetos cadastrados."}),f.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Crie seu primeiro projeto para come\xe7ar a usar o sistema."})]}),f.jsx("div",{className:"border-t pt-4",children:(0,f.jsxs)(rT,{open:h,onOpenChange:g,children:[f.jsx(rR,{asChild:!0,children:(0,f.jsxs)(eA,{variant:"outline",className:"w-full",children:[f.jsx(tr,{className:"h-4 w-4 mr-2"}),"Novo Projeto"]})}),(0,f.jsxs)(r2,{children:[(0,f.jsxs)(r4,{children:[f.jsx(r8,{children:"Criar Novo Projeto"}),f.jsx(r6,{children:"Preencha as informa\xe7\xf5es do novo projeto"})]}),(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"project-name",children:"Nome do Projeto *"}),f.jsx(r5,{id:"project-name",value:m,onChange:e=>w(e.target.value),placeholder:"Digite o nome do projeto",disabled:d})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"project-description",children:"Descri\xe7\xe3o (opcional)"}),f.jsx(nt,{id:"project-description",value:y,onChange:e=>E(e.target.value),placeholder:"Descreva o projeto",disabled:d,rows:3})]})]}),(0,f.jsxs)(r3,{children:[f.jsx(eA,{variant:"outline",onClick:()=>g(!1),disabled:d,children:"Cancelar"}),f.jsx(eA,{onClick:C,disabled:!m.trim()||d,children:d?(0,f.jsxs)(f.Fragment,{children:[f.jsx(cd,{className:"h-4 w-4 mr-2 animate-spin"}),"Criando..."]}):"Criar Projeto"})]})]})]})})]})]})})}function cf({onLogin:e,goToSignup:t}){let[r,n]=(0,p.useState)(""),[i,o]=(0,p.useState)(""),[a,s]=(0,p.useState)(null),[l,c]=(0,p.useState)(!1),d=async t=>{t.preventDefault(),s(null),c(!0);try{if(!r.trim()||!i.trim()){s("Por favor, preencha todos os campos."),c(!1);return}let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.trim(),password:i})});if(t.ok){let r=await t.json();r&&r.id&&r.email?e(r):s("Resposta inv\xe1lida do servidor.")}else{let e=await t.json();s(e.message||"Email ou senha incorretos.")}}catch(e){s("N\xe3o foi poss\xedvel conectar ao servidor. Tente novamente.")}finally{c(!1)}};return f.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,f.jsxs)(e4,{className:"w-full max-w-md",children:[(0,f.jsxs)(e3,{className:"space-y-1",children:[f.jsx(e8,{className:"text-2xl text-center",children:"Entrar"}),f.jsx(e6,{className:"text-center",children:"Digite suas credenciais para acessar sua conta"})]}),f.jsx(e5,{children:(0,f.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"email",children:"Email"}),f.jsx(r5,{id:"email",type:"email",value:r,onChange:e=>n(e.target.value),placeholder:"seu@email.com",required:!0,disabled:l})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ne,{htmlFor:"password",children:"Senha"}),f.jsx(r5,{id:"password",type:"password",value:i,onChange:e=>o(e.target.value),placeholder:"Digite sua senha",required:!0,disabled:l})]}),a&&f.jsx("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:a}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(eA,{type:"submit",className:"w-full",disabled:l,children:l?(0,f.jsxs)(f.Fragment,{children:[f.jsx(cd,{className:"h-4 w-4 mr-2 animate-spin"}),"Entrando..."]}):"Entrar"}),f.jsx("div",{className:"text-center",children:f.jsx(eA,{type:"button",variant:"link",onClick:t,disabled:l,className:"text-sm",children:"N\xe3o tem uma conta? Cadastre-se"})})]})]})})]})})}function cp(e,[t,r]){return Math.min(r,Math.max(t,e))}function cg(e){let t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var cm=[" ","Enter","ArrowUp","ArrowDown"],cw=[" ","Enter"],cy="Select",[cE,cC,cA]=ov(cy),[cx,cb]=tc(cy,[cA,iU]),cv=iU(),[cS,cI]=cx(cy),[c_,cT]=cx(cy),cN=e=>{let{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:o,value:a,defaultValue:s,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:h,required:g,form:m}=e,w=cv(t),[y,E]=p.useState(null),[C,A]=p.useState(null),[x,b]=p.useState(!1),v=oI(c),[S=!1,I]=tg({prop:n,defaultProp:i,onChange:o}),[_,T]=tg({prop:a,defaultProp:s,onChange:l}),N=p.useRef(null),R=!y||m||!!y.closest("form"),[M,D]=p.useState(new Set),O=Array.from(M).map(e=>e.props.value).join(";");return(0,f.jsx)(iV,{...w,children:(0,f.jsxs)(cS,{required:g,scope:t,trigger:y,onTriggerChange:E,valueNode:C,onValueNodeChange:A,valueNodeHasChildren:x,onValueNodeHasChildrenChange:b,contentId:tf(),value:_,onValueChange:T,open:S,onOpenChange:I,dir:v,triggerPointerDownPosRef:N,disabled:h,children:[(0,f.jsx)(cE.Provider,{scope:t,children:(0,f.jsx)(c_,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(e=>{D(t=>new Set(t).add(e))},[]),onNativeOptionRemove:p.useCallback(e=>{D(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:r})}),R?(0,f.jsxs)(di,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:u,value:_,onChange:e=>T(e.target.value),disabled:h,form:m,children:[void 0===_?(0,f.jsx)("option",{value:""}):null,Array.from(M)]},O):null]})})};cN.displayName=cy;var cR="SelectTrigger",cM=p.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...i}=e,o=cv(r),a=cI(cR,r),s=a.disabled||n,l=ef(t,a.onTriggerChange),c=cC(r),d=p.useRef("touch"),[u,h,g]=da(e=>{let t=c().filter(e=>!e.disabled),r=t.find(e=>e.value===a.value),n=ds(t,e,r);void 0!==n&&a.onValueChange(n.value)}),m=e=>{s||(a.onOpenChange(!0),g()),e&&(a.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,f.jsx)(iG,{asChild:!0,...o,children:(0,f.jsx)(tw.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":dn(a.value)?"":void 0,...i,ref:l,onClick:tl(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==d.current&&m(e)}),onPointerDown:tl(i.onPointerDown,e=>{d.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(m(e),e.preventDefault())}),onKeyDown:tl(i.onKeyDown,e=>{let t=""!==u.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),(!t||" "!==e.key)&&cm.includes(e.key)&&(m(),e.preventDefault())})})})});cM.displayName=cR;var cD="SelectValue",cO=p.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:i,children:o,placeholder:a="",...s}=e,l=cI(cD,r),{onValueNodeHasChildrenChange:c}=l,d=void 0!==o,u=ef(t,l.onValueNodeChange);return td(()=>{c(d)},[c,d]),(0,f.jsx)(tw.span,{...s,ref:u,style:{pointerEvents:"none"},children:dn(l.value)?(0,f.jsx)(f.Fragment,{children:a}):o})});cO.displayName=cD;var cP=p.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...i}=e;return(0,f.jsx)(tw.span,{"aria-hidden":!0,...i,ref:t,children:n||"â–¼"})});cP.displayName="SelectIcon";var cL=e=>(0,f.jsx)(tP,{asChild:!0,...e});cL.displayName="SelectPortal";var cj="SelectContent",cB=p.forwardRef((e,t)=>{let r=cI(cj,e.__scopeSelect),[n,i]=p.useState();return(td(()=>{i(new DocumentFragment)},[]),r.open)?(0,f.jsx)(cU,{...e,ref:t}):n?tm.createPortal((0,f.jsx)(ck,{scope:e.__scopeSelect,children:(0,f.jsx)(cE.Slot,{scope:e.__scopeSelect,children:(0,f.jsx)("div",{children:e.children})})}),n):null});cB.displayName=cj;var[ck,cF]=cx(cj),cU=p.forwardRef((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:a,side:s,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:g,sticky:m,hideWhenDetached:w,avoidCollisions:y,...E}=e,C=cI(cj,r),[A,x]=p.useState(null),[b,v]=p.useState(null),S=ef(t,e=>x(e)),[I,_]=p.useState(null),[T,N]=p.useState(null),R=cC(r),[M,D]=p.useState(!1),O=p.useRef(!1);p.useEffect(()=>{if(A)return rx(A)},[A]),tk();let P=p.useCallback(e=>{let[t,...r]=R().map(e=>e.ref.current),[n]=r.slice(-1),i=document.activeElement;for(let r of e)if(r===i||(r?.scrollIntoView({block:"nearest"}),r===t&&b&&(b.scrollTop=0),r===n&&b&&(b.scrollTop=b.scrollHeight),r?.focus(),document.activeElement!==i))return},[R,b]),L=p.useCallback(()=>P([I,A]),[P,I,A]);p.useEffect(()=>{M&&L()},[M,L]);let{onOpenChange:j,triggerPointerDownPosRef:B}=C;p.useEffect(()=>{if(A){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(B.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(B.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():A.contains(r.target)||j(!1),document.removeEventListener("pointermove",t),B.current=null};return null!==B.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[A,j,B]),p.useEffect(()=>{let e=()=>j(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[j]);let[k,F]=da(e=>{let t=R().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=ds(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),U=p.useCallback((e,t,r)=>{let n=!O.current&&!r;(void 0!==C.value&&C.value===t||n)&&(_(e),n&&(O.current=!0))},[C.value]),H=p.useCallback(()=>A?.focus(),[A]),z=p.useCallback((e,t,r)=>{let n=!O.current&&!r;(void 0!==C.value&&C.value===t||n)&&N(e)},[C.value]),V="popper"===n?cz:cH,Y=V===cz?{side:s,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:g,sticky:m,hideWhenDetached:w,avoidCollisions:y}:{};return(0,f.jsx)(ck,{scope:r,content:A,viewport:b,onViewportChange:v,itemRefCallback:U,selectedItem:I,onItemLeave:H,itemTextRefCallback:z,focusSelectedItem:L,selectedItemText:T,position:n,isPositioned:M,searchRef:k,children:(0,f.jsx)(rg,{as:ep,allowPinchZoom:!0,children:(0,f.jsx)(tT,{asChild:!0,trapped:C.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:tl(i,e=>{C.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,f.jsx)(tA,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:(0,f.jsx)(V,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:e=>e.preventDefault(),...E,...Y,onPlaced:()=>D(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:tl(E.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||F(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>P(t)),e.preventDefault()}})})})})})})});cU.displayName="SelectContentImpl";var cH=p.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:n,...i}=e,o=cI(cj,r),a=cF(cj,r),[s,l]=p.useState(null),[c,d]=p.useState(null),u=ef(t,e=>d(e)),h=cC(r),g=p.useRef(!1),m=p.useRef(!0),{viewport:w,selectedItem:y,selectedItemText:E,focusSelectedItem:C}=a,A=p.useCallback(()=>{if(o.trigger&&o.valueNode&&s&&c&&w&&y&&E){let e=o.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),r=o.valueNode.getBoundingClientRect(),i=E.getBoundingClientRect();if("rtl"!==o.dir){let n=i.left-t.left,o=r.left-n,a=e.left-o,l=e.width+a,c=Math.max(l,t.width),d=cp(o,[10,Math.max(10,window.innerWidth-10-c)]);s.style.minWidth=l+"px",s.style.left=d+"px"}else{let n=t.right-i.right,o=window.innerWidth-r.right-n,a=window.innerWidth-e.right-o,l=e.width+a,c=Math.max(l,t.width),d=cp(o,[10,Math.max(10,window.innerWidth-10-c)]);s.style.minWidth=l+"px",s.style.right=d+"px"}let a=h(),l=window.innerHeight-20,d=w.scrollHeight,u=window.getComputedStyle(c),f=parseInt(u.borderTopWidth,10),p=parseInt(u.paddingTop,10),m=parseInt(u.borderBottomWidth,10),C=f+p+d+parseInt(u.paddingBottom,10)+m,A=Math.min(5*y.offsetHeight,C),x=window.getComputedStyle(w),b=parseInt(x.paddingTop,10),v=parseInt(x.paddingBottom,10),S=e.top+e.height/2-10,I=y.offsetHeight/2,_=f+p+(y.offsetTop+I);if(_<=S){let e=a.length>0&&y===a[a.length-1].ref.current;s.style.bottom="0px";let t=c.clientHeight-w.offsetTop-w.offsetHeight;s.style.height=_+Math.max(l-S,I+(e?v:0)+t+m)+"px"}else{let e=a.length>0&&y===a[0].ref.current;s.style.top="0px";let t=Math.max(S,f+w.offsetTop+(e?b:0)+I);s.style.height=t+(C-_)+"px",w.scrollTop=_-S+w.offsetTop}s.style.margin="10px 0",s.style.minHeight=A+"px",s.style.maxHeight=l+"px",n?.(),requestAnimationFrame(()=>g.current=!0)}},[h,o.trigger,o.valueNode,s,c,w,y,E,o.dir,n]);td(()=>A(),[A]);let[x,b]=p.useState();td(()=>{c&&b(window.getComputedStyle(c).zIndex)},[c]);let v=p.useCallback(e=>{e&&!0===m.current&&(A(),C?.(),m.current=!1)},[A,C]);return(0,f.jsx)(cV,{scope:r,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:v,children:(0,f.jsx)("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:(0,f.jsx)(tw.div,{...i,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});cH.displayName="SelectItemAlignedPosition";var cz=p.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:i=10,...o}=e,a=cv(r);return(0,f.jsx)(iZ,{...a,...o,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});cz.displayName="SelectPopperPosition";var[cV,cY]=cx(cj,{}),cG="SelectViewport",cW=p.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:n,...i}=e,o=cF(cG,r),a=cY(cG,r),s=ef(t,o.onViewportChange),l=p.useRef(0);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,f.jsx)(cE.Slot,{scope:r,children:(0,f.jsx)(tw.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:tl(i.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=a;if(n?.current&&r){let e=Math.abs(l.current-t.scrollTop);if(e>0){let n=window.innerHeight-20,i=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(i<n){let o=i+e,a=Math.min(n,o),s=o-a;r.style.height=a+"px","0px"===r.style.bottom&&(t.scrollTop=s>0?s:0,r.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});cW.displayName=cG;var cX="SelectGroup",[cq,cZ]=cx(cX);p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=tf();return(0,f.jsx)(cq,{scope:r,id:i,children:(0,f.jsx)(tw.div,{role:"group","aria-labelledby":i,...n,ref:t})})}).displayName=cX;var cQ="SelectLabel",cK=p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=cZ(cQ,r);return(0,f.jsx)(tw.div,{id:i.id,...n,ref:t})});cK.displayName=cQ;var c$="SelectItem",[cJ,c1]=cx(c$),c0=p.forwardRef((e,t)=>{let{__scopeSelect:r,value:n,disabled:i=!1,textValue:o,...a}=e,s=cI(c$,r),l=cF(c$,r),c=s.value===n,[d,u]=p.useState(o??""),[h,g]=p.useState(!1),m=ef(t,e=>l.itemRefCallback?.(e,n,i)),w=tf(),y=p.useRef("touch"),E=()=>{i||(s.onValueChange(n),s.onOpenChange(!1))};if(""===n)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,f.jsx)(cJ,{scope:r,value:n,disabled:i,textId:w,isSelected:c,onItemTextChange:p.useCallback(e=>{u(t=>t||(e?.textContent??"").trim())},[]),children:(0,f.jsx)(cE.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:(0,f.jsx)(tw.div,{role:"option","aria-labelledby":w,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:m,onFocus:tl(a.onFocus,()=>g(!0)),onBlur:tl(a.onBlur,()=>g(!1)),onClick:tl(a.onClick,()=>{"mouse"!==y.current&&E()}),onPointerUp:tl(a.onPointerUp,()=>{"mouse"===y.current&&E()}),onPointerDown:tl(a.onPointerDown,e=>{y.current=e.pointerType}),onPointerMove:tl(a.onPointerMove,e=>{y.current=e.pointerType,i?l.onItemLeave?.():"mouse"===y.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:tl(a.onPointerLeave,e=>{e.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:tl(a.onKeyDown,e=>{l.searchRef?.current!==""&&" "===e.key||(cw.includes(e.key)&&E()," "===e.key&&e.preventDefault())})})})})});c0.displayName=c$;var c2="SelectItemText",c4=p.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:i,...o}=e,a=cI(c2,r),s=cF(c2,r),l=c1(c2,r),c=cT(c2,r),[d,u]=p.useState(null),h=ef(t,e=>u(e),l.onItemTextChange,e=>s.itemTextRefCallback?.(e,l.value,l.disabled)),g=d?.textContent,m=p.useMemo(()=>(0,f.jsx)("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:w,onNativeOptionRemove:y}=c;return td(()=>(w(m),()=>y(m)),[w,y,m]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(tw.span,{id:l.textId,...o,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?tm.createPortal(o.children,a.valueNode):null]})});c4.displayName=c2;var c3="SelectItemIndicator",c8=p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return c1(c3,r).isSelected?(0,f.jsx)(tw.span,{"aria-hidden":!0,...n,ref:t}):null});c8.displayName=c3;var c6="SelectScrollUpButton",c5=p.forwardRef((e,t)=>{let r=cF(c6,e.__scopeSelect),n=cY(c6,e.__scopeSelect),[i,o]=p.useState(!1),a=ef(t,n.onScrollButtonChange);return td(()=>{if(r.viewport&&r.isPositioned){let e=function(){o(t.scrollTop>0)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?(0,f.jsx)(de,{...e,ref:a,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});c5.displayName=c6;var c7="SelectScrollDownButton",c9=p.forwardRef((e,t)=>{let r=cF(c7,e.__scopeSelect),n=cY(c7,e.__scopeSelect),[i,o]=p.useState(!1),a=ef(t,n.onScrollButtonChange);return td(()=>{if(r.viewport&&r.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;o(Math.ceil(t.scrollTop)<e)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?(0,f.jsx)(de,{...e,ref:a,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});c9.displayName=c7;var de=p.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...i}=e,o=cF("SelectScrollButton",r),a=p.useRef(null),s=cC(r),l=p.useCallback(()=>{null!==a.current&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),td(()=>{let e=s().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[s]),(0,f.jsx)(tw.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:tl(i.onPointerDown,()=>{null===a.current&&(a.current=window.setInterval(n,50))}),onPointerMove:tl(i.onPointerMove,()=>{o.onItemLeave?.(),null===a.current&&(a.current=window.setInterval(n,50))}),onPointerLeave:tl(i.onPointerLeave,()=>{l()})})}),dt=p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,f.jsx)(tw.div,{"aria-hidden":!0,...n,ref:t})});dt.displayName="SelectSeparator";var dr="SelectArrow";function dn(e){return""===e||void 0===e}p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=cv(r),o=cI(dr,r),a=cF(dr,r);return o.open&&"popper"===a.position?(0,f.jsx)(i$,{...i,...n,ref:t}):null}).displayName=dr;var di=p.forwardRef((e,t)=>{let{value:r,...n}=e,i=p.useRef(null),o=ef(t,i),a=cg(r);return p.useEffect(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(a!==r&&t){let n=new Event("change",{bubbles:!0});t.call(e,r),e.dispatchEvent(n)}},[a,r]),(0,f.jsx)(i2,{asChild:!0,children:(0,f.jsx)("select",{...n,ref:o,defaultValue:r})})});function da(e){let t=tp(e),r=p.useRef(""),n=p.useRef(0),i=p.useCallback(e=>{let i=r.current+e;t(i),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),o=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,o]}function ds(e,t,r){var n;let i=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=(n=Math.max(r?e.indexOf(r):-1,0),e.map((t,r)=>e[(n+r)%e.length]));1===i.length&&(o=o.filter(e=>e!==r));let a=o.find(e=>e.textValue.toLowerCase().startsWith(i.toLowerCase()));return a!==r?a:void 0}di.displayName="BubbleSelect";let dl=eI("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),dc=eI("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),dd=p.forwardRef(({className:e,children:t,...r},n)=>(0,f.jsxs)(cM,{ref:n,className:ed("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,f.jsx(cP,{asChild:!0,children:f.jsx(dl,{className:"h-4 w-4 opacity-50"})})]}));dd.displayName=cM.displayName;let du=p.forwardRef(({className:e,...t},r)=>f.jsx(c5,{ref:r,className:ed("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(dc,{className:"h-4 w-4"})}));du.displayName=c5.displayName;let dh=p.forwardRef(({className:e,...t},r)=>f.jsx(c9,{ref:r,className:ed("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(dl,{className:"h-4 w-4"})}));dh.displayName=c9.displayName;let df=p.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>f.jsx(cL,{children:(0,f.jsxs)(cB,{ref:i,className:ed("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[f.jsx(du,{}),f.jsx(cW,{className:ed("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),f.jsx(dh,{})]})}));df.displayName=cB.displayName,p.forwardRef(({className:e,...t},r)=>f.jsx(cK,{ref:r,className:ed("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=cK.displayName;let dp=p.forwardRef(({className:e,children:t,...r},n)=>(0,f.jsxs)(c0,{ref:n,className:ed("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(c8,{children:f.jsx(a8,{className:"h-4 w-4"})})}),f.jsx(c4,{children:t})]}));dp.displayName=c0.displayName,p.forwardRef(({className:e,...t},r)=>f.jsx(dt,{ref:r,className:ed("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=dt.displayName;var dg="Switch",[dm,dw]=tc(dg),[dy,dE]=dm(dg),dC=p.forwardRef((e,t)=>{let{__scopeSwitch:r,name:n,checked:i,defaultChecked:o,required:a,disabled:s,value:l="on",onCheckedChange:c,form:d,...u}=e,[h,g]=p.useState(null),m=ef(t,e=>g(e)),w=p.useRef(!1),y=!h||d||!!h.closest("form"),[E=!1,C]=tg({prop:i,defaultProp:o,onChange:c});return(0,f.jsxs)(dy,{scope:r,checked:E,disabled:s,children:[(0,f.jsx)(tw.button,{type:"button",role:"switch","aria-checked":E,"aria-required":a,"data-state":dv(E),"data-disabled":s?"":void 0,disabled:s,value:l,...u,ref:m,onClick:tl(e.onClick,e=>{C(e=>!e),y&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),y&&(0,f.jsx)(db,{control:h,bubbles:!w.current,name:n,value:l,checked:E,required:a,disabled:s,form:d,style:{transform:"translateX(-100%)"}})]})});dC.displayName=dg;var dA="SwitchThumb",dx=p.forwardRef((e,t)=>{let{__scopeSwitch:r,...n}=e,i=dE(dA,r);return(0,f.jsx)(tw.span,{"data-state":dv(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});dx.displayName=dA;var db=e=>{let{control:t,checked:r,bubbles:n=!0,...i}=e,o=p.useRef(null),a=cg(r),s=iB(t);return p.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(a!==r&&t){let i=new Event("click",{bubbles:n});t.call(e,r),e.dispatchEvent(i)}},[a,r,n]),(0,f.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:o,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function dv(e){return e?"checked":"unchecked"}let dS=p.forwardRef(({className:e,...t},r)=>f.jsx(dC,{className:ed("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:f.jsx(dx,{className:ed("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));dS.displayName=dC.displayName;let dI=eI("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function d_({projectId:e,currentUserRole:t,currentUserId:r}){let{toast:n}=nd(),[i,o]=(0,p.useState)([]),[a,s]=(0,p.useState)([]),[l,c]=(0,p.useState)(!0),[d,u]=(0,p.useState)(!1),[h,g]=(0,p.useState)({name:"",email:"",role:"COLABORADOR"}),[m,w]=(0,p.useState)(!1),y=async()=>{try{let t=await fetch(`/api/projects/${e}/members`);if(t.ok){let e=await t.json();o(e)}}catch(e){console.error("Erro ao buscar membros:",e)}},E=async()=>{try{let t=await fetch(`/api/projects/${e}/invites`);if(t.ok){let e=await t.json();s(e)}}catch(e){console.error("Erro ao buscar convites:",e)}finally{c(!1)}},C=async()=>{if(!h.name.trim()||!h.email.trim()){n({title:"Erro de valida\xe7\xe3o",description:"Nome e email s\xe3o obrigat\xf3rios.",variant:"destructive"});return}w(!0);try{let t=await fetch(`/api/projects/${e}/invites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,sentById:r})});if(t.ok)n({title:"Convite enviado",description:"O convite foi enviado com sucesso!"}),g({name:"",email:"",role:"COLABORADOR"}),u(!1),E();else{let e=await t.json();throw Error(e.message||"Erro ao enviar convite")}}catch(e){n({title:"Erro ao enviar convite",description:e instanceof Error?e.message:"N\xe3o foi poss\xedvel enviar o convite.",variant:"destructive"})}finally{w(!1)}},A=async(t,r)=>{let i="ATIVO"===r?"INATIVO":"ATIVO",o="ATIVO"===i?"ativar":"desativar";if(confirm(`Tem certeza que deseja ${o} este usu\xe1rio?`))try{let r=await fetch(`/api/projects/${e}/members/${t}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:i})});if(r.ok)n({title:"Status atualizado",description:`Usu\xe1rio ${o} com sucesso!`}),y();else{let e=await r.json();throw Error(e.message||"Erro ao atualizar status")}}catch(e){n({title:"Erro ao atualizar status",description:e instanceof Error?e.message:"N\xe3o foi poss\xedvel atualizar o status.",variant:"destructive"})}},x=async(t,r)=>{if(confirm(`Tem certeza que deseja remover o usu\xe1rio ${r}?`))try{let i=await fetch(`/api/projects/${e}/members/${t}`,{method:"DELETE"});if(i.ok)n({title:"Usu\xe1rio removido",description:`Usu\xe1rio ${r} removido com sucesso!`}),y();else{let e=await i.json();throw Error(e.message||"Erro ao remover usu\xe1rio")}}catch(e){n({title:"Erro ao remover usu\xe1rio",description:e instanceof Error?e.message:"N\xe3o foi poss\xedvel remover o usu\xe1rio.",variant:"destructive"})}},b=e=>"GESTOR"===e?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",v=e=>{switch(e){case"ATIVO":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"INATIVO":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"PENDENTE":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return"GESTOR"!==t?f.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,f.jsxs)("div",{className:"text-center",children:[f.jsx(lR,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Acesso Negado"}),f.jsx("p",{className:"text-muted-foreground",children:"Apenas gestores podem acessar esta p\xe1gina."})]})}):l?f.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),f.jsx("span",{children:"Carregando usu\xe1rios..."})]})}):(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Gest\xe3o de Usu\xe1rios"}),f.jsx("p",{className:"text-muted-foreground",children:"Gerencie usu\xe1rios e convites do projeto"})]}),(0,f.jsxs)(eA,{onClick:()=>u(!0),children:[f.jsx(dI,{className:"mr-2 h-4 w-4"}),"Convidar Usu\xe1rio"]})]}),(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:(0,f.jsxs)(e8,{className:"flex items-center gap-2",children:[f.jsx(eO,{className:"h-5 w-5"}),"Usu\xe1rios do Projeto"]})}),(0,f.jsxs)(e5,{children:[(0,f.jsxs)(oy,{children:[f.jsx(oE,{children:(0,f.jsxs)(oA,{children:[f.jsx(ox,{children:"Usu\xe1rio"}),f.jsx(ox,{children:"Email"}),f.jsx(ox,{children:"Role"}),f.jsx(ox,{children:"Status"}),f.jsx(ox,{children:"Data de Entrada"}),f.jsx(ox,{children:"A\xe7\xf5es"})]})}),f.jsx(oC,{children:i.map(e=>(0,f.jsxs)(oA,{children:[f.jsx(ob,{className:"font-medium",children:e.user?.name||"Nome n\xe3o informado"}),f.jsx(ob,{children:e.user?.email}),f.jsx(ob,{children:f.jsx(e9,{className:b(e.role),children:e.role})}),f.jsx(ob,{children:f.jsx(e9,{className:v(e.status),children:e.status})}),f.jsx(ob,{children:new Date(e.joinedAt).toLocaleDateString("pt-BR")}),f.jsx(ob,{children:(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(ne,{htmlFor:`status-${e.id}`,className:"text-sm",children:"ATIVO"===e.status?"Ativo":"Inativo"}),f.jsx(dS,{id:`status-${e.id}`,checked:"ATIVO"===e.status,onCheckedChange:()=>A(e.id,e.status),disabled:e.user?.role==="GESTOR"})]}),f.jsx(eA,{variant:"outline",size:"sm",onClick:()=>x(e.id,e.user?.name||"Usu\xe1rio"),disabled:e.user?.id===r,className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:"Remover"})]})})]},e.id))})]}),0===i.length&&f.jsx("div",{className:"text-center py-8",children:f.jsx("p",{className:"text-muted-foreground",children:"Nenhum usu\xe1rio encontrado"})})]})]}),(0,f.jsxs)(e4,{children:[f.jsx(e3,{children:(0,f.jsxs)(e8,{className:"flex items-center gap-2",children:[f.jsx(lI,{className:"h-5 w-5"}),"Convites Pendentes"]})}),(0,f.jsxs)(e5,{children:[(0,f.jsxs)(oy,{children:[f.jsx(oE,{children:(0,f.jsxs)(oA,{children:[f.jsx(ox,{children:"Nome"}),f.jsx(ox,{children:"Email"}),f.jsx(ox,{children:"Role"}),f.jsx(ox,{children:"Status"}),f.jsx(ox,{children:"Data do Convite"})]})}),f.jsx(oC,{children:a.map(e=>(0,f.jsxs)(oA,{children:[f.jsx(ob,{className:"font-medium",children:e.name}),f.jsx(ob,{children:e.email}),f.jsx(ob,{children:f.jsx(e9,{className:b(e.role),children:e.role})}),f.jsx(ob,{children:f.jsx(e9,{className:v(e.status),children:e.status})}),f.jsx(ob,{children:new Date(e.createdAt).toLocaleDateString("pt-BR")})]},e.id))})]}),0===a.length&&f.jsx("div",{className:"text-center py-8",children:f.jsx("p",{className:"text-muted-foreground",children:"Nenhum convite pendente"})})]})]}),f.jsx(rT,{open:d,onOpenChange:u,children:(0,f.jsxs)(r2,{children:[(0,f.jsxs)(r4,{children:[f.jsx(r8,{children:"Convidar Usu\xe1rio"}),f.jsx(r6,{children:"Envie um convite para um novo usu\xe1rio participar do projeto"})]}),(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"invite-name",children:"Nome *"}),f.jsx(r5,{id:"invite-name",value:h.name,onChange:e=>g(t=>({...t,name:e.target.value})),placeholder:"Nome completo do usu\xe1rio",disabled:m})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"invite-email",children:"Email *"}),f.jsx(r5,{id:"invite-email",type:"email",value:h.email,onChange:e=>g(t=>({...t,email:e.target.value})),placeholder:"email@exemplo.com",disabled:m})]}),(0,f.jsxs)("div",{children:[f.jsx(ne,{htmlFor:"invite-role",children:"Role"}),(0,f.jsxs)(cN,{value:h.role,onValueChange:e=>g(t=>({...t,role:e})),disabled:m,children:[f.jsx(dd,{children:f.jsx(cO,{placeholder:"Selecione uma role"})}),(0,f.jsxs)(df,{children:[f.jsx(dp,{value:"COLABORADOR",children:"Colaborador"}),f.jsx(dp,{value:"GESTOR",children:"Gestor"})]})]})]})]}),(0,f.jsxs)(r3,{children:[f.jsx(eA,{variant:"outline",onClick:()=>u(!1),disabled:m,children:"Cancelar"}),f.jsx(eA,{onClick:C,disabled:m,children:m?(0,f.jsxs)(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Enviando..."]}):(0,f.jsxs)(f.Fragment,{children:[f.jsx(lI,{className:"mr-2 h-4 w-4"}),"Enviar Convite"]})})]})]})})]})}function dT(){let[e,t]=(0,p.useState)("login"),[r,n]=(0,p.useState)(!1),[i,o]=(0,p.useState)(null),[a,s]=(0,p.useState)(null),{fetchMaterials:l,fetchMovements:c,setCurrentProjectId:d,clearData:u,setCurrentUserId:h}=ts(),g=e=>{e&&e.id&&e.email?(o(e),t("projects")):(console.error("Dados de usu\xe1rio inv\xe1lidos:",e),t("login"))},m=e=>{e&&e.id&&e.email?(o(e),t("projects")):(console.error("Dados de usu\xe1rio inv\xe1lidos:",e),t("login"))},w=async e=>{if(e&&i){console.log("Projeto selecionado:",e),console.log("Projetos dispon\xedveis:",i.projects);let r=i.projects?.find(t=>t.id===e);if(!r)try{console.log("Projeto n\xe3o encontrado localmente, buscando do banco...");let t=await fetch(`/api/auth/projects?userId=${i.id}`);if(t.ok){let n=await t.json();(r=n.find(t=>t.id===e))&&o(e=>e?{...e,projects:n}:null)}}catch(e){console.error("Erro ao buscar projeto do banco:",e)}if(r){console.log("Projeto encontrado:",r),s(r),d(e),h(i.id);try{console.log("Buscando role do usu\xe1rio no projeto...");let t=await fetch(`/api/projects/${e}/members`);if(t.ok){let e=(await t.json()).find(e=>e.userId===i.id);e&&(console.log("Role do usu\xe1rio no projeto:",e.role),o(t=>t?{...t,projectRole:e.role}:null))}}catch(e){console.error("Erro ao buscar role do usu\xe1rio no projeto:",e)}try{await l(e),await c(e)}catch(e){console.error("Erro ao carregar dados do projeto:",e)}t("dashboard")}else console.error("Projeto n\xe3o encontrado:",e),t("projects")}else console.error("Projeto inv\xe1lido ou usu\xe1rio n\xe3o autenticado"),t("projects")},y=()=>{switch(e){case"login":return f.jsx(cf,{onLogin:g,goToSignup:()=>t("signup")});case"signup":return f.jsx(cu,{onSignup:m,goToLogin:()=>t("login")});case"projects":return i?f.jsx(ch,{user:i,onSelectProject:w}):(0,f.jsxs)("div",{className:"text-center mt-12",children:[f.jsx("p",{className:"text-red-600",children:"Usu\xe1rio n\xe3o autenticado"}),f.jsx("button",{onClick:()=>t("login"),className:"mt-4 px-4 py-2 bg-primary text-white rounded",children:"Voltar ao Login"})]});case"dashboard":return i&&a?f.jsx(ow,{setCurrentPage:t}):(0,f.jsxs)("div",{className:"text-center mt-12",children:[f.jsx("p",{className:"text-red-600",children:"Usu\xe1rio n\xe3o autenticado ou projeto n\xe3o selecionado"}),f.jsx("button",{onClick:()=>t("projects"),className:"mt-4 px-4 py-2 bg-primary text-white rounded",children:"Selecionar Projeto"})]});case"materials":return i&&a?f.jsx(sl,{}):(0,f.jsxs)("div",{className:"text-center mt-12",children:[f.jsx("p",{className:"text-red-600",children:"Usu\xe1rio n\xe3o autenticado ou projeto n\xe3o selecionado"}),f.jsx("button",{onClick:()=>t("projects"),className:"mt-4 px-4 py-2 bg-primary text-white rounded",children:"Selecionar Projeto"})]});case"scanner":return i&&a?f.jsx(ls,{}):(0,f.jsxs)("div",{className:"text-center mt-12",children:[f.jsx("p",{className:"text-red-600",children:"Usu\xe1rio n\xe3o autenticado ou projeto n\xe3o selecionado"}),f.jsx("button",{onClick:()=>t("projects"),className:"mt-4 px-4 py-2 bg-primary text-white rounded",children:"Selecionar Projeto"})]});case"movements":return i&&a?f.jsx(l_,{}):(0,f.jsxs)("div",{className:"text-center mt-12",children:[f.jsx("p",{className:"text-red-600",children:"Usu\xe1rio n\xe3o autenticado ou projeto n\xe3o selecionado"}),f.jsx("button",{onClick:()=>t("projects"),className:"mt-4 px-4 py-2 bg-primary text-white rounded",children:"Selecionar Projeto"})]});case"profile":return i&&a?f.jsx(lO,{user:{id:i.id,name:i.name||"",email:i.email,role:i.projectRole||i.role||"COLABORADOR",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()},onUpdateProfile:e=>{o(t=>t?{...t,...e}:null)}}):(0,f.jsxs)("div",{className:"text-center mt-12",children:[f.jsx("p",{className:"text-red-600",children:"Usu\xe1rio n\xe3o autenticado ou projeto n\xe3o selecionado"}),f.jsx("button",{onClick:()=>t("projects"),className:"mt-4 px-4 py-2 bg-primary text-white rounded",children:"Selecionar Projeto"})]});case"users":return i&&a?f.jsx(d_,{projectId:a.id,currentUserRole:i.projectRole||i.role||"COLABORADOR",currentUserId:i.id}):(0,f.jsxs)("div",{className:"text-center mt-12",children:[f.jsx("p",{className:"text-red-600",children:"Usu\xe1rio n\xe3o autenticado ou projeto n\xe3o selecionado"}),f.jsx("button",{onClick:()=>t("projects"),className:"mt-4 px-4 py-2 bg-primary text-white rounded",children:"Selecionar Projeto"})]});default:return(0,f.jsxs)("div",{className:"text-center mt-12",children:[f.jsx("p",{className:"text-red-600",children:"P\xe1gina n\xe3o encontrada"}),f.jsx("button",{onClick:()=>t("dashboard"),className:"mt-4 px-4 py-2 bg-primary text-white rounded",children:"Voltar ao Dashboard"})]})}};return f.jsx(lP,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:(0,f.jsxs)(oe,{children:[f.jsx("div",{className:"flex h-screen bg-background",children:i&&a&&"login"!==e&&"signup"!==e&&"projects"!==e?(0,f.jsxs)(f.Fragment,{children:[f.jsx(eB,{currentPage:e,setCurrentPage:t,sidebarOpen:r,setSidebarOpen:n,onLogout:()=>{o(null),s(null),t("login"),n(!1),u()},onBackToProjects:()=>{t("projects")},currentUserRole:i.projectRole||i.role||"COLABORADOR",projectName:a?.name}),(0,f.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[f.jsx(e2,{currentPage:e,setSidebarOpen:n,projectName:a?.name}),f.jsx("main",{className:"flex-1 overflow-auto p-4 md:p-6",children:y()})]})]}):f.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:f.jsx("main",{className:"flex-1 overflow-auto p-4 md:p-6",children:y()})})}),f.jsx(cc,{})]})})}},4414:e=>{"use strict";var t={single_source_shortest_paths:function(e,r,n){var i,o,a,s,l,c,d,u={},h={};h[r]=0;var f=t.PriorityQueue.make();for(f.push(r,0);!f.empty();)for(a in o=(i=f.pop()).value,s=i.cost,l=e[o]||{})l.hasOwnProperty(a)&&(c=s+l[a],d=h[a],(void 0===h[a]||d>c)&&(h[a]=c,f.push(a,c),u[a]=o));if(void 0!==n&&void 0===h[n])throw Error(["Could not find a path from ",r," to ",n,"."].join(""));return u},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],n=t;n;)r.push(n),e[n],n=e[n];return r.reverse(),r},find_path:function(e,r,n){var i=t.single_source_shortest_paths(e,r,n);return t.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(e){var r,n=t.PriorityQueue,i={};for(r in e=e||{},n)n.hasOwnProperty(r)&&(i[r]=n[r]);return i.queue=[],i.sorter=e.sorter||n.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},10:function(e,t){(function(e){"use strict";let t;var r,n,i,o,a,s,l,c,d,u,h,f,p,g,m,w,y,E,C,A,x,b,v=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},S=function(e){function t(t){var r,n,i,o,a=this.constructor,s=e.call(this,t)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1}),r=a.prototype,(n=Object.setPrototypeOf)?n(s,r):s.__proto__=r,void 0===i&&(i=s.constructor),(o=Error.captureStackTrace)&&o(s,i),s}return function(e,t){function r(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(Error);class I extends S{constructor(e){super(e),this.message=e}getKind(){return this.constructor.kind}}I.kind="Exception";class _ extends I{}_.kind="ArgumentException";class T extends I{}T.kind="IllegalArgumentException";class N{constructor(e){if(this.binarizer=e,null===e)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(null===this.matrix||void 0===this.matrix)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,r,n){let i=this.binarizer.getLuminanceSource().crop(e,t,r,n);return new N(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class R extends I{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class M{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}static currentTimeMillis(){return Date.now()}}class O extends I{}O.kind="IndexOutOfBoundsException";class P extends O{constructor(e,t){super(t),this.index=e,this.message=t}}P.kind="ArrayIndexOutOfBoundsException";class L{static fill(e,t){for(let r=0,n=e.length;r<n;r++)e[r]=t}static fillWithin(e,t,r,n){L.rangeCheck(e.length,t,r);for(let i=t;i<r;i++)e[i]=n}static rangeCheck(e,t,r){if(t>r)throw new T("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new P(t);if(r>e)throw new P(r)}static asList(...e){return e}static create(e,t,r){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(r))}static createInt32Array(e,t,r){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(r))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(let r of e)t=31*t+r;return t}static fillUint8Array(e,t){for(let r=0;r!==e.length;r++)e[r]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){let r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)}static copyOfRange(e,t,r){let n=r-t,i=new Int32Array(n);return D.arraycopy(e,t,i,0,n),i}static binarySearch(e,t,r){void 0===r&&(r=L.numberComparator);let n=0,i=e.length-1;for(;n<=i;){let o=i+n>>1,a=r(t,e[o]);if(a>0)n=o+1;else{if(!(a<0))return o;i=o-1}}return-n-1}static numberComparator(e,t){return e-t}}class j{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let r=31;return 0!=(t=e<<16)&&(r-=16,e=t),0!=(t=e<<8)&&(r-=8,e=t),0!=(t=e<<4)&&(r-=4,e=t),0!=(t=e<<2)&&(r-=2,e=t),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16==0&&(t+=16,e<<=16),e>>>24==0&&(t+=8,e<<=8),e>>>28==0&&(t+=4,e<<=4),e>>>30==0&&(t+=2,e<<=2),t-=e>>>31}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e-=e>>>1&1431655765,e=(e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t){return parseInt(e,t)}}j.MIN_VALUE_32_BITS=-2147483648,j.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,null==t?this.bits=B.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){let t=B.makeArray(e);D.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(31&e))!=0}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){let t=this.size;if(e>=t)return t;let r=this.bits,n=Math.floor(e/32),i=r[n];i&=~((1<<(31&e))-1);let o=r.length;for(;0===i;){if(++n===o)return t;i=r[n]}let a=32*n+j.numberOfTrailingZeros(i);return a>t?t:a}getNextUnset(e){let t=this.size;if(e>=t)return t;let r=this.bits,n=Math.floor(e/32),i=~r[n];i&=~((1<<(31&e))-1);let o=r.length;for(;0===i;){if(++n===o)return t;i=~r[n]}let a=32*n+j.numberOfTrailingZeros(i);return a>t?t:a}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new T;if(t===e)return;let r=Math.floor(e/32),n=Math.floor(--t/32),i=this.bits;for(let o=r;o<=n;o++){let a=o>r?0:31&e,s=(2<<(o<n?31:31&t))-(1<<a);i[o]|=s}}clear(){let e=this.bits.length,t=this.bits;for(let r=0;r<e;r++)t[r]=0}isRange(e,t,r){if(t<e||e<0||t>this.size)throw new T;if(t===e)return!0;let n=Math.floor(e/32),i=Math.floor(--t/32),o=this.bits;for(let a=n;a<=i;a++){let s=a>n?0:31&e,l=(2<<(a<i?31:31&t))-(1<<s)&4294967295;if((o[a]&l)!==(r?l:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let r=t;r>0;r--)this.appendBit((e>>r-1&1)==1)}appendBitArray(e){let t=e.size;this.ensureCapacity(this.size+t);for(let r=0;r<t;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new T("Sizes don't match");let t=this.bits;for(let r=0,n=t.length;r<n;r++)t[r]^=e.bits[r]}toBytes(e,t,r,n){for(let i=0;i<n;i++){let n=0;for(let t=0;t<8;t++)this.get(e)&&(n|=1<<7-t),e++;t[r+i]=n}}getBitArray(){return this.bits}reverse(){let e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,n=this.bits;for(let i=0;i<r;i++){let r=n[i];r=(r=(r=(r=(r=r>>1&1431655765|(1431655765&r)<<1)>>2&858993459|(858993459&r)<<2)>>4&252645135|(252645135&r)<<4)>>8&16711935|(16711935&r)<<8)>>16&65535|(65535&r)<<16,e[t-i]=r}if(this.size!==32*r){let t=32*r-this.size,n=e[0]>>>t;for(let i=1;i<r;i++){let r=e[i];n|=r<<32-t,e[i-1]=n,n=r>>>t}e[r-1]=n}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){return e instanceof B&&this.size===e.size&&L.equals(this.bits,e.bits)}hashCode(){return 31*this.size+L.hashCode(this.bits)}toString(){let e="";for(let t=0,r=this.size;t<r;t++)(7&t)==0&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new B(this.size,this.bits.slice())}}(r=f||(f={}))[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ASSUME_GS1=7]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS";var k=f;class F extends I{static getFormatInstance(){return new F}}F.kind="FormatException",(n=p||(p={}))[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR";class U{constructor(e,t,r,...n){this.valueIdentifier=e,this.name=r,"number"==typeof t?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=n,U.VALUE_IDENTIFIER_TO_ECI.set(e,this),U.NAME_TO_ECI.set(r,this);let i=this.values;for(let e=0,t=i.length;e!==t;e++){let t=i[e];U.VALUES_TO_ECI.set(t,this)}for(let e of n)U.NAME_TO_ECI.set(e,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new F("incorect value");let t=U.VALUES_TO_ECI.get(e);if(void 0===t)throw new F("incorect value");return t}static getCharacterSetECIByName(e){let t=U.NAME_TO_ECI.get(e);if(void 0===t)throw new F("incorect value");return t}equals(e){return e instanceof U&&this.getName()===e.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(p.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(p.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(p.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(p.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(p.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(p.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(p.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(p.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(p.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(p.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(p.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(p.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(p.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(p.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(p.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(p.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(p.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(p.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(p.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(p.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(p.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(p.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(p.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(p.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(p.Big5,28,"Big5"),U.GB18030=new U(p.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(p.EUC_KR,30,"EUC_KR","EUC-KR");class H extends I{}H.kind="UnsupportedOperationException";class z{static decode(e,t){let r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!z.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){let r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):"undefined"==typeof TextEncoder?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"===({}).toString.call(window)}static encodingName(e){return"string"==typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof U?e:U.getCharacterSetECIByName(e)}static decodeFallback(e,t){let r=this.encodingCharacterSet(t);if(z.isDecodeFallbackSupported(r)){let t="";for(let r=0,n=e.length;r<n;r++){let n=e[r].toString(16);n.length<2&&(n="0"+n),t+="%"+n}return decodeURIComponent(t)}if(r.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new H(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(U.UTF8)||e.equals(U.ISO8859_1)||e.equals(U.ASCII)}static encodeFallback(e){let t=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let e=0;e<t.length;e++)r.push(t[e].charCodeAt(0));return new Uint8Array(r)}}class V{static castAsNonUtf8Char(e,t=null){let r=t?t.getName():this.ISO88591;return z.decode(new Uint8Array([e]),r)}static guessEncoding(e,t){if(null!=t&&void 0!==t.get(k.CHARACTER_SET))return t.get(k.CHARACTER_SET).toString();let r=e.length,n=!0,i=!0,o=!0,a=0,s=0,l=0,c=0,d=0,u=0,h=0,f=0,p=0,g=0,m=0,w=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let t=0;t<r&&(n||i||o);t++){let r=255&e[t];o&&(a>0?(128&r)==0?o=!1:a--:(128&r)!=0&&((64&r)==0?o=!1:(a++,(32&r)==0?s++:(a++,(16&r)==0?l++:(a++,(8&r)==0?c++:o=!1))))),n&&(r>127&&r<160?n=!1:r>159&&(r<192||215===r||247===r)&&m++),i&&(d>0?r<64||127===r||r>252?i=!1:d--:128===r||160===r||r>239?i=!1:r>160&&r<224?(u++,f=0,++h>p&&(p=h)):r>127?(d++,h=0,++f>g&&(g=f)):(h=0,f=0))}return(o&&a>0&&(o=!1),i&&d>0&&(i=!1),o&&(w||s+l+c>0))?V.UTF8:i&&(V.ASSUME_SHIFT_JIS||p>=3||g>=3)?V.SHIFT_JIS:n&&i?2===p&&2===u||10*m>=r?V.SHIFT_JIS:V.ISO88591:n?V.ISO88591:i?V.SHIFT_JIS:o?V.UTF8:V.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,n,i,o,a,s){let l;if("%%"===e)return"%";if(void 0===t[++r])return;e=o?parseInt(o.substr(1)):void 0;let c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[r];break;case"c":l=t[r][0];break;case"f":l=parseFloat(t[r]).toFixed(e);break;case"p":l=parseFloat(t[r]).toPrecision(e);break;case"e":l=parseFloat(t[r]).toExponential(e);break;case"x":l=parseInt(t[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(c);let d=parseInt(i),u=i&&i[0]+""=="0"?"0":" ";for(;l.length<d;)l=void 0!==n?l+u:u+l;return l})}static getBytes(e,t){return z.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}V.SHIFT_JIS=U.SJIS.getName(),V.GB2312="GB2312",V.ISO88591=U.ISO8859_1.getName(),V.EUC_JP="EUC_JP",V.UTF8=U.UTF8.getName(),V.PLATFORM_DEFAULT_ENCODING=V.UTF8,V.ASSUME_SHIFT_JIS=!1;class Y{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"==typeof e?this.value+=e.toString():this.encoding?this.value+=V.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,r){for(let n=t;t<t+r;n++)this.append(e[n]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class G{constructor(e,t,r,n){if(this.width=e,this.height=t,this.rowSize=r,this.bits=n,null==t&&(t=e),this.height=t,e<1||t<1)throw new T("Both dimensions must be greater than 0");null==r&&(r=Math.floor((e+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){let t=e.length,r=e[0].length,n=new G(r,t);for(let i=0;i<t;i++){let t=e[i];for(let e=0;e<r;e++)t[e]&&n.set(e,i)}return n}static parseFromString(e,t,r){if(null===e)throw new T("stringRepresentation cannot be null");let n=Array(e.length),i=0,o=0,a=-1,s=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>o){if(-1===a)a=i-o;else if(i-o!==a)throw new T("row lengths do not match");o=i,s++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,n[i]=!0,i++;else if(e.substring(l,l+r.length)===r)l+=r.length,n[i]=!1,i++;else throw new T("illegal character encountered: "+e.substring(l));if(i>o){if(-1===a)a=i-o;else if(i-o!==a)throw new T("row lengths do not match");s++}let c=new G(a,s);for(let e=0;e<i;e++)n[e]&&c.set(Math.floor(e%a),Math.floor(e/a));return c}get(e,t){let r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(31&e)&1)!=0}set(e,t){let r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(31&e)&4294967295}unset(e,t){let r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(31&e)&4294967295)}flip(e,t){let r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new T("input matrix dimensions do not match");let t=new B(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let i=0,o=this.height;i<o;i++){let o=i*r,a=e.getRow(i,t).getBitArray();for(let e=0;e<r;e++)n[o+e]^=a[e]}}clear(){let e=this.bits,t=e.length;for(let r=0;r<t;r++)e[r]=0}setRegion(e,t,r,n){if(t<0||e<0)throw new T("Left and top must be nonnegative");if(n<1||r<1)throw new T("Height and width must be at least 1");let i=e+r,o=t+n;if(o>this.height||i>this.width)throw new T("The region must fit inside the matrix");let a=this.rowSize,s=this.bits;for(let r=t;r<o;r++){let t=r*a;for(let r=e;r<i;r++)s[t+Math.floor(r/32)]|=1<<(31&r)&4294967295}}getRow(e,t){null==t||t.getSize()<this.width?t=new B(this.width):t.clear();let r=this.rowSize,n=this.bits,i=e*r;for(let e=0;e<r;e++)t.setBulk(32*e,n[i+e]);return t}setRow(e,t){D.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){let e=this.getWidth(),t=this.getHeight(),r=new B(e),n=new B(e);for(let e=0,i=Math.floor((t+1)/2);e<i;e++)r=this.getRow(e,r),n=this.getRow(t-1-e,n),r.reverse(),n.reverse(),this.setRow(e,n),this.setRow(t-1-e,r)}getEnclosingRectangle(){let e=this.width,t=this.height,r=this.rowSize,n=this.bits,i=e,o=t,a=-1,s=-1;for(let e=0;e<t;e++)for(let t=0;t<r;t++){let l=n[e*r+t];if(0!==l){if(e<o&&(o=e),e>s&&(s=e),32*t<i){let e=0;for(;(l<<31-e&4294967295)==0;)e++;32*t+e<i&&(i=32*t+e)}if(32*t+31>a){let e=31;for(;l>>>e==0;)e--;32*t+e>a&&(a=32*t+e)}}}return a<i||s<o?null:Int32Array.from([i,o,a-i+1,s-o+1])}getTopLeftOnBit(){let e=this.rowSize,t=this.bits,r=0;for(;r<t.length&&0===t[r];)r++;if(r===t.length)return null;let n=r/e,i=r%e*32,o=t[r],a=0;for(;(o<<31-a&4294967295)==0;)a++;return i+=a,Int32Array.from([i,n])}getBottomRightOnBit(){let e=this.rowSize,t=this.bits,r=t.length-1;for(;r>=0&&0===t[r];)r--;if(r<0)return null;let n=Math.floor(r/e),i=32*Math.floor(r%e),o=t[r],a=31;for(;o>>>a==0;)a--;return i+=a,Int32Array.from([i,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){return e instanceof G&&this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&L.equals(this.bits,e.bits)}hashCode(){let e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+L.hashCode(this.bits)}toString(e="X ",t="  ",r="\n"){return this.buildToString(e,t,r)}buildToString(e,t,r){let n=new Y;for(let i=0,o=this.height;i<o;i++){for(let r=0,o=this.width;r<o;r++)n.append(this.get(r,i)?e:t);n.append(r)}return n.toString()}clone(){return new G(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends I{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class X extends M{constructor(e){super(e),this.luminances=X.EMPTY,this.buckets=new Int32Array(X.LUMINANCE_BUCKETS)}getBlackRow(e,t){let r=this.getLuminanceSource(),n=r.getWidth();null==t||t.getSize()<n?t=new B(n):t.clear(),this.initArrays(n);let i=r.getRow(e,this.luminances),o=this.buckets;for(let e=0;e<n;e++)o[(255&i[e])>>X.LUMINANCE_SHIFT]++;let a=X.estimateBlackPoint(o);if(n<3)for(let e=0;e<n;e++)(255&i[e])<a&&t.set(e);else{let e=255&i[0],r=255&i[1];for(let o=1;o<n-1;o++){let n=255&i[o+1];(4*r-e-n)/2<a&&t.set(o),e=r,r=n}}return t}getBlackMatrix(){let e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight(),n=new G(t,r);this.initArrays(t);let i=this.buckets;for(let n=1;n<5;n++){let o=Math.floor(r*n/5),a=e.getRow(o,this.luminances),s=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<s;e++){let t=255&a[e];i[t>>X.LUMINANCE_SHIFT]++}}let o=X.estimateBlackPoint(i),a=e.getMatrix();for(let e=0;e<r;e++){let r=e*t;for(let i=0;i<t;i++)(255&a[r+i])<o&&n.set(i,e)}return n}createBinarizer(e){return new X(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));let t=this.buckets;for(let e=0;e<X.LUMINANCE_BUCKETS;e++)t[e]=0}static estimateBlackPoint(e){let t=e.length,r=0,n=0,i=0;for(let o=0;o<t;o++)e[o]>i&&(n=o,i=e[o]),e[o]>r&&(r=e[o]);let o=0,a=0;for(let r=0;r<t;r++){let t=r-n,i=e[r]*t*t;i>a&&(o=r,a=i)}if(n>o){let e=n;n=o,o=e}if(o-n<=t/16)throw new W;let s=o-1,l=-1;for(let t=o-1;t>n;t--){let i=t-n,a=i*i*(o-t)*(r-e[t]);a>l&&(s=t,l=a)}return s<<X.LUMINANCE_SHIFT}}X.LUMINANCE_BITS=5,X.LUMINANCE_SHIFT=8-X.LUMINANCE_BITS,X.LUMINANCE_BUCKETS=1<<X.LUMINANCE_BITS,X.EMPTY=Uint8ClampedArray.from([0]);class q extends X{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;let e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight();if(t>=q.MINIMUM_DIMENSION&&r>=q.MINIMUM_DIMENSION){let n=e.getMatrix(),i=t>>q.BLOCK_SIZE_POWER;(t&q.BLOCK_SIZE_MASK)!=0&&i++;let o=r>>q.BLOCK_SIZE_POWER;(r&q.BLOCK_SIZE_MASK)!=0&&o++;let a=q.calculateBlackPoints(n,i,o,t,r),s=new G(t,r);q.calculateThresholdForBlock(n,i,o,t,r,a,s),this.matrix=s}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new q(e)}static calculateThresholdForBlock(e,t,r,n,i,o,a){let s=i-q.BLOCK_SIZE,l=n-q.BLOCK_SIZE;for(let i=0;i<r;i++){let c=i<<q.BLOCK_SIZE_POWER;c>s&&(c=s);let d=q.cap(i,2,r-3);for(let r=0;r<t;r++){let i=r<<q.BLOCK_SIZE_POWER;i>l&&(i=l);let s=q.cap(r,2,t-3),u=0;for(let e=-2;e<=2;e++){let t=o[d+e];u+=t[s-2]+t[s-1]+t[s]+t[s+1]+t[s+2]}let h=u/25;q.thresholdBlock(e,i,c,h,n,a)}}}static cap(e,t,r){return e<t?t:e>r?r:e}static thresholdBlock(e,t,r,n,i,o){for(let a=0,s=r*i+t;a<q.BLOCK_SIZE;a++,s+=i)for(let i=0;i<q.BLOCK_SIZE;i++)(255&e[s+i])<=n&&o.set(t+i,r+a)}static calculateBlackPoints(e,t,r,n,i){let o=i-q.BLOCK_SIZE,a=n-q.BLOCK_SIZE,s=Array(r);for(let i=0;i<r;i++){s[i]=new Int32Array(t);let r=i<<q.BLOCK_SIZE_POWER;r>o&&(r=o);for(let o=0;o<t;o++){let t=o<<q.BLOCK_SIZE_POWER;t>a&&(t=a);let l=0,c=255,d=0;for(let i=0,o=r*n+t;i<q.BLOCK_SIZE;i++,o+=n){for(let t=0;t<q.BLOCK_SIZE;t++){let r=255&e[o+t];l+=r,r<c&&(c=r),r>d&&(d=r)}if(d-c>q.MIN_DYNAMIC_RANGE)for(i++,o+=n;i<q.BLOCK_SIZE;i++,o+=n)for(let t=0;t<q.BLOCK_SIZE;t++)l+=255&e[o+t]}let u=l>>2*q.BLOCK_SIZE_POWER;if(d-c<=q.MIN_DYNAMIC_RANGE&&(u=c/2,i>0&&o>0)){let e=(s[i-1][o]+2*s[i][o-1]+s[i-1][o-1])/4;c<e&&(u=e)}s[i][o]=u}}return s}}q.BLOCK_SIZE_POWER=3,q.BLOCK_SIZE=1<<q.BLOCK_SIZE_POWER,q.BLOCK_SIZE_MASK=q.BLOCK_SIZE-1,q.MINIMUM_DIMENSION=5*q.BLOCK_SIZE,q.MIN_DYNAMIC_RANGE=24;class Z{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,r,n){throw new H("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new H("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new H("This luminance source does not support rotation by 45 degrees.")}toString(){let e=new Uint8ClampedArray(this.width),t=new Y;for(let r=0;r<this.height;r++){let n=this.getRow(r,e);for(let e=0;e<this.width;e++){let r;let i=255&n[e];r=i<64?"#":i<128?"+":i<192?".":" ",t.append(r)}t.append("\n")}return t.toString()}}class Q extends Z{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){let r=this.delegate.getRow(e,t),n=this.getWidth();for(let e=0;e<n;e++)r[e]=255-(255&r[e]);return r}getMatrix(){let e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(t);for(let n=0;n<t;n++)r[n]=255-(255&e[n]);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,r,n){return new Q(this.delegate.crop(e,t,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Q(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Q(this.delegate.rotateCounterClockwise45())}}class K extends Z{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=K.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){let t=e.getContext("2d").getImageData(0,0,e.width,e.height);return K.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,r){let n=new Uint8ClampedArray(t*r);for(let t=0,r=0,i=e.length;t<i;t+=4,r++){let i;i=0===e[t+3]?255:306*e[t]+601*e[t+1]+117*e[t+2]+512>>10,n[r]=i}return n}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);let r=this.getWidth(),n=e*r;return null===t?t=this.buffer.slice(n,n+r):(t.length<r&&(t=new Uint8ClampedArray(r)),t.set(this.buffer.slice(n,n+r))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,r,n){return super.crop(e,t,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){let e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){let t=this.getTempCanvasElement(),r=t.getContext("2d"),n=e*K.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(n))*i+Math.abs(Math.sin(n))*o),s=Math.ceil(Math.abs(Math.sin(n))*i+Math.abs(Math.cos(n))*o);return t.width=a,t.height=s,r.translate(a/2,s/2),r.rotate(n),r.drawImage(this.canvas,-(i/2),-(o/2)),this.buffer=K.makeBufferFromCanvasImageData(t),this}invert(){return new Q(this)}}K.DEGREE_TO_RADIANS=Math.PI/180;class ${constructor(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var J=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};class ee{constructor(e,t=500,r){this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return J(this,void 0,void 0,function*(){if(!this.hasNavigator)throw Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw Error("Can't enumerate devices, method not supported.");let e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(let r of e){let e="video"===r.kind?"videoinput":r.kind;if("videoinput"!==e)continue;let n={deviceId:r.deviceId||r.id,label:r.label||`Video device ${t.length+1}`,kind:e,groupId:r.groupId};t.push(n)}return t})}getVideoInputDevices(){return J(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new $(e.deviceId,e.label))})}findDeviceById(e){return J(this,void 0,void 0,function*(){let t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return J(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return J(this,void 0,void 0,function*(){return this.reset(),yield this.decodeOnceFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},t)})}decodeOnceFromConstraints(e,t){return J(this,void 0,void 0,function*(){let r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,t)})}decodeOnceFromStream(e,t){return J(this,void 0,void 0,function*(){this.reset();let r=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(e,t,r){return J(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,r)})}decodeFromVideoDevice(e,t,r){return J(this,void 0,void 0,function*(){return yield this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},t,r)})}decodeFromConstraints(e,t,r){return J(this,void 0,void 0,function*(){let n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(n,t,r)})}decodeFromStream(e,t,r){return J(this,void 0,void 0,function*(){this.reset();let n=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(n,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return J(this,void 0,void 0,function*(){let r=this.prepareVideoElement(t);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((t,r)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return J(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch(e){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){let r=document.getElementById(e);if(!r)throw new _(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new _(`element with id '${e}' must be an ${t} element`);return r}decodeFromImage(e,t){if(!e&&!t)throw new _("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new _("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,r){if(void 0===e&&void 0===t)throw new _("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new _("An image element must be provided.");this.reset();let t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)}decodeFromVideoElement(e){let t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){let r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)}_decodeFromVideoElementSetup(e){if(!e)throw new _("A video element must be provided.");this.reset();let t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();let t=this.prepareImageElement();this.imageElement=t;let r=this._decodeOnLoadImage(t);return t.src=e,r}decodeFromVideoUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();let t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r}decodeFromVideoUrlContinuously(e,t){if(!e)throw new _("An URL must be provided.");this.reset();let r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,t);return r.src=e,n}_decodeOnLoadImage(e){return new Promise((t,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return J(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return J(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return void 0===e&&((t=document.createElement("img")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"==typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,r=!0){this._stopAsyncDecode=!1;let n=(i,o)=>{if(this._stopAsyncDecode){o(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let t=this.decode(e);i(t)}catch(s){let e=t&&s instanceof W,a=s instanceof R||s instanceof F;if(e||a&&r)return setTimeout(n,this._timeBetweenDecodingAttempts,i,o);o(s)}};return new Promise((e,t)=>n(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;let r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let n=this.decode(e);t(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(i){t(null,i);let e=i instanceof R||i instanceof F,n=i instanceof W;(e||n)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){let t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,r){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,r=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){return this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e),new N(new q(new K(this.getCaptureCanvas(e))))}getCaptureCanvasContext(e){if(!this.captureCanvasContext){let t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){let t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){let t,r;if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;let n=document.createElement("canvas");return void 0!==e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),n.style.width=t+"px",n.style.height=r+"px",n.width=t,n.height=r,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(r){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class et{constructor(e,t,r=null==t?0:8*t.length,n,i,o=D.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=n,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,null==r?this.numBits=null==t?0:8*t.length:this.numBits=r,this.resultPoints=n,this.format=i,this.resultMetadata=null,null==o?this.timestamp=D.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){let t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){let r=Array(t.length+e.length);D.arraycopy(t,0,r,0,t.length),D.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}(i=g||(g={}))[i.AZTEC=0]="AZTEC",i[i.CODABAR=1]="CODABAR",i[i.CODE_39=2]="CODE_39",i[i.CODE_93=3]="CODE_93",i[i.CODE_128=4]="CODE_128",i[i.DATA_MATRIX=5]="DATA_MATRIX",i[i.EAN_8=6]="EAN_8",i[i.EAN_13=7]="EAN_13",i[i.ITF=8]="ITF",i[i.MAXICODE=9]="MAXICODE",i[i.PDF_417=10]="PDF_417",i[i.QR_CODE=11]="QR_CODE",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION";var er=g;(o=m||(m={}))[o.OTHER=0]="OTHER",o[o.ORIENTATION=1]="ORIENTATION",o[o.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",o[o.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",o[o.ISSUE_NUMBER=4]="ISSUE_NUMBER",o[o.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",o[o.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",o[o.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",o[o.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",o[o.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",o[o.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY";var en=m;class ei{constructor(e,t,r,n,i=-1,o=-1){this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=null==e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class eo{exp(e){return this.expTable[e]}log(e){if(0===e)throw new T;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class ea{constructor(e,t){if(0===t.length)throw new T;this.field=e;let r=t.length;if(r>1&&0===t[0]){let e=1;for(;e<r&&0===t[e];)e++;e===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-e),D.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){let t;if(0===e)return this.getCoefficient(0);let r=this.coefficients;if(1===e){t=0;for(let e=0,n=r.length;e!==n;e++){let n=r[e];t=eo.addOrSubtract(t,n)}return t}t=r[0];let n=r.length,i=this.field;for(let o=1;o<n;o++)t=eo.addOrSubtract(i.multiply(e,t),r[o]);return t}addOrSubtract(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){let e=t;t=r,r=e}let n=new Int32Array(r.length),i=r.length-t.length;D.arraycopy(r,0,n,0,i);for(let e=i;e<r.length;e++)n[e]=eo.addOrSubtract(t[e-i],r[e]);return new ea(this.field,n)}multiply(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();let t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,o=new Int32Array(r+i-1),a=this.field;for(let e=0;e<r;e++){let r=t[e];for(let t=0;t<i;t++)o[e+t]=eo.addOrSubtract(o[e+t],a.multiply(r,n[t]))}return new ea(a,o)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;let t=this.coefficients.length,r=this.field,n=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)n[o]=r.multiply(i[o],e);return new ea(r,n)}multiplyByMonomial(e,t){if(e<0)throw new T;if(0===t)return this.field.getZero();let r=this.coefficients,n=r.length,i=new Int32Array(n+e),o=this.field;for(let e=0;e<n;e++)i[e]=o.multiply(r[e],t);return new ea(o,i)}divide(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new T("Divide by 0");let t=this.field,r=t.getZero(),n=this,i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;n.getDegree()>=e.getDegree()&&!n.isZero();){let i=n.getDegree()-e.getDegree(),a=t.multiply(n.getCoefficient(n.getDegree()),o),s=e.multiplyByMonomial(i,a),l=t.buildMonomial(i,a);r=r.addOrSubtract(l),n=n.addOrSubtract(s)}return[r,n]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);if(0!==r){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),0===t||1!==r){let t=this.field.log(r);0===t?e+="1":1===t?e+="a":e+="a^"+t}0!==t&&(1===t?e+="x":e+="x^"+t)}}return e}}class es extends I{}es.kind="ArithmeticException";class el extends eo{constructor(e,t,r){super(),this.primitive=e,this.size=t,this.generatorBase=r;let n=new Int32Array(t),i=1;for(let r=0;r<t;r++)n[r]=i,(i*=2)>=t&&(i^=e,i&=t-1);this.expTable=n;let o=new Int32Array(t);for(let e=0;e<t-1;e++)o[n[e]]=e;this.logTable=o,this.zero=new ea(this,Int32Array.from([0])),this.one=new ea(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new T;if(0===t)return this.zero;let r=new Int32Array(e+1);return r[0]=t,new ea(this,r)}inverse(e){if(0===e)throw new es;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+j.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}el.AZTEC_DATA_12=new el(4201,4096,1),el.AZTEC_DATA_10=new el(1033,1024,1),el.AZTEC_DATA_6=new el(67,64,1),el.AZTEC_PARAM=new el(19,16,1),el.QR_CODE_FIELD_256=new el(285,256,0),el.DATA_MATRIX_FIELD_256=new el(301,256,1),el.AZTEC_DATA_8=el.DATA_MATRIX_FIELD_256,el.MAXICODE_FIELD_64=el.AZTEC_DATA_6;class ec extends I{}ec.kind="ReedSolomonException";class ed extends I{}ed.kind="IllegalStateException";class eu{constructor(e){this.field=e}decode(e,t){let r=this.field,n=new ea(r,e),i=new Int32Array(t),o=!0;for(let e=0;e<t;e++){let t=n.evaluateAt(r.exp(e+r.getGeneratorBase()));i[i.length-1-e]=t,0!==t&&(o=!1)}if(o)return;let a=new ea(r,i),s=this.runEuclideanAlgorithm(r.buildMonomial(t,1),a,t),l=s[0],c=s[1],d=this.findErrorLocations(l),u=this.findErrorMagnitudes(c,d);for(let t=0;t<d.length;t++){let n=e.length-1-r.log(d[t]);if(n<0)throw new ec("Bad error location");e[n]=el.addOrSubtract(e[n],u[t])}}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){let r=e;e=t,t=r}let n=this.field,i=e,o=t,a=n.getZero(),s=n.getOne();for(;o.getDegree()>=(r/2|0);){let e=i,t=a;if(i=o,a=s,i.isZero())throw new ec("r_{i-1} was zero");o=e;let r=n.getZero(),l=i.getCoefficient(i.getDegree()),c=n.inverse(l);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){let e=o.getDegree()-i.getDegree(),t=n.multiply(o.getCoefficient(o.getDegree()),c);r=r.addOrSubtract(n.buildMonomial(e,t)),o=o.addOrSubtract(i.multiplyByMonomial(e,t))}if(s=r.multiply(a).addOrSubtract(t),o.getDegree()>=i.getDegree())throw new ed("Division algorithm failed to reduce polynomial?")}let l=s.getCoefficient(0);if(0===l)throw new ec("sigmaTilde(0) was zero");let c=n.inverse(l);return[s.multiplyScalar(c),o.multiplyScalar(c)]}findErrorLocations(e){let t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);let r=new Int32Array(t),n=0,i=this.field;for(let o=1;o<i.getSize()&&n<t;o++)0===e.evaluateAt(o)&&(r[n]=i.inverse(o),n++);if(n!==t)throw new ec("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,t){let r=t.length,n=new Int32Array(r),i=this.field;for(let o=0;o<r;o++){let a=i.inverse(t[o]),s=1;for(let e=0;e<r;e++)if(o!==e){let r=i.multiply(t[e],a),n=(1&r)==0?1|r:-2&r;s=i.multiply(s,n)}n[o]=i.multiply(e.evaluateAt(a),i.inverse(s)),0!==i.getGeneratorBase()&&(n[o]=i.multiply(n[o],a))}return n}}(a=w||(w={}))[a.UPPER=0]="UPPER",a[a.LOWER=1]="LOWER",a[a.MIXED=2]="MIXED",a[a.DIGIT=3]="DIGIT",a[a.PUNCT=4]="PUNCT",a[a.BINARY=5]="BINARY";class eh{decode(e){this.ddata=e;let t=e.getBits(),r=this.extractBits(t),n=this.correctBits(r),i=new ei(eh.convertBoolArrayToByteArray(n),eh.getEncodedData(n),null,null);return i.setNumBits(n.length),i}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,r=w.UPPER,n=w.UPPER,i="",o=0;for(;o<t;)if(n===w.BINARY){if(t-o<5)break;let a=eh.readCode(e,o,5);if(o+=5,0===a){if(t-o<11)break;a=eh.readCode(e,o,11)+31,o+=11}for(let r=0;r<a;r++){if(t-o<8){o=t;break}let r=eh.readCode(e,o,8);i+=V.castAsNonUtf8Char(r),o+=8}n=r}else{let a=n===w.DIGIT?4:5;if(t-o<a)break;let s=eh.readCode(e,o,a);o+=a;let l=eh.getCharacter(n,s);l.startsWith("CTRL_")?(r=n,n=eh.getTable(l.charAt(5)),"L"===l.charAt(6)&&(r=n)):(i+=l,n=r)}return i}static getTable(e){switch(e){case"L":return w.LOWER;case"P":return w.PUNCT;case"M":return w.MIXED;case"D":return w.DIGIT;case"B":return w.BINARY;default:return w.UPPER}}static getCharacter(e,t){switch(e){case w.UPPER:return eh.UPPER_TABLE[t];case w.LOWER:return eh.LOWER_TABLE[t];case w.MIXED:return eh.MIXED_TABLE[t];case w.PUNCT:return eh.PUNCT_TABLE[t];case w.DIGIT:return eh.DIGIT_TABLE[t];default:throw new ed("Bad table")}}correctBits(e){let t,r;2>=this.ddata.getNbLayers()?(r=6,t=el.AZTEC_DATA_6):8>=this.ddata.getNbLayers()?(r=8,t=el.AZTEC_DATA_8):22>=this.ddata.getNbLayers()?(r=10,t=el.AZTEC_DATA_10):(r=12,t=el.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),i=e.length/r;if(i<n)throw new F;let o=e.length%r,a=new Int32Array(i);for(let t=0;t<i;t++,o+=r)a[t]=eh.readCode(e,o,r);try{new eu(t).decode(a,i-n)}catch(e){throw new F(e)}let s=(1<<r)-1,l=0;for(let e=0;e<n;e++){let t=a[e];if(0===t||t===s)throw new F;(1===t||t===s-1)&&l++}let c=Array(n*r-l),d=0;for(let e=0;e<n;e++){let t=a[e];if(1===t||t===s-1)c.fill(t>1,d,d+r-1),d+=r-1;else for(let e=r-1;e>=0;--e)c[d++]=(t&1<<e)!=0}return c}extractBits(e){let t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(t?11:14)+4*r,i=new Int32Array(n),o=Array(this.totalBitsInLayer(r,t));if(t)for(let e=0;e<i.length;e++)i[e]=e;else{let e=n+1+2*j.truncDivision(j.truncDivision(n,2)-1,15),t=n/2,r=j.truncDivision(e,2);for(let e=0;e<t;e++){let n=e+j.truncDivision(e,15);i[t-e-1]=r-n-1,i[t+e]=r+n+1}}for(let a=0,s=0;a<r;a++){let l=(r-a)*4+(t?9:12),c=2*a,d=n-1-c;for(let t=0;t<l;t++){let r=2*t;for(let n=0;n<2;n++)o[s+r+n]=e.get(i[c+n],i[c+t]),o[s+2*l+r+n]=e.get(i[c+t],i[d-n]),o[s+4*l+r+n]=e.get(i[d-n],i[d-t]),o[s+6*l+r+n]=e.get(i[d-t],i[c+n])}s+=8*l}return o}static readCode(e,t,r){let n=0;for(let i=t;i<t+r;i++)n<<=1,e[i]&&(n|=1);return n}static readByte(e,t){let r=e.length-t;return r>=8?eh.readCode(e,t,8):eh.readCode(e,t,r)<<8-r}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let r=0;r<t.length;r++)t[r]=eh.readByte(e,8*r);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}eh.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],eh.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],eh.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],eh.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],eh.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ef{constructor(){}static round(e){return e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,r,n){let i=e-r,o=t-n;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let r=0,n=e.length;r!==n;r++)t+=e[r];return t}}class ep{static floatToIntBits(e){return e}}ep.MAX_VALUE=Number.MAX_SAFE_INTEGER;class eg{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){return e instanceof eg&&this.x===e.x&&this.y===e.y}hashCode(){return 31*ep.floatToIntBits(this.x)+ep.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){let t,r,n;let i=this.distance(e[0],e[1]),o=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);if(o>=i&&o>=a?(r=e[0],t=e[1],n=e[2]):a>=o&&a>=i?(r=e[1],t=e[0],n=e[2]):(r=e[2],t=e[0],n=e[1]),0>this.crossProductZ(t,r,n)){let e=t;t=n,n=e}e[0]=t,e[1]=r,e[2]=n}static distance(e,t){return ef.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,r){let n=t.x,i=t.y;return(r.x-n)*(e.y-i)-(r.y-i)*(e.x-n)}}class em{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ew extends em{constructor(e,t,r,n,i){super(e,t),this.compact=r,this.nbDatablocks=n,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ey{constructor(e,t,r,n){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==t&&(t=ey.INIT_SIZE),null==r&&(r=e.getWidth()/2|0),null==n&&(n=e.getHeight()/2|0);let i=t/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=n-i,this.downInit=n+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let e=this.leftInit,t=this.rightInit,r=this.upInit,n=this.downInit,i=!1,o=!0,a=!1,s=!1,l=!1,c=!1,d=!1,u=this.width,h=this.height;for(;o;){o=!1;let f=!0;for(;(f||!s)&&t<u;)(f=this.containsBlackPoint(r,n,t,!1))?(t++,o=!0,s=!0):!s&&t++;if(t>=u){i=!0;break}let p=!0;for(;(p||!l)&&n<h;)(p=this.containsBlackPoint(e,t,n,!0))?(n++,o=!0,l=!0):!l&&n++;if(n>=h){i=!0;break}let g=!0;for(;(g||!c)&&e>=0;)(g=this.containsBlackPoint(r,n,e,!1))?(e--,o=!0,c=!0):!c&&e--;if(e<0){i=!0;break}let m=!0;for(;(m||!d)&&r>=0;)(m=this.containsBlackPoint(e,t,r,!0))?(r--,o=!0,d=!0):!d&&r--;if(r<0){i=!0;break}o&&(a=!0)}if(!i&&a){let i=t-e,o=null;for(let t=1;null===o&&t<i;t++)o=this.getBlackPointOnSegment(e,n-t,e+t,n);if(null==o)throw new W;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,r+t,e+t,r);if(null==a)throw new W;let s=null;for(let e=1;null===s&&e<i;e++)s=this.getBlackPointOnSegment(t,r+e,t-e,r);if(null==s)throw new W;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,n-e,t-e,n);if(null==l)throw new W;return this.centerEdges(l,o,s,a)}throw new W}getBlackPointOnSegment(e,t,r,n){let i=ef.round(ef.distance(e,t,r,n)),o=(r-e)/i,a=(n-t)/i,s=this.image;for(let r=0;r<i;r++){let n=ef.round(e+r*o),i=ef.round(t+r*a);if(s.get(n,i))return new eg(n,i)}return null}centerEdges(e,t,r,n){let i=e.getX(),o=e.getY(),a=t.getX(),s=t.getY(),l=r.getX(),c=r.getY(),d=n.getX(),u=n.getY(),h=ey.CORR;return i<this.width/2?[new eg(d-h,u+h),new eg(a+h,s+h),new eg(l-h,c-h),new eg(i+h,o-h)]:[new eg(d+h,u+h),new eg(a+h,s-h),new eg(l-h,c+h),new eg(i-h,o-h)]}containsBlackPoint(e,t,r,n){let i=this.image;if(n){for(let n=e;n<=t;n++)if(i.get(n,r))return!0}else for(let n=e;n<=t;n++)if(i.get(r,n))return!0;return!1}}ey.INIT_SIZE=10,ey.CORR=1;class eE{static checkAndNudgePoints(e,t){let r=e.getWidth(),n=e.getHeight(),i=!0;for(let e=0;e<t.length&&i;e+=2){let o=Math.floor(t[e]),a=Math.floor(t[e+1]);if(o<-1||o>r||a<-1||a>n)throw new W;i=!1,-1===o?(t[e]=0,i=!0):o===r&&(t[e]=r-1,i=!0),-1===a?(t[e+1]=0,i=!0):a===n&&(t[e+1]=n-1,i=!0)}i=!0;for(let e=t.length-2;e>=0&&i;e-=2){let o=Math.floor(t[e]),a=Math.floor(t[e+1]);if(o<-1||o>r||a<-1||a>n)throw new W;i=!1,-1===o?(t[e]=0,i=!0):o===r&&(t[e]=r-1,i=!0),-1===a?(t[e+1]=0,i=!0):a===n&&(t[e+1]=n-1,i=!0)}}}class eC{constructor(e,t,r,n,i,o,a,s,l){this.a11=e,this.a21=t,this.a31=r,this.a12=n,this.a22=i,this.a32=o,this.a13=a,this.a23=s,this.a33=l}static quadrilateralToQuadrilateral(e,t,r,n,i,o,a,s,l,c,d,u,h,f,p,g){let m=eC.quadrilateralToSquare(e,t,r,n,i,o,a,s);return eC.squareToQuadrilateral(l,c,d,u,h,f,p,g).times(m)}transformPoints(e){let t=e.length,r=this.a11,n=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,d=this.a33;for(let u=0;u<t;u+=2){let t=e[u],h=e[u+1],f=i*t+s*h+d;e[u]=(r*t+o*h+l)/f,e[u+1]=(n*t+a*h+c)/f}}transformPointsWithValues(e,t){let r=this.a11,n=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,d=this.a33,u=e.length;for(let h=0;h<u;h++){let u=e[h],f=t[h],p=i*u+s*f+d;e[h]=(r*u+o*f+l)/p,t[h]=(n*u+a*f+c)/p}}static squareToQuadrilateral(e,t,r,n,i,o,a,s){let l=e-r+i-a,c=t-n+o-s;if(0===l&&0===c)return new eC(r-e,i-r,e,n-t,o-n,t,0,0,1);{let d=r-i,u=a-i,h=n-o,f=s-o,p=d*f-u*h,g=(l*f-u*c)/p,m=(d*c-l*h)/p;return new eC(r-e+g*r,a-e+m*a,e,n-t+g*n,s-t+m*s,t,g,m,1)}}static quadrilateralToSquare(e,t,r,n,i,o,a,s){return eC.squareToQuadrilateral(e,t,r,n,i,o,a,s).buildAdjoint()}buildAdjoint(){return new eC(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new eC(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class eA extends eE{sampleGrid(e,t,r,n,i,o,a,s,l,c,d,u,h,f,p,g,m,w,y){let E=eC.quadrilateralToQuadrilateral(n,i,o,a,s,l,c,d,u,h,f,p,g,m,w,y);return this.sampleGridWithTransform(e,t,r,E)}sampleGridWithTransform(e,t,r,n){if(t<=0||r<=0)throw new W;let i=new G(t,r),o=new Float32Array(2*t);for(let t=0;t<r;t++){let r=o.length,a=t+.5;for(let e=0;e<r;e+=2)o[e]=e/2+.5,o[e+1]=a;n.transformPoints(o),eE.checkAndNudgePoints(e,o);try{for(let n=0;n<r;n+=2)e.get(Math.floor(o[n]),Math.floor(o[n+1]))&&i.set(n/2,t)}catch(e){throw new W}}return i}}class ex{static setGridSampler(e){ex.gridSampler=e}static getInstance(){return ex.gridSampler}}ex.gridSampler=new eA;class eb{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new eg(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ev{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){let e=r[0];r[0]=r[2],r[2]=e}return this.extractParameters(r),new ew(this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),this.getMatrixCornerPoints(r),this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new W;let t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);let n=0;for(let e=0;e<4;e++){let t=r[(this.shift+e)%4];this.compact?(n<<=7,n+=t>>1&127):(n<<=10,n+=(t>>2&992)+(t>>1&31))}let i=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(63&i)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(2047&i)+1)}getRotation(e,t){let r=0;e.forEach((e,n,i)=>{r=(r<<3)+((e>>t-2<<1)+(1&e))}),r=((1&r)<<11)+(r>>1);for(let e=0;e<4;e++)if(2>=j.bitCount(r^this.EXPECTED_CORNER_BITS[e]))return e;throw new W}getCorrectedParameterData(e,t){let r,n;t?(r=7,n=2):(r=10,n=4);let i=r-n,o=new Int32Array(r);for(let t=r-1;t>=0;--t)o[t]=15&e,e>>=4;try{new eu(el.AZTEC_PARAM).decode(o,i)}catch(e){throw new W}let a=0;for(let e=0;e<n;e++)a=(a<<4)+o[e];return a}getBullsEyeCorners(e){let t=e,r=e,n=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,o,1,-1),a=this.getFirstDifferent(r,o,1,1),s=this.getFirstDifferent(n,o,-1,1),l=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let r=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(r<.75||r>1.25||!this.isWhiteOrBlackRectangle(e,a,s,l))break}t=e,r=a,n=s,i=l,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new W;this.compact=5===this.nbCenterLayers;let a=new eg(t.getX()+.5,t.getY()-.5),s=new eg(r.getX()+.5,r.getY()+.5),l=new eg(n.getX()-.5,n.getY()+.5),c=new eg(i.getX()-.5,i.getY()-.5);return this.expandSquare([a,s,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,r,n;try{let i=new ey(this.image).detect();e=i[0],t=i[1],r=i[2],n=i[3]}catch(a){let i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new eb(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new eb(i+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new eb(i-7,o+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new eb(i-7,o-7),!1,-1,-1).toResultPoint()}let i=ef.round((e.getX()+n.getX()+t.getX()+r.getX())/4),o=ef.round((e.getY()+n.getY()+t.getY()+r.getY())/4);try{let a=new ey(this.image,15,i,o).detect();e=a[0],t=a[1],r=a[2],n=a[3]}catch(a){e=this.getFirstDifferent(new eb(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new eb(i+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new eb(i-7,o+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new eb(i-7,o-7),!1,-1,-1).toResultPoint()}return new eb(i=ef.round((e.getX()+n.getX()+t.getX()+r.getX())/4),o=ef.round((e.getY()+n.getY()+t.getY()+r.getY())/4))}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,r,n,i){let o=ex.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return o.sampleGrid(e,a,a,s,s,l,s,l,l,s,l,t.getX(),t.getY(),r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY())}sampleLine(e,t,r){let n=0,i=this.distanceResultPoint(e,t),o=i/r,a=e.getX(),s=e.getY(),l=o*(t.getX()-e.getX())/i,c=o*(t.getY()-e.getY())/i;for(let e=0;e<r;e++)this.image.get(ef.round(a+e*l),ef.round(s+e*c))&&(n|=1<<r-e-1);return n}isWhiteOrBlackRectangle(e,t,r,n){e=new eb(e.getX()-3,e.getY()+3),t=new eb(t.getX()-3,t.getY()-3),r=new eb(r.getX()+3,r.getY()-3),n=new eb(n.getX()+3,n.getY()+3);let i=this.getColor(n,e);if(0===i)return!1;let o=this.getColor(e,t);return o===i&&(o=this.getColor(t,r))===i&&(o=this.getColor(r,n))===i}getColor(e,t){let r=this.distancePoint(e,t),n=(t.getX()-e.getX())/r,i=(t.getY()-e.getY())/r,o=0,a=e.getX(),s=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(r);for(let e=0;e<c;e++)a+=n,s+=i,this.image.get(ef.round(a),ef.round(s))!==l&&o++;let d=o/r;return d>.1&&d<.9?0:d<=.1===l?1:-1}getFirstDifferent(e,t,r,n){let i=e.getX()+r,o=e.getY()+n;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=r,o+=n;for(i-=r,o-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=r;for(i-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=n;return new eb(i,o-=n)}expandSquare(e,t,r){let n=r/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,l=new eg(a+n*i,s+n*o),c=new eg(a-n*i,s-n*o);return i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),[l,new eg((a=(e[1].getX()+e[3].getX())/2)+n*i,(s=(e[1].getY()+e[3].getY())/2)+n*o),c,new eg(a-n*i,s-n*o)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=ef.round(e.getX()),r=ef.round(e.getY());return this.isValid(t,r)}distancePoint(e,t){return ef.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return ef.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(j.truncDivision(this.nbLayers-4,8)+1)+15}}class eS{decode(e,t=null){let r=null,n=new ev(e.getBlackMatrix()),i=null,o=null;try{let e=n.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=new eh().decode(e)}catch(e){r=e}if(null==o)try{let e=n.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=new eh().decode(e)}catch(e){if(null!=r)throw r;throw e}let a=new et(o.getText(),o.getRawBytes(),o.getNumBits(),i,er.AZTEC,D.currentTimeMillis()),s=o.getByteSegments();null!=s&&a.putMetadata(en.BYTE_SEGMENTS,s);let l=o.getECLevel();return null!=l&&a.putMetadata(en.ERROR_CORRECTION_LEVEL,l),a}reportFoundResultPoints(e,t){if(null!=e){let r=e.get(k.NEED_RESULT_POINT_CALLBACK);null!=r&&t.forEach((e,t,n)=>{r.foundPossibleResultPoint(e)})}}reset(){}}class eI extends ee{constructor(e=500){super(new eS,e)}}class e_{decode(e,t){try{return this.doDecode(e,t)}catch(r){if(t&&!0===t.get(k.TRY_HARDER)&&e.isRotateSupported()){let r=e.rotateCounterClockwise(),n=this.doDecode(r,t),i=n.getResultMetadata(),o=270;null!==i&&!0===i.get(en.ORIENTATION)&&(o+=i.get(en.ORIENTATION)%360),n.putMetadata(en.ORIENTATION,o);let a=n.getResultPoints();if(null!==a){let e=r.getHeight();for(let t=0;t<a.length;t++)a[t]=new eg(e-a[t].getY()-1,a[t].getX())}return n}throw new W}}reset(){}doDecode(e,t){let r;let n=e.getWidth(),i=e.getHeight(),o=new B(n),a=t&&!0===t.get(k.TRY_HARDER),s=Math.max(1,i>>(a?8:5));r=a?i:15;let l=Math.trunc(i/2);for(let a=0;a<r;a++){let r=Math.trunc((a+1)/2),c=l+s*((1&a)==0?r:-r);if(c<0||c>=i)break;try{o=e.getBlackRow(c,o)}catch(e){continue}for(let e=0;e<2;e++){if(1===e&&(o.reverse(),t&&!0===t.get(k.NEED_RESULT_POINT_CALLBACK))){let e=new Map;t.forEach((t,r)=>e.set(r,t)),e.delete(k.NEED_RESULT_POINT_CALLBACK),t=e}try{let r=this.decodeRow(c,o,t);if(1===e){r.putMetadata(en.ORIENTATION,180);let e=r.getResultPoints();null!==e&&(e[0]=new eg(n-e[0].getX()-1,e[0].getY()),e[1]=new eg(n-e[1].getX()-1,e[1].getY()))}return r}catch(e){}}}throw new W}static recordPattern(e,t,r){let n=r.length;for(let e=0;e<n;e++)r[e]=0;let i=e.getSize();if(t>=i)throw new W;let o=!e.get(t),a=0,s=t;for(;s<i;){if(e.get(s)!==o)r[a]++;else{if(++a===n)break;r[a]=1,o=!o}s++}if(!(a===n||a===n-1&&s===i))throw new W}static recordPatternInReverse(e,t,r){let n=r.length,i=e.get(t);for(;t>0&&n>=0;)e.get(--t)!==i&&(n--,i=!i);if(n>=0)throw new W;e_.recordPattern(e,t+1,r)}static patternMatchVariance(e,t,r){let n=e.length,i=0,o=0;for(let r=0;r<n;r++)i+=e[r],o+=t[r];if(i<o)return Number.POSITIVE_INFINITY;let a=i/o;r*=a;let s=0;for(let i=0;i<n;i++){let n=e[i],o=t[i]*a,l=n>o?n-o:o-n;if(l>r)return Number.POSITIVE_INFINITY;s+=l}return s/i}}class eT extends e_{static findStartPattern(e){let t=e.getSize(),r=e.getNextSet(0),n=0,i=Int32Array.from([0,0,0,0,0,0]),o=r,a=!1;for(let s=r;s<t;s++)if(e.get(s)!==a)i[n]++;else{if(5===n){let t=eT.MAX_AVG_VARIANCE,r=-1;for(let e=eT.CODE_START_A;e<=eT.CODE_START_C;e++){let n=e_.patternMatchVariance(i,eT.CODE_PATTERNS[e],eT.MAX_INDIVIDUAL_VARIANCE);n<t&&(t=n,r=e)}if(r>=0&&e.isRange(Math.max(0,o-(s-o)/2),o,!1))return Int32Array.from([o,s,r]);o+=i[0]+i[1],(i=i.slice(2,i.length-1))[n-1]=0,i[n]=0,n--}else n++;i[n]=1,a=!a}throw new W}static decodeCode(e,t,r){e_.recordPattern(e,r,t);let n=eT.MAX_AVG_VARIANCE,i=-1;for(let e=0;e<eT.CODE_PATTERNS.length;e++){let r=eT.CODE_PATTERNS[e],o=this.patternMatchVariance(t,r,eT.MAX_INDIVIDUAL_VARIANCE);o<n&&(n=o,i=e)}if(i>=0)return i;throw new W}decodeRow(e,t,r){let n;let i=r&&!0===r.get(k.ASSUME_GS1),o=eT.findStartPattern(t),a=o[2],s=0,l=new Uint8Array(20);switch(l[s++]=a,a){case eT.CODE_START_A:n=eT.CODE_CODE_A;break;case eT.CODE_START_B:n=eT.CODE_CODE_B;break;case eT.CODE_START_C:n=eT.CODE_CODE_C;break;default:throw new F}let c=!1,d=!1,u="",h=o[0],f=o[1],p=Int32Array.from([0,0,0,0,0,0]),g=0,m=0,w=a,y=0,E=!0,C=!1,A=!1;for(;!c;){let e=d;switch(d=!1,g=m,m=eT.decodeCode(t,p,f),l[s++]=m,m!==eT.CODE_STOP&&(E=!0),m!==eT.CODE_STOP&&(w+=++y*m),h=f,f+=p.reduce((e,t)=>e+t,0),m){case eT.CODE_START_A:case eT.CODE_START_B:case eT.CODE_START_C:throw new F}switch(n){case eT.CODE_CODE_A:if(m<64)A===C?u+=String.fromCharCode(32+m):u+=String.fromCharCode(32+m+128),A=!1;else if(m<96)A===C?u+=String.fromCharCode(m-64):u+=String.fromCharCode(m+64),A=!1;else switch(m!==eT.CODE_STOP&&(E=!1),m){case eT.CODE_FNC_1:i&&(0===u.length?u+="]C1":u+="\x1d");break;case eT.CODE_FNC_2:case eT.CODE_FNC_3:break;case eT.CODE_FNC_4_A:!C&&A?(C=!0,A=!1):C&&A?(C=!1,A=!1):A=!0;break;case eT.CODE_SHIFT:d=!0,n=eT.CODE_CODE_B;break;case eT.CODE_CODE_B:n=eT.CODE_CODE_B;break;case eT.CODE_CODE_C:n=eT.CODE_CODE_C;break;case eT.CODE_STOP:c=!0}break;case eT.CODE_CODE_B:if(m<96)A===C?u+=String.fromCharCode(32+m):u+=String.fromCharCode(32+m+128),A=!1;else switch(m!==eT.CODE_STOP&&(E=!1),m){case eT.CODE_FNC_1:i&&(0===u.length?u+="]C1":u+="\x1d");break;case eT.CODE_FNC_2:case eT.CODE_FNC_3:break;case eT.CODE_FNC_4_B:!C&&A?(C=!0,A=!1):C&&A?(C=!1,A=!1):A=!0;break;case eT.CODE_SHIFT:d=!0,n=eT.CODE_CODE_A;break;case eT.CODE_CODE_A:n=eT.CODE_CODE_A;break;case eT.CODE_CODE_C:n=eT.CODE_CODE_C;break;case eT.CODE_STOP:c=!0}break;case eT.CODE_CODE_C:if(m<100)m<10&&(u+="0"),u+=m;else switch(m!==eT.CODE_STOP&&(E=!1),m){case eT.CODE_FNC_1:i&&(0===u.length?u+="]C1":u+="\x1d");break;case eT.CODE_CODE_A:n=eT.CODE_CODE_A;break;case eT.CODE_CODE_B:n=eT.CODE_CODE_B;break;case eT.CODE_STOP:c=!0}}e&&(n=n===eT.CODE_CODE_A?eT.CODE_CODE_B:eT.CODE_CODE_A)}let x=f-h;if(f=t.getNextUnset(f),!t.isRange(f,Math.min(t.getSize(),f+(f-h)/2),!1))throw new W;if((w-=y*g)%103!==g)throw new R;let b=u.length;if(0===b)throw new W;b>0&&E&&(u=n===eT.CODE_CODE_C?u.substring(0,b-2):u.substring(0,b-1));let v=(o[1]+o[0])/2,S=h+x/2,I=l.length,_=new Uint8Array(I);for(let e=0;e<I;e++)_[e]=l[e];return new et(u,_,0,[new eg(v,e),new eg(S,e)],er.CODE_128,new Date().getTime())}}eT.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],eT.MAX_AVG_VARIANCE=.25,eT.MAX_INDIVIDUAL_VARIANCE=.7,eT.CODE_SHIFT=98,eT.CODE_CODE_C=99,eT.CODE_CODE_B=100,eT.CODE_CODE_A=101,eT.CODE_FNC_1=102,eT.CODE_FNC_2=97,eT.CODE_FNC_3=96,eT.CODE_FNC_4_A=101,eT.CODE_FNC_4_B=100,eT.CODE_START_A=103,eT.CODE_START_B=104,eT.CODE_START_C=105,eT.CODE_STOP=106;class eN extends e_{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,r){let n,i,o,a=this.counters;a.fill(0),this.decodeRowResult="";let s=eN.findAsteriskPattern(t,a),l=t.getNextSet(s[1]),c=t.getSize();do{eN.recordPattern(t,l,a);let e=eN.toNarrowWidePattern(a);if(e<0)throw new W;for(let t of(n=eN.patternToChar(e),this.decodeRowResult+=n,i=l,a))l+=t;l=t.getNextSet(l)}while("*"!==n);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let d=0;for(let e of a)d+=e;let u=l-i-d;if(l!==c&&2*u<d)throw new W;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let r=0;r<e;r++)t+=eN.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(r));if(this.decodeRowResult.charAt(e)!==eN.ALPHABET_STRING.charAt(t%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new W;o=this.extendedMode?eN.decodeExtended(this.decodeRowResult):this.decodeRowResult;let h=(s[1]+s[0])/2,f=i+d/2;return new et(o,null,0,[new eg(h,e),new eg(f,e)],er.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let r=e.getSize(),n=e.getNextSet(0),i=0,o=n,a=!1,s=t.length;for(let l=n;l<r;l++)if(e.get(l)!==a)t[i]++;else{if(i===s-1){if(this.toNarrowWidePattern(t)===eN.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((l-o)/2)),o,!1))return[o,l];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,a=!a}throw new W}static toNarrowWidePattern(e){let t,r=e.length,n=0;do{let i=2147483647;for(let t of e)t<i&&t>n&&(i=t);n=i,t=0;let o=0,a=0;for(let i=0;i<r;i++){let s=e[i];s>n&&(a|=1<<r-1-i,t++,o+=s)}if(3===t){for(let i=0;i<r&&t>0;i++){let r=e[i];if(r>n&&(t--,2*r>=o))return -1}return a}}while(t>3);return -1}static patternToChar(e){for(let t=0;t<eN.CHARACTER_ENCODINGS.length;t++)if(eN.CHARACTER_ENCODINGS[t]===e)return eN.ALPHABET_STRING.charAt(t);if(e===eN.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(e){let t=e.length,r="";for(let n=0;n<t;n++){let t=e.charAt(n);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(n+1),o="\0";switch(t){case"+":if(i>="A"&&i<="Z")o=String.fromCharCode(i.charCodeAt(0)+32);else throw new F;break;case"$":if(i>="A"&&i<="Z")o=String.fromCharCode(i.charCodeAt(0)-64);else throw new F;break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else if("X"===i||"Y"===i||"Z"===i)o="\x7f";else throw new F;break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else if("Z"===i)o=":";else throw new F}r+=o,n++}else r+=t}return r}}eN.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",eN.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],eN.ASTERISK_ENCODING=148;class eR extends e_{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,r){let n=this.decodeStart(t),i=this.decodeEnd(t),o=new Y;eR.decodeMiddle(t,n[1],i[0],o);let a=o.toString(),s=null;null!=r&&(s=r.get(k.ALLOWED_LENGTHS)),null==s&&(s=eR.DEFAULT_ALLOWED_LENGTHS);let l=a.length,c=!1,d=0;for(let e of s){if(l===e){c=!0;break}e>d&&(d=e)}if(!c&&l>d&&(c=!0),!c)throw new F;return new et(a,null,0,[new eg(n[1],e),new eg(i[0],e)],er.ITF,new Date().getTime())}static decodeMiddle(e,t,r,n){let i=new Int32Array(10),o=new Int32Array(5),a=new Int32Array(5);for(i.fill(0),o.fill(0),a.fill(0);t<r;){e_.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;o[e]=i[t],a[e]=i[t+1]}let r=eR.decodeDigit(o);n.append(r.toString()),r=this.decodeDigit(a),n.append(r.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=eR.skipWhiteSpace(e),r=eR.findGuardPattern(e,t,eR.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,t){let r=10*this.narrowLineWidth;r=r<t?r:t;for(let n=t-1;r>0&&n>=0&&!e.get(n);n--)r--;if(0!==r)throw new W}static skipWhiteSpace(e){let t=e.getSize(),r=e.getNextSet(0);if(r===t)throw new W;return r}decodeEnd(e){e.reverse();try{let t,r=eR.skipWhiteSpace(e);try{t=eR.findGuardPattern(e,r,eR.END_PATTERN_REVERSED[0])}catch(n){n instanceof W&&(t=eR.findGuardPattern(e,r,eR.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,t[0]);let n=t[0];return t[0]=e.getSize()-t[1],t[1]=e.getSize()-n,t}finally{e.reverse()}}static findGuardPattern(e,t,r){let n=r.length,i=new Int32Array(n),o=e.getSize(),a=!1,s=0,l=t;i.fill(0);for(let c=t;c<o;c++)if(e.get(c)!==a)i[s]++;else{if(s===n-1){if(e_.patternMatchVariance(i,r,eR.MAX_INDIVIDUAL_VARIANCE)<eR.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],D.arraycopy(i,2,i,0,s-1),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,a=!a}throw new W}static decodeDigit(e){let t=eR.MAX_AVG_VARIANCE,r=-1,n=eR.PATTERNS.length;for(let i=0;i<n;i++){let n=eR.PATTERNS[i],o=e_.patternMatchVariance(e,n,eR.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,r=i):o===t&&(r=-1)}if(r>=0)return r%10;throw new W}}eR.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],eR.MAX_AVG_VARIANCE=.38,eR.MAX_INDIVIDUAL_VARIANCE=.5,eR.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],eR.START_PATTERN=Int32Array.from([1,1,1,1]),eR.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class eM extends e_{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,r=!1,n=0,i=Int32Array.from([0,0,0]);for(;!r;){i=Int32Array.from([0,0,0]);let o=(t=eM.findGuardPattern(e,n,!1,this.START_END_PATTERN,i))[0],a=o-((n=t[1])-o);a>=0&&(r=e.isRange(a,o,!1))}return t}static checkChecksum(e){return eM.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return eM.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-48;if(t<0||t>9)throw new F;r+=t}r*=3;for(let n=t-2;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-48;if(t<0||t>9)throw new F;r+=t}return(1e3-r)%10}static decodeEnd(e,t){return eM.findGuardPattern(e,t,!1,eM.START_END_PATTERN,new Int32Array(eM.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,r,n){return this.findGuardPattern(e,t,r,n,new Int32Array(n.length))}static findGuardPattern(e,t,r,n,i){let o=e.getSize();t=r?e.getNextUnset(t):e.getNextSet(t);let a=0,s=t,l=n.length,c=r;for(let r=t;r<o;r++)if(e.get(r)!==c)i[a]++;else{if(a===l-1){if(e_.patternMatchVariance(i,n,eM.MAX_INDIVIDUAL_VARIANCE)<eM.MAX_AVG_VARIANCE)return Int32Array.from([s,r]);s+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<a-1;t++)i[t]=e[t];i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,c=!c}throw new W}static decodeDigit(e,t,r,n){this.recordPattern(e,r,t);let i=this.MAX_AVG_VARIANCE,o=-1,a=n.length;for(let e=0;e<a;e++){let r=n[e],a=e_.patternMatchVariance(t,r,eM.MAX_INDIVIDUAL_VARIANCE);a<i&&(i=a,o=e)}if(o>=0)return o;throw new W}}eM.MAX_AVG_VARIANCE=.48,eM.MAX_INDIVIDUAL_VARIANCE=.7,eM.START_END_PATTERN=Int32Array.from([1,1,1]),eM.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),eM.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),eM.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class eD{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),o=n.toString(),a=eD.parseExtensionString(o),s=new et(o,null,0,[new eg((r[0]+r[1])/2,e),new eg(i,e)],er.UPC_EAN_EXTENSION,new Date().getTime());return null!=a&&s.putAllMetadata(a),s}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],a=0;for(let t=0;t<5&&o<i;t++){let i=eM.decodeDigit(e,n,o,eM.L_AND_G_PATTERNS);for(let e of(r+=String.fromCharCode(48+i%10),n))o+=e;i>=10&&(a|=1<<4-t),4!==t&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(5!==r.length)throw new W;let s=this.determineCheckDigit(a);if(eD.extensionChecksum(r.toString())!==s)throw new W;return o}static extensionChecksum(e){let t=e.length,r=0;for(let n=t-2;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-48;r*=3;for(let n=t-1;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-48;return(r*=3)%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new W}static parseExtensionString(e){if(5!==e.length)return null;let t=eD.parseExtension5String(e);return null==t?null:new Map([[en.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let r=parseInt(e.substring(1)),n=(r/100).toString(),i=r%100;return t+n+"."+(i<10?"0"+i:i.toString())}}class eO{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),o=n.toString(),a=eO.parseExtensionString(o),s=new et(o,null,0,[new eg((r[0]+r[1])/2,e),new eg(i,e)],er.UPC_EAN_EXTENSION,new Date().getTime());return null!=a&&s.putAllMetadata(a),s}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],a=0;for(let t=0;t<2&&o<i;t++){let i=eM.decodeDigit(e,n,o,eM.L_AND_G_PATTERNS);for(let e of(r+=String.fromCharCode(48+i%10),n))o+=e;i>=10&&(a|=1<<1-t),1!==t&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(2!==r.length||parseInt(r.toString())%4!==a)throw new W;return o}static parseExtensionString(e){return 2!==e.length?null:new Map([[en.ISSUE_NUMBER,parseInt(e)]])}}class eP{static decodeRow(e,t,r){let n=eM.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new eD().decodeRow(e,t,n)}catch(r){return new eO().decodeRow(e,t,n)}}}eP.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class eL extends eM{constructor(){super(),this.decodeRowStringBuffer="",eL.L_AND_G_PATTERNS=eL.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=eL.L_PATTERNS[e-10],r=new Int32Array(t.length);for(let e=0;e<t.length;e++)r[e]=t[t.length-e-1];eL.L_AND_G_PATTERNS[e]=r}}decodeRow(e,t,r){let n=eL.findStartGuardPattern(t),i=null==r?null:r.get(k.NEED_RESULT_POINT_CALLBACK);if(null!=i){let t=new eg((n[0]+n[1])/2,e);i.foundPossibleResultPoint(t)}let o=this.decodeMiddle(t,n,this.decodeRowStringBuffer),a=o.rowOffset,s=o.resultString;if(null!=i){let t=new eg(a,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,a);if(null!=i){let t=new eg((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let c=l[1],d=c+(c-l[0]);if(d>=t.getSize()||!t.isRange(c,d,!1))throw new W;let u=s.toString();if(u.length<8)throw new F;if(!eL.checkChecksum(u))throw new R;let h=(n[1]+n[0])/2,f=(l[1]+l[0])/2,p=this.getBarcodeFormat(),g=new et(u,null,0,[new eg(h,e),new eg(f,e)],p,new Date().getTime()),m=0;try{let r=eP.decodeRow(e,t,l[1]);g.putMetadata(en.UPC_EAN_EXTENSION,r.getText()),g.putAllMetadata(r.getResultMetadata()),g.addResultPoints(r.getResultPoints()),m=r.getText().length}catch(e){}let w=null==r?null:r.get(k.ALLOWED_EAN_EXTENSIONS);if(null!=w){let e=!1;for(let t in w)if(m.toString()===t){e=!0;break}if(!e)throw new W}return g}decodeEnd(e,t){return eL.findGuardPattern(e,t,!1,eL.START_END_PATTERN,new Int32Array(eL.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return eL.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return eL.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-48;if(t<0||t>9)throw new F;r+=t}r*=3;for(let n=t-2;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-48;if(t<0||t>9)throw new F;r+=t}return(1e3-r)%10}}class ej extends eL{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],a=0;for(let t=0;t<6&&o<i;t++){let i=eL.decodeDigit(e,n,o,eL.L_AND_G_PATTERNS);for(let e of(r+=String.fromCharCode(48+i%10),n))o+=e;i>=10&&(a|=1<<5-t)}r=ej.determineFirstDigit(r,a),o=eL.findGuardPattern(e,o,!0,eL.MIDDLE_PATTERN,new Int32Array(eL.MIDDLE_PATTERN.length).fill(0))[1];for(let t=0;t<6&&o<i;t++){let t=eL.decodeDigit(e,n,o,eL.L_PATTERNS);for(let e of(r+=String.fromCharCode(48+t),n))o+=e}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return er.EAN_13}static determineFirstDigit(e,t){for(let r=0;r<10;r++)if(t===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode(48+r)+e;throw new W}}ej.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class eB extends eL{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1];for(let t=0;t<4&&o<i;t++){let t=eL.decodeDigit(e,n,o,eL.L_PATTERNS);for(let e of(r+=String.fromCharCode(48+t),n))o+=e}o=eL.findGuardPattern(e,o,!0,eL.MIDDLE_PATTERN,new Int32Array(eL.MIDDLE_PATTERN.length).fill(0))[1];for(let t=0;t<4&&o<i;t++){let t=eL.decodeDigit(e,n,o,eL.L_PATTERNS);for(let e of(r+=String.fromCharCode(48+t),n))o+=e}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return er.EAN_8}}class ek extends eL{constructor(){super(...arguments),this.ean13Reader=new ej}getBarcodeFormat(){return er.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,r))}decodeMiddle(e,t,r){return this.ean13Reader.decodeMiddle(e,t,r)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let r=new et(t.substring(1),null,null,e.getResultPoints(),er.UPC_A);return null!=e.getResultMetadata()&&r.putAllMetadata(e.getResultMetadata()),r}throw new W}reset(){this.ean13Reader.reset()}}class eF extends eL{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters.map(e=>e);n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],a=0;for(let t=0;t<6&&o<i;t++){let i=eF.decodeDigit(e,n,o,eF.L_AND_G_PATTERNS);for(let e of(r+=String.fromCharCode(48+i%10),n))o+=e;i>=10&&(a|=1<<5-t)}return{rowOffset:o,resultString:eF.determineNumSysAndCheckDigit(r,a)}}decodeEnd(e,t){return eF.findGuardPatternWithoutCounters(e,t,!0,eF.MIDDLE_END_PATTERN)}checkChecksum(e){return eL.checkChecksum(eF.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return String.fromCharCode(48+r)+e+String.fromCharCode(48+n);throw W.getNotFoundInstance()}getBarcodeFormat(){return er.UPC_E}static convertUPCEtoUPCA(e){let t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),r=new Y;r.append(e.charAt(0));let n=t[5];switch(n){case 0:case 1:case 2:r.appendChars(t,0,2),r.append(n),r.append("0000"),r.appendChars(t,2,3);break;case 3:r.appendChars(t,0,3),r.append("00000"),r.appendChars(t,3,2);break;case 4:r.appendChars(t,0,4),r.append("00000"),r.append(t[4]);break;default:r.appendChars(t,0,5),r.append("0000"),r.append(n)}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}eF.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),eF.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class eU extends e_{constructor(e){super();let t=null==e?null:e.get(k.POSSIBLE_FORMATS),r=[];null==t?(r.push(new ej),r.push(new ek),r.push(new eB),r.push(new eF)):(t.indexOf(er.EAN_13)>-1&&r.push(new ej),t.indexOf(er.UPC_A)>-1&&r.push(new ek),t.indexOf(er.EAN_8)>-1&&r.push(new eB),t.indexOf(er.UPC_E)>-1&&r.push(new eF)),this.readers=r}decodeRow(e,t,r){for(let n of this.readers)try{let i=n.decodeRow(e,t,r),o=i.getBarcodeFormat()===er.EAN_13&&"0"===i.getText().charAt(0),a=null==r?null:r.get(k.POSSIBLE_FORMATS),s=null==a||a.includes(er.UPC_A);if(o&&s){let e=i.getRawBytes(),t=new et(i.getText().substring(1),e,e?e.length:null,i.getResultPoints(),er.UPC_A);return t.putAllMetadata(i.getResultMetadata()),t}return i}catch(e){}throw new W}reset(){for(let e of this.readers)e.reset()}}class eH extends e_{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=[,,,,],this.evenRoundingErrors=[,,,,],this.oddCounts=Array(this.dataCharacterCounters.length/2),this.evenCounts=Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let r=0;r<t.length;r++)if(e_.patternMatchVariance(e,t[r],eH.MAX_INDIVIDUAL_VARIANCE)<eH.MAX_AVG_VARIANCE)return r;throw new W}static count(e){return ef.sum(new Int32Array(e))}static increment(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]>n&&(n=t[i],r=i);e[r]++}static decrement(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]<n&&(n=t[i],r=i);e[r]--}static isFinderPattern(e){let t=e[0]+e[1],r=t+e[2]+e[3],n=t/r;if(n>=eH.MIN_FINDER_PATTERN_RATIO&&n<=eH.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let n of e)n>r&&(r=n),n<t&&(t=n);return r<10*t}return!1}}eH.MAX_AVG_VARIANCE=.2,eH.MAX_INDIVIDUAL_VARIANCE=.45,eH.MIN_FINDER_PATTERN_RATIO=9.5/12,eH.MAX_FINDER_PATTERN_RATIO=12.5/14;class ez{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){return e instanceof ez&&this.value===e.value&&this.checksumPortion===e.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class eV{constructor(e,t,r,n,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=[],this.resultPoints.push(new eg(r,i)),this.resultPoints.push(new eg(n,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){return e instanceof eV&&this.value===e.value}hashCode(){return this.value}}class eY{constructor(){}static getRSSvalue(e,t,r){let n=0;for(let t of e)n+=t;let i=0,o=0,a=e.length;for(let s=0;s<a-1;s++){let l;for(l=1,o|=1<<s;l<e[s];l++,o&=~(1<<s)){let e=eY.combins(n-l-1,a-s-2);if(r&&0===o&&n-l-(a-s-1)>=a-s-1&&(e-=eY.combins(n-l-(a-s),a-s-2)),a-s-1>1){let r=0;for(let e=n-l-(a-s-2);e>t;e--)r+=eY.combins(n-l-e-1,a-s-3);e-=r*(a-1-s)}else n-l>t&&e--;i+=e}n-=l}return i}static combins(e,t){let r,n;e-t>t?(n=t,r=e-t):(n=e-t,r=t);let i=1,o=1;for(let t=e;t>r;t--)i*=t,o<=n&&(i/=o,o++);for(;o<=n;)i/=o,o++;return i}}class eG{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let r=new B(12*t),n=0,i=e[0].getRightChar().getValue();for(let e=11;e>=0;--e)(i&1<<e)!=0&&r.set(n),n++;for(let t=1;t<e.length;++t){let i=e[t],o=i.getLeftChar().getValue();for(let e=11;e>=0;--e)(o&1<<e)!=0&&r.set(n),n++;if(null!=i.getRightChar()){let e=i.getRightChar().getValue();for(let t=11;t>=0;--t)(e&1<<t)!=0&&r.set(n),n++}}return r}}class eW{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class eX{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class eq extends eX{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===eq.FNC1}}eq.FNC1="$";class eZ extends eX{constructor(e,t,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class eQ extends eX{constructor(e,t,r){if(super(e),t<0||t>10||r<0||r>10)throw new F;this.firstDigit=t,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===eQ.FNC1}isSecondDigitFNC1(){return this.secondDigit===eQ.FNC1}isAnyFNC1(){return this.firstDigit===eQ.FNC1||this.secondDigit===eQ.FNC1}}eQ.FNC1=10;class eK{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new W;let t=e.substring(0,2);for(let r of eK.TWO_DIGIT_DATA_LENGTH)if(r[0]===t){if(r[1]===eK.VARIABLE_LENGTH)return eK.processVariableAI(2,r[2],e);return eK.processFixedAI(2,r[1],e)}if(e.length<3)throw new W;let r=e.substring(0,3);for(let t of eK.THREE_DIGIT_DATA_LENGTH)if(t[0]===r){if(t[1]===eK.VARIABLE_LENGTH)return eK.processVariableAI(3,t[2],e);return eK.processFixedAI(3,t[1],e)}for(let t of eK.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(t[0]===r){if(t[1]===eK.VARIABLE_LENGTH)return eK.processVariableAI(4,t[2],e);return eK.processFixedAI(4,t[1],e)}if(e.length<4)throw new W;let n=e.substring(0,4);for(let t of eK.FOUR_DIGIT_DATA_LENGTH)if(t[0]===n){if(t[1]===eK.VARIABLE_LENGTH)return eK.processVariableAI(4,t[2],e);return eK.processFixedAI(4,t[1],e)}throw new W}static processFixedAI(e,t,r){if(r.length<e)throw new W;let n=r.substring(0,e);if(r.length<e+t)throw new W;let i=r.substring(e,e+t),o=r.substring(e+t),a="("+n+")"+i,s=eK.parseFieldsInGeneralPurpose(o);return null==s?a:a+s}static processVariableAI(e,t,r){let n,i=r.substring(0,e);n=r.length<e+t?r.length:e+t;let o=r.substring(e,n),a=r.substring(n),s="("+i+")"+o,l=eK.parseFieldsInGeneralPurpose(a);return null==l?s:s+l}}eK.VARIABLE_LENGTH=[],eK.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",eK.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",eK.VARIABLE_LENGTH,20],["22",eK.VARIABLE_LENGTH,29],["30",eK.VARIABLE_LENGTH,8],["37",eK.VARIABLE_LENGTH,8],["90",eK.VARIABLE_LENGTH,30],["91",eK.VARIABLE_LENGTH,30],["92",eK.VARIABLE_LENGTH,30],["93",eK.VARIABLE_LENGTH,30],["94",eK.VARIABLE_LENGTH,30],["95",eK.VARIABLE_LENGTH,30],["96",eK.VARIABLE_LENGTH,30],["97",eK.VARIABLE_LENGTH,3],["98",eK.VARIABLE_LENGTH,30],["99",eK.VARIABLE_LENGTH,30]],eK.THREE_DIGIT_DATA_LENGTH=[["240",eK.VARIABLE_LENGTH,30],["241",eK.VARIABLE_LENGTH,30],["242",eK.VARIABLE_LENGTH,6],["250",eK.VARIABLE_LENGTH,30],["251",eK.VARIABLE_LENGTH,30],["253",eK.VARIABLE_LENGTH,17],["254",eK.VARIABLE_LENGTH,20],["400",eK.VARIABLE_LENGTH,30],["401",eK.VARIABLE_LENGTH,30],["402",17],["403",eK.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",eK.VARIABLE_LENGTH,20],["421",eK.VARIABLE_LENGTH,15],["422",3],["423",eK.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],eK.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",eK.VARIABLE_LENGTH,15],["391",eK.VARIABLE_LENGTH,18],["392",eK.VARIABLE_LENGTH,15],["393",eK.VARIABLE_LENGTH,18],["703",eK.VARIABLE_LENGTH,30]],eK.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",eK.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",eK.VARIABLE_LENGTH,20],["8003",eK.VARIABLE_LENGTH,30],["8004",eK.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",eK.VARIABLE_LENGTH,30],["8008",eK.VARIABLE_LENGTH,12],["8018",18],["8020",eK.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",eK.VARIABLE_LENGTH,70],["8200",eK.VARIABLE_LENGTH,70]];class e${constructor(e){this.buffer=new Y,this.information=e}decodeAllCodes(e,t){let r=t,n=null;for(;;){let t=this.decodeGeneralPurposeField(r,n),i=eK.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),n=t.isRemaining()?""+t.getRemainingValue():null,r===t.getNewPosition())break;r=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return 0===t?new eQ(this.information.getSize(),eQ.FNC1,eQ.FNC1):new eQ(this.information.getSize(),t-1,eQ.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new eQ(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return e$.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,r){let n=0;for(let i=0;i<r;++i)e.get(t+i)&&(n|=1<<r-i-1);return n}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let r=this.parseBlocks();return null!=r&&r.isRemaining()?new eZ(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new eZ(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let r=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),!(r!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1())return new eW(!0,e.isSecondDigitFNC1()?new eZ(this.current.getPosition(),this.buffer.toString()):new eZ(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()));if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return new eW(!0,new eZ(this.current.getPosition(),this.buffer.toString()));this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new eW(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1())return new eW(!0,new eZ(this.current.getPosition(),this.buffer.toString()));this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new eW(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1())return new eW(!0,new eZ(this.current.getPosition(),this.buffer.toString()));this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new eW(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,8);return n>=232&&n<253}decodeIsoIec646(e){let t,r=this.extractNumericValueFromBitArray(e,5);if(15===r)return new eq(e+5,eq.FNC1);if(r>=5&&r<15)return new eq(e+5,"0"+(r-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new eq(e+7,""+(n+1));if(n>=90&&n<116)return new eq(e+7,""+(n+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:t="!";break;case 233:t='"';break;case 234:t="%";break;case 235:t="&";break;case 236:t="'";break;case 237:t="(";break;case 238:t=")";break;case 239:t="*";break;case 240:t="+";break;case 241:t=",";break;case 242:t="-";break;case 243:t=".";break;case 244:t="/";break;case 245:t=":";break;case 246:t=";";break;case 247:t="<";break;case 248:t="=";break;case 249:t=">";break;case 250:t="?";break;case 251:t="_";break;case 252:t=" ";break;default:throw new F}return new eq(e+8,t)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let t,r=this.extractNumericValueFromBitArray(e,5);if(15===r)return new eq(e+5,eq.FNC1);if(r>=5&&r<15)return new eq(e+5,"0"+(r-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new eq(e+6,""+(n+33));switch(n){case 58:t="*";break;case 59:t=",";break;case 60:t="-";break;case 61:t=".";break;case 62:t="/";break;default:throw new ed("Decoding invalid alphanumeric value: "+n)}return new eq(e+6,t)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class eJ{constructor(e){this.information=e,this.generalDecoder=new e$(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class e1 extends eJ{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,r)}encodeCompressedGtinWithoutAI(e,t,r){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n)}e1.appendCheckDigit(e,r)}static appendCheckDigit(e,t){let r=0;for(let n=0;n<13;n++){let i=e.charAt(n+t).charCodeAt(0)-48;r+=(1&n)==0?3*i:i}10==(r=10-r%10)&&(r=0),e.append(r)}}e1.GTIN_SIZE=40;class e0 extends e1{constructor(e){super(e)}parseInformation(){let e=new Y;e.append("(01)");let t=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(e0.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,e0.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,e0.HEADER_SIZE+44)}}e0.HEADER_SIZE=4;class e2 extends eJ{constructor(e){super(e)}parseInformation(){let e=new Y;return this.getGeneralDecoder().decodeAllCodes(e,e2.HEADER_SIZE)}}e2.HEADER_SIZE=5;class e4 extends e1{constructor(e){super(e)}encodeCompressedWeight(e,t,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,r);this.addWeightCode(e,n);let i=this.checkWeight(n),o=1e5;for(let t=0;t<5;++t)i/o==0&&e.append("0"),o/=10;e.append(i)}}class e3 extends e4{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=e3.HEADER_SIZE+e4.GTIN_SIZE+e3.WEIGHT_SIZE)throw new W;let e=new Y;return this.encodeCompressedGtin(e,e3.HEADER_SIZE),this.encodeCompressedWeight(e,e3.HEADER_SIZE+e4.GTIN_SIZE,e3.WEIGHT_SIZE),e.toString()}}e3.HEADER_SIZE=5,e3.WEIGHT_SIZE=15;class e8 extends e3{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class e6 extends e3{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class e5 extends e1{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<e5.HEADER_SIZE+e1.GTIN_SIZE)throw new W;let e=new Y;this.encodeCompressedGtin(e,e5.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(e5.HEADER_SIZE+e1.GTIN_SIZE,e5.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(e5.HEADER_SIZE+e1.GTIN_SIZE+e5.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}e5.HEADER_SIZE=8,e5.LAST_DIGIT_SIZE=2;class e7 extends e1{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<e7.HEADER_SIZE+e1.GTIN_SIZE)throw new W;let e=new Y;this.encodeCompressedGtin(e,e7.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(e7.HEADER_SIZE+e1.GTIN_SIZE,e7.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e7.HEADER_SIZE+e1.GTIN_SIZE+e7.LAST_DIGIT_SIZE,e7.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(e7.HEADER_SIZE+e1.GTIN_SIZE+e7.LAST_DIGIT_SIZE+e7.FIRST_THREE_DIGITS_SIZE,null);return e.append(n.getNewString()),e.toString()}}e7.HEADER_SIZE=8,e7.LAST_DIGIT_SIZE=2,e7.FIRST_THREE_DIGITS_SIZE=10;class e9 extends e4{constructor(e,t,r){super(e),this.dateCode=r,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=e9.HEADER_SIZE+e9.GTIN_SIZE+e9.WEIGHT_SIZE+e9.DATE_SIZE)throw new W;let e=new Y;return this.encodeCompressedGtin(e,e9.HEADER_SIZE),this.encodeCompressedWeight(e,e9.HEADER_SIZE+e9.GTIN_SIZE,e9.WEIGHT_SIZE),this.encodeCompressedDate(e,e9.HEADER_SIZE+e9.GTIN_SIZE+e9.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,e9.DATE_SIZE);if(38400==r)return;e.append("("),e.append(this.dateCode),e.append(")");let n=r%32,i=(r/=32)%12+1,o=r/=12;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),n/10==0&&e.append("0"),e.append(n)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function te(e){try{if(e.get(1))return new e0(e);if(!e.get(2))return new e2(e);switch(e$.extractNumericValueFromBitArray(e,1,4)){case 4:return new e8(e);case 5:return new e6(e)}switch(e$.extractNumericValueFromBitArray(e,1,5)){case 12:return new e5(e);case 13:return new e7(e)}switch(e$.extractNumericValueFromBitArray(e,1,7)){case 56:return new e9(e,"310","11");case 57:return new e9(e,"320","11");case 58:return new e9(e,"310","13");case 59:return new e9(e,"320","13");case 60:return new e9(e,"310","15");case 61:return new e9(e,"320","15");case 62:return new e9(e,"310","17");case 63:return new e9(e,"320","17")}}catch(t){throw console.log(t),new ed("unknown decoder: "+e)}}e9.HEADER_SIZE=8,e9.WEIGHT_SIZE=20,e9.DATE_SIZE=16;class tt{constructor(e,t,r,n){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof tt&&tt.equalsOrNull(e.leftchar,t.leftchar)&&tt.equalsOrNull(e.rightchar,t.rightchar)&&tt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:tt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class tr{constructor(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof tr&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){let r;if(e&&t)return e.forEach((e,n)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(r=!0)})}),r}}class tn extends eH{constructor(e){super(...arguments),this.pairs=Array(tn.MAX_PAIRS),this.rows=[],this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,r){this.pairs.length=0,this.startFromEven=!1;try{return tn.constructResult(this.decodeRow2pairs(e,t))}catch(e){this.verbose&&console.log(e)}return this.pairs.length=0,this.startFromEven=!0,tn.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let r,n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(e){if(e instanceof W){if(!this.pairs.length)throw new W;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(e,!1),r){let e=this.checkRowsBoolean(!1);if(null!=e||null!=(e=this.checkRowsBoolean(!0)))return e}throw new W}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows([],0)}catch(e){this.verbose&&console.log(e)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];for(let t of(this.pairs.length=0,e))this.pairs.push(t.getPairs());if(this.pairs.push(t.getPairs()),!tn.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let n=Array(e);n.push(t);try{return this.checkRows(n,r+1)}catch(e){this.verbose&&console.log(e)}}throw new W}static isValidSequence(e){for(let t of tn.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let r=!0;for(let n=0;n<e.length;n++)if(e[n].getFinderPattern().getValue()!=t[n]){r=!1;break}if(r)return!0}return!1}storeRow(e,t){let r=0,n=!1,i=!1;for(;r<this.rows.length;){let t=this.rows[r];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}n=t.isEquivalent(this.pairs),r++}i||n||tn.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new tr(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let r of t)if(r.getPairs().length!==e.length){for(let t of r.getPairs())for(let r of e)if(tt.equals(t,r))break}}static isPartialRow(e,t){for(let r of t){let t=!0;for(let n of e){let e=!1;for(let t of r.getPairs())if(n.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=te(eG.buildBitArray(e)).parseInformation(),r=e[0].getFinderPattern().getResultPoints(),n=e[e.length-1].getFinderPattern().getResultPoints();return new et(t,null,null,[r[0],r[1],n[0],n[1]],er.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),r=e.getRightChar();if(null==r)return!1;let n=r.getChecksumPortion(),i=2;for(let e=1;e<this.pairs.size();++e){let t=this.pairs.get(e);n+=t.getLeftChar().getChecksumPortion(),i++;let r=t.getRightChar();null!=r&&(n+=r.getChecksumPortion(),i++)}return 211*(i-4)+(n%=211)==t.getValue()}static getNextSecondBar(e,t){let r;return e.get(t)?(r=e.getNextUnset(t),r=e.getNextSet(r)):(r=e.getNextSet(t),r=e.getNextUnset(r)),r}retrieveNextPair(e,t,r){let n,i,o=t.length%2==0;this.startFromEven&&(o=!o);let a=!0,s=-1;do this.findNextPair(e,t,s),null==(n=this.parseFoundFinderPattern(e,r,o))?s=tn.getNextSecondBar(e,this.startEnd[0]):a=!1;while(a);let l=this.decodeDataCharacter(e,n,o,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new W;try{i=this.decodeDataCharacter(e,n,o,!1)}catch(e){i=null,this.verbose&&console.log(e)}return new tt(l,i,n,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,r){let n,i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=e.getSize();n=r>=0?r:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let a=t.length%2!=0;this.startFromEven&&(a=!a);let s=!1;for(;n<o&&(s=!e.get(n));)n++;let l=0,c=n;for(let t=n;t<o;t++)if(e.get(t)!=s)i[l]++;else{if(3==l){if(a&&tn.reverseCounters(i),tn.isFinderPattern(i)){this.startEnd[0]=c,this.startEnd[1]=t;return}a&&tn.reverseCounters(i),c+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,s=!s}throw new W}static reverseCounters(e){let t=e.length;for(let r=0;r<t/2;++r){let n=e[r];e[r]=e[t-r-1],e[t-r-1]=n}}parseFoundFinderPattern(e,t,r){let n,i,o,a;if(r){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,n=this.startEnd[0]-t,i=t,o=this.startEnd[1]}else i=this.startEnd[0],n=(o=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];let s=this.getDecodeFinderCounters();D.arraycopy(s,0,s,1,s.length-1),s[0]=n;try{a=this.parseFinderValue(s,tn.FINDER_PATTERNS)}catch(e){return null}return new eV(a,[i,o],i,o,t)}decodeDataCharacter(e,t,r,n){let i=this.getDataCharacterCounters();for(let e=0;e<i.length;e++)i[e]=0;if(n)tn.recordPatternInReverse(e,t.getStartEnd()[0],i);else{tn.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let r=i[e];i[e]=i[t],i[t]=r}}let o=ef.sum(new Int32Array(i))/17,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(o-a)/a>.3)throw new W;let s=this.getOddCounts(),l=this.getEvenCounts(),c=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let e=0;e<i.length;e++){let t=1*i[e]/o,r=t+.5;if(r<1){if(t<.3)throw new W;r=1}else if(r>8){if(t>8.7)throw new W;r=8}let n=e/2;(1&e)==0?(s[n]=r,c[n]=t-r):(l[n]=r,d[n]=t-r)}this.adjustOddEvenCounts(17);let u=4*t.getValue()+(r?0:2)+(n?0:1)-1,h=0,f=0;for(let e=s.length-1;e>=0;e--){if(tn.isNotA1left(t,r,n)){let t=tn.WEIGHTS[u][2*e];f+=s[e]*t}h+=s[e]}let p=0;for(let e=l.length-1;e>=0;e--)if(tn.isNotA1left(t,r,n)){let t=tn.WEIGHTS[u][2*e+1];p+=l[e]*t}let g=f+p;if((1&h)!=0||h>13||h<4)throw new W;let m=(13-h)/2,w=tn.SYMBOL_WIDEST[m],y=eY.getRSSvalue(s,w,!0),E=eY.getRSSvalue(l,9-w,!1);return new ez(y*tn.EVEN_TOTAL_SUBSET[m]+E+tn.GSUM[m],g)}static isNotA1left(e,t,r){return!(0==e.getValue()&&t&&r)}adjustOddEvenCounts(e){let t=ef.sum(new Int32Array(this.getOddCounts())),r=ef.sum(new Int32Array(this.getEvenCounts())),n=!1,i=!1;t>13?i=!0:t<4&&(n=!0);let o=!1,a=!1;r>13?a=!0:r<4&&(o=!0);let s=t+r-e,l=(1&t)==1,c=(1&r)==0;if(1==s){if(l){if(c)throw new W;i=!0}else{if(!c)throw new W;a=!0}}else if(-1==s){if(l){if(c)throw new W;n=!0}else{if(!c)throw new W;o=!0}}else if(0==s){if(l){if(!c)throw new W;t<r?(n=!0,a=!0):(i=!0,o=!0)}else if(c)throw new W}else throw new W;if(n){if(i)throw new W;tn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&tn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new W;tn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&tn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tn.SYMBOL_WIDEST=[7,5,4,3,1],tn.EVEN_TOTAL_SUBSET=[4,20,52,104,204],tn.GSUM=[0,348,1388,2948,3988],tn.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],tn.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],tn.FINDER_PAT_A=0,tn.FINDER_PAT_B=1,tn.FINDER_PAT_C=2,tn.FINDER_PAT_D=3,tn.FINDER_PAT_E=4,tn.FINDER_PAT_F=5,tn.FINDER_PATTERN_SEQUENCES=[[tn.FINDER_PAT_A,tn.FINDER_PAT_A],[tn.FINDER_PAT_A,tn.FINDER_PAT_B,tn.FINDER_PAT_B],[tn.FINDER_PAT_A,tn.FINDER_PAT_C,tn.FINDER_PAT_B,tn.FINDER_PAT_D],[tn.FINDER_PAT_A,tn.FINDER_PAT_E,tn.FINDER_PAT_B,tn.FINDER_PAT_D,tn.FINDER_PAT_C],[tn.FINDER_PAT_A,tn.FINDER_PAT_E,tn.FINDER_PAT_B,tn.FINDER_PAT_D,tn.FINDER_PAT_D,tn.FINDER_PAT_F],[tn.FINDER_PAT_A,tn.FINDER_PAT_E,tn.FINDER_PAT_B,tn.FINDER_PAT_D,tn.FINDER_PAT_E,tn.FINDER_PAT_F,tn.FINDER_PAT_F],[tn.FINDER_PAT_A,tn.FINDER_PAT_A,tn.FINDER_PAT_B,tn.FINDER_PAT_B,tn.FINDER_PAT_C,tn.FINDER_PAT_C,tn.FINDER_PAT_D,tn.FINDER_PAT_D],[tn.FINDER_PAT_A,tn.FINDER_PAT_A,tn.FINDER_PAT_B,tn.FINDER_PAT_B,tn.FINDER_PAT_C,tn.FINDER_PAT_C,tn.FINDER_PAT_D,tn.FINDER_PAT_E,tn.FINDER_PAT_E],[tn.FINDER_PAT_A,tn.FINDER_PAT_A,tn.FINDER_PAT_B,tn.FINDER_PAT_B,tn.FINDER_PAT_C,tn.FINDER_PAT_C,tn.FINDER_PAT_D,tn.FINDER_PAT_E,tn.FINDER_PAT_F,tn.FINDER_PAT_F],[tn.FINDER_PAT_A,tn.FINDER_PAT_A,tn.FINDER_PAT_B,tn.FINDER_PAT_B,tn.FINDER_PAT_C,tn.FINDER_PAT_D,tn.FINDER_PAT_D,tn.FINDER_PAT_E,tn.FINDER_PAT_E,tn.FINDER_PAT_F,tn.FINDER_PAT_F]],tn.MAX_PAIRS=11;class ti extends ez{constructor(e,t,r){super(e,t),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class to extends eH{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,r){let n=this.decodePair(t,!1,e,r);to.addOrTally(this.possibleLeftPairs,n),t.reverse();let i=this.decodePair(t,!0,e,r);for(let e of(to.addOrTally(this.possibleRightPairs,i),t.reverse(),this.possibleLeftPairs))if(e.getCount()>1){for(let t of this.possibleRightPairs)if(t.getCount()>1&&to.checkChecksum(e,t))return to.constructResult(e,t)}throw new W}static addOrTally(e,t){if(null==t)return;let r=!1;for(let n of e)if(n.getValue()===t.getValue()){n.incrementCount(),r=!0;break}r||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let r=new String(4537077*e.getValue()+t.getValue()).toString(),n=new Y;for(let e=13-r.length;e>0;e--)n.append("0");n.append(r);let i=0;for(let e=0;e<13;e++){let t=n.charAt(e).charCodeAt(0)-48;i+=(1&e)==0?3*t:t}10==(i=10-i%10)&&(i=0),n.append(i.toString());let o=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new et(n.toString(),null,0,[o[0],o[1],a[0],a[1]],er.RSS_14,new Date().getTime())}static checkChecksum(e,t){let r=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,n=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(e,t,r,n){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,r,t,i),a=null==n?null:n.get(k.NEED_RESULT_POINT_CALLBACK);if(null!=a){let n=(i[0]+i[1])/2;t&&(n=e.getSize()-1-n),a.foundPossibleResultPoint(new eg(n,r))}let s=this.decodeDataCharacter(e,o,!0),l=this.decodeDataCharacter(e,o,!1);return new ti(1597*s.getValue()+l.getValue(),s.getChecksumPortion()+4*l.getChecksumPortion(),o)}catch(e){return null}}decodeDataCharacter(e,t,r){let n=this.getDataCharacterCounters();for(let e=0;e<n.length;e++)n[e]=0;if(r)e_.recordPatternInReverse(e,t.getStartEnd()[0],n);else{e_.recordPattern(e,t.getStartEnd()[1]+1,n);for(let e=0,t=n.length-1;e<t;e++,t--){let r=n[e];n[e]=n[t],n[t]=r}}let i=r?16:15,o=ef.sum(new Int32Array(n))/i,a=this.getOddCounts(),s=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let e=0;e<n.length;e++){let t=n[e]/o,r=Math.floor(t+.5);r<1?r=1:r>8&&(r=8);let i=Math.floor(e/2);(1&e)==0?(a[i]=r,l[i]=t-r):(s[i]=r,c[i]=t-r)}this.adjustOddEvenCounts(r,i);let d=0,u=0;for(let e=a.length-1;e>=0;e--)u*=9,u+=a[e],d+=a[e];let h=0,f=0;for(let e=s.length-1;e>=0;e--)h*=9,h+=s[e],f+=s[e];let p=u+3*h;if(r){if((1&d)!=0||d>12||d<4)throw new W;let e=(12-d)/2,t=to.OUTSIDE_ODD_WIDEST[e],r=eY.getRSSvalue(a,t,!1),n=eY.getRSSvalue(s,9-t,!0);return new ez(r*to.OUTSIDE_EVEN_TOTAL_SUBSET[e]+n+to.OUTSIDE_GSUM[e],p)}{if((1&f)!=0||f>10||f<4)throw new W;let e=(10-f)/2,t=to.INSIDE_ODD_WIDEST[e],r=eY.getRSSvalue(a,t,!0);return new ez(eY.getRSSvalue(s,9-t,!1)*to.INSIDE_ODD_TOTAL_SUBSET[e]+r+to.INSIDE_GSUM[e],p)}}findFinderPattern(e,t){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=e.getSize(),i=!1,o=0;for(;o<n&&t!==(i=!e.get(o));)o++;let a=0,s=o;for(let t=o;t<n;t++)if(e.get(t)!==i)r[a]++;else{if(3===a){if(eH.isFinderPattern(r))return[s,t];s+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,a--}else a++;r[a]=1,i=!i}throw new W}parseFoundFinderPattern(e,t,r,n){let i=e.get(n[0]),o=n[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;let a=n[0]-o,s=this.getDecodeFinderCounters(),l=new Int32Array(s.length);D.arraycopy(s,0,l,1,s.length-1),l[0]=a;let c=this.parseFinderValue(l,to.FINDER_PATTERNS),d=o,u=n[1];return r&&(d=e.getSize()-1-d,u=e.getSize()-1-u),new eV(c,[o,n[1]],d,u,t)}adjustOddEvenCounts(e,t){let r=ef.sum(new Int32Array(this.getOddCounts())),n=ef.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,a=!1,s=!1;e?(r>12?o=!0:r<4&&(i=!0),n>12?s=!0:n<4&&(a=!0)):(r>11?o=!0:r<5&&(i=!0),n>10?s=!0:n<4&&(a=!0));let l=r+n-t,c=(1&r)==(e?1:0),d=(1&n)==1;if(1===l){if(c){if(d)throw new W;o=!0}else{if(!d)throw new W;s=!0}}else if(-1===l){if(c){if(d)throw new W;i=!0}else{if(!d)throw new W;a=!0}}else if(0===l){if(c){if(!d)throw new W;r<n?(i=!0,s=!0):(o=!0,a=!0)}else if(d)throw new W}else throw new W;if(i){if(o)throw new W;eH.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&eH.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new W;eH.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&eH.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}to.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],to.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],to.OUTSIDE_GSUM=[0,161,961,2015,2715],to.INSIDE_GSUM=[0,336,1036,1516],to.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],to.INSIDE_ODD_WIDEST=[2,4,6,8],to.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ta extends e_{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;let r=e?e.get(k.POSSIBLE_FORMATS):null,n=e&&void 0!==e.get(k.ASSUME_CODE_39_CHECK_DIGIT);r?((r.includes(er.EAN_13)||r.includes(er.UPC_A)||r.includes(er.EAN_8)||r.includes(er.UPC_E))&&this.readers.push(new eU(e)),r.includes(er.CODE_39)&&this.readers.push(new eN(n)),r.includes(er.CODE_128)&&this.readers.push(new eT),r.includes(er.ITF)&&this.readers.push(new eR),r.includes(er.RSS_14)&&this.readers.push(new to),r.includes(er.RSS_EXPANDED)&&this.readers.push(new tn(this.verbose))):(this.readers.push(new eU(e)),this.readers.push(new eN),this.readers.push(new eU(e)),this.readers.push(new eT),this.readers.push(new eR),this.readers.push(new to),this.readers.push(new tn(this.verbose)))}decodeRow(e,t,r){for(let n=0;n<this.readers.length;n++)try{return this.readers[n].decodeRow(e,t,r)}catch(e){}throw new W}reset(){this.readers.forEach(e=>e.reset())}}class ts extends ee{constructor(e=500,t){super(new ta(t),e,t)}}class tl{constructor(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class tc{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class td{constructor(e,t,r,n,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=i,this.ecBlocks=o;let a=0,s=o.getECCodewords();for(let e of o.getECBlocks())a+=e.getCount()*(e.getDataCodewords()+s);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if((1&e)!=0||(1&t)!=0)throw new F;for(let r of td.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===t)return r;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new td(1,10,10,8,8,new tl(5,new tc(1,3))),new td(2,12,12,10,10,new tl(7,new tc(1,5))),new td(3,14,14,12,12,new tl(10,new tc(1,8))),new td(4,16,16,14,14,new tl(12,new tc(1,12))),new td(5,18,18,16,16,new tl(14,new tc(1,18))),new td(6,20,20,18,18,new tl(18,new tc(1,22))),new td(7,22,22,20,20,new tl(20,new tc(1,30))),new td(8,24,24,22,22,new tl(24,new tc(1,36))),new td(9,26,26,24,24,new tl(28,new tc(1,44))),new td(10,32,32,14,14,new tl(36,new tc(1,62))),new td(11,36,36,16,16,new tl(42,new tc(1,86))),new td(12,40,40,18,18,new tl(48,new tc(1,114))),new td(13,44,44,20,20,new tl(56,new tc(1,144))),new td(14,48,48,22,22,new tl(68,new tc(1,174))),new td(15,52,52,24,24,new tl(42,new tc(2,102))),new td(16,64,64,14,14,new tl(56,new tc(2,140))),new td(17,72,72,16,16,new tl(36,new tc(4,92))),new td(18,80,80,18,18,new tl(48,new tc(4,114))),new td(19,88,88,20,20,new tl(56,new tc(4,144))),new td(20,96,96,22,22,new tl(68,new tc(4,174))),new td(21,104,104,24,24,new tl(56,new tc(6,136))),new td(22,120,120,18,18,new tl(68,new tc(6,175))),new td(23,132,132,20,20,new tl(62,new tc(8,163))),new td(24,144,144,22,22,new tl(62,new tc(8,156),new tc(2,155))),new td(25,8,18,6,16,new tl(7,new tc(1,5))),new td(26,8,32,6,14,new tl(11,new tc(1,10))),new td(27,12,26,10,24,new tl(14,new tc(1,16))),new td(28,12,36,10,16,new tl(18,new tc(1,22))),new td(29,16,36,14,16,new tl(24,new tc(1,32))),new td(30,16,48,14,22,new tl(28,new tc(1,49)))]}}td.VERSIONS=td.buildVersions();class tu{constructor(e){let t=e.getHeight();if(t<8||t>144||(1&t)!=0)throw new F;this.version=tu.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new G(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){let t=e.getHeight(),r=e.getWidth();return td.getVersionForDimensions(t,r)}readCodewords(){let e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,n=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),a=!1,s=!1,l=!1,c=!1;do if(r!==i||0!==n||a){if(r!==i-2||0!==n||(3&o)==0||s){if(r!==i+4||2!==n||(7&o)!=0||l){if(r!==i-2||0!==n||(7&o)!=4||c){do r<i&&n>=0&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,i,o)),r-=2,n+=2;while(r>=0&&n<o);r+=1,n+=3;do r>=0&&n<o&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,i,o)),r+=2,n-=2;while(r<i&&n>=0);r+=3,n+=1}else e[t++]=255&this.readCorner4(i,o),r-=2,n+=2,c=!0}else e[t++]=255&this.readCorner3(i,o),r-=2,n+=2,l=!0}else e[t++]=255&this.readCorner2(i,o),r-=2,n+=2,s=!0}else e[t++]=255&this.readCorner1(i,o),r-=2,n+=2,a=!0;while(r<i||n<o);if(t!==this.version.getTotalCodewords())throw new F;return e}readModule(e,t,r,n){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=n,e+=4-(n+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,r,n){let i=0;return this.readModule(e-2,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-2,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t,r,n)&&(i|=1),i<<=1,this.readModule(e,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e,t,r,n)&&(i|=1),i}readCorner1(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}readCorner2(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner3(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner4(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}extractDataRegion(e){let t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new T("Dimension of bitMatrix must match the version size");let n=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/n|0,a=r/i|0,s=new G(a*i,o*n);for(let t=0;t<o;++t){let r=t*n;for(let o=0;o<a;++o){let a=o*i;for(let l=0;l<n;++l){let c=t*(n+2)+1+l,d=r+l;for(let t=0;t<i;++t){let r=o*(i+2)+1+t;if(e.get(r,c)){let e=a+t;s.set(e,d)}}}}}return s}}class th{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){let r=t.getECBlocks(),n=0,i=r.getECBlocks();for(let e of i)n+=e.getCount();let o=Array(n),a=0;for(let e of i)for(let t=0;t<e.getCount();t++){let t=e.getDataCodewords(),n=r.getECCodewords()+t;o[a++]=new th(t,new Uint8Array(n))}let s=o[0].codewords.length-r.getECCodewords(),l=s-1,c=0;for(let t=0;t<l;t++)for(let r=0;r<a;r++)o[r].codewords[t]=e[c++];let d=24===t.getVersionNumber(),u=d?8:a;for(let t=0;t<u;t++)o[t].codewords[s-1]=e[c++];let h=o[0].codewords.length;for(let t=s;t<h;t++)for(let r=0;r<a;r++){let n=d?(r+8)%a:r,i=d&&n>7?t-1:t;o[n].codewords[i]=e[c++]}if(c!==e.length)throw new T;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class tf{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new T(""+e);let t=0,r=this.bitOffset,n=this.byteOffset,i=this.bytes;if(r>0){let o=8-r,a=e<o?e:o,s=o-a;t=(i[n]&255>>8-a<<s)>>s,e-=a,8===(r+=a)&&(r=0,n++)}if(e>0){for(;e>=8;)t=t<<8|255&i[n],n++,e-=8;if(e>0){let o=8-e;t=t<<e|(i[n]&255>>o<<o)>>o,r+=e}}return this.bitOffset=r,this.byteOffset=n,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}(s=y||(y={}))[s.PAD_ENCODE=0]="PAD_ENCODE",s[s.ASCII_ENCODE=1]="ASCII_ENCODE",s[s.C40_ENCODE=2]="C40_ENCODE",s[s.TEXT_ENCODE=3]="TEXT_ENCODE",s[s.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",s[s.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",s[s.BASE256_ENCODE=6]="BASE256_ENCODE";class tp{static decode(e){let t=new tf(e),r=new Y,n=new Y,i=[],o=y.ASCII_ENCODE;do if(o===y.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,n);else{switch(o){case y.C40_ENCODE:this.decodeC40Segment(t,r);break;case y.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case y.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case y.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case y.BASE256_ENCODE:this.decodeBase256Segment(t,r,i);break;default:throw new F}o=y.ASCII_ENCODE}while(o!==y.PAD_ENCODE&&t.available()>0);return n.length()>0&&r.append(n.toString()),new ei(e,r.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,r){let n=!1;do{let i=e.readBits(8);if(0===i)throw new F;if(i<=128){n&&(i+=128),t.append(String.fromCharCode(i-1));break}if(129===i)return y.PAD_ENCODE;if(i<=229){let e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return y.C40_ENCODE;case 231:return y.BASE256_ENCODE;case 232:t.append("\x1d");break;case 233:case 234:case 241:break;case 235:n=!0;break;case 236:t.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return y.ANSIX12_ENCODE;case 239:return y.TEXT_ENCODE;case 240:return y.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new F}}while(e.available()>0);return y.ASCII_ENCODE}static decodeC40Segment(e,t){let r=!1,n=[],i=0;do{if(8===e.available())return;let o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),n);for(let e=0;e<3;e++){let o=n[e];switch(i){case 0:if(o<3)i=o+1;else if(o<this.C40_BASIC_SET_CHARS.length){let e=this.C40_BASIC_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else throw new F;break;case 1:r?(t.append(String.fromCharCode(o+128)),r=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){let e=this.C40_SHIFT2_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else switch(o){case 27:t.append("\x1d");break;case 30:r=!0;break;default:throw new F}i=0;break;case 3:r?(t.append(String.fromCharCode(o+224)),r=!1):t.append(String.fromCharCode(o+96)),i=0;break;default:throw new F}}}while(e.available()>0)}static decodeTextSegment(e,t){let r=!1,n=[],i=0;do{if(8===e.available())return;let o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),n);for(let e=0;e<3;e++){let o=n[e];switch(i){case 0:if(o<3)i=o+1;else if(o<this.TEXT_BASIC_SET_CHARS.length){let e=this.TEXT_BASIC_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else throw new F;break;case 1:r?(t.append(String.fromCharCode(o+128)),r=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){let e=this.TEXT_SHIFT2_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else switch(o){case 27:t.append("\x1d");break;case 30:r=!0;break;default:throw new F}i=0;break;case 3:if(o<this.TEXT_SHIFT3_SET_CHARS.length){let e=this.TEXT_SHIFT3_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e),i=0}else throw new F;break;default:throw new F}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){let r=[];do{if(8===e.available())return;let n=e.readBits(8);if(254===n)return;this.parseTwoBytes(n,e.readBits(8),r);for(let e=0;e<3;e++){let n=r[e];switch(n){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(n<14)t.append(String.fromCharCode(n+44));else if(n<40)t.append(String.fromCharCode(n+51));else throw new F}}}while(e.available()>0)}static parseTwoBytes(e,t,r){let n=(e<<8)+t-1,i=Math.floor(n/1600);r[0]=i,n-=1600*i,i=Math.floor(n/40),r[1]=i,r[2]=n-40*i}static decodeEdifactSegment(e,t){do{if(16>=e.available())return;for(let r=0;r<4;r++){let r=e.readBits(6);if(31===r){let t=8-e.getBitOffset();8!==t&&e.readBits(t);return}(32&r)==0&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,r){let n,i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++);if((n=0===o?e.available()/8|0:o<250?o:250*(o-249)+this.unrandomize255State(e.readBits(8),i++))<0)throw new F;let a=new Uint8Array(n);for(let t=0;t<n;t++){if(8>e.available())throw new F;a[t]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{t.append(z.decode(a,V.ISO88591))}catch(e){throw new ed("Platform does not support required encoding: "+e.message)}}static unrandomize255State(e,t){let r=e-(149*t%255+1);return r>=0?r:r+256}}tp.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],tp.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],tp.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],tp.TEXT_SHIFT2_SET_CHARS=tp.C40_SHIFT2_SET_CHARS,tp.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7f"];class tg{constructor(){this.rsDecoder=new eu(el.DATA_MATRIX_FIELD_256)}decode(e){let t=new tu(e),r=t.getVersion(),n=t.readCodewords(),i=th.getDataBlocks(n,r),o=0;for(let e of i)o+=e.getNumDataCodewords();let a=new Uint8Array(o),s=i.length;for(let e=0;e<s;e++){let t=i[e],r=t.getCodewords(),n=t.getNumDataCodewords();this.correctErrors(r,n);for(let t=0;t<n;t++)a[t*s+e]=r[t]}return tp.decode(a)}correctErrors(e,t){let r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(e){throw new R}for(let n=0;n<t;n++)e[n]=r[n]}}class tm{constructor(e){this.image=e,this.rectangleDetector=new ey(this.image)}detect(){let e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if((t=this.detectSolid2(t))[3]=this.correctTopRight(t),!t[3])throw new W;let r=(t=this.shiftToModuleCenter(t))[0],n=t[1],i=t[2],o=t[3],a=this.transitionsBetween(r,o)+1,s=this.transitionsBetween(i,o)+1;return(1&a)==1&&(a+=1),(1&s)==1&&(s+=1),4*a<7*s&&4*s<7*a&&(a=s=Math.max(a,s)),new em(tm.sampleGrid(this.image,r,n,i,o,a,s),[r,n,i,o])}static shiftPoint(e,t,r){let n=(t.getX()-e.getX())/(r+1),i=(t.getY()-e.getY())/(r+1);return new eg(e.getX()+n,e.getY()+i)}static moveAway(e,t,r){let n=e.getX(),i=e.getY();return n<t?n-=1:n+=1,i<r?i-=1:i+=1,new eg(n,i)}detectSolid1(e){let t=e[0],r=e[1],n=e[3],i=e[2],o=this.transitionsBetween(t,r),a=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),l=this.transitionsBetween(i,t),c=o,d=[i,t,r,n];return c>a&&(c=a,d[0]=t,d[1]=r,d[2]=n,d[3]=i),c>s&&(c=s,d[0]=r,d[1]=n,d[2]=i,d[3]=t),c>l&&(d[0]=n,d[1]=i,d[2]=t,d[3]=r),d}detectSolid2(e){let t=e[0],r=e[1],n=e[2],i=e[3],o=this.transitionsBetween(t,i),a=tm.shiftPoint(r,n,(o+1)*4),s=tm.shiftPoint(n,r,(o+1)*4);return this.transitionsBetween(a,t)<this.transitionsBetween(s,i)?(e[0]=t,e[1]=r,e[2]=n,e[3]=i):(e[0]=r,e[1]=n,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],r=e[1],n=e[2],i=e[3],o=this.transitionsBetween(t,i),a=this.transitionsBetween(r,i),s=tm.shiftPoint(t,r,(a+1)*4),l=tm.shiftPoint(n,r,(o+1)*4);o=this.transitionsBetween(s,i),a=this.transitionsBetween(l,i);let c=new eg(i.getX()+(n.getX()-r.getX())/(o+1),i.getY()+(n.getY()-r.getY())/(o+1)),d=new eg(i.getX()+(t.getX()-r.getX())/(a+1),i.getY()+(t.getY()-r.getY())/(a+1));return this.isValid(c)?this.isValid(d)?this.transitionsBetween(s,c)+this.transitionsBetween(l,c)>this.transitionsBetween(s,d)+this.transitionsBetween(l,d)?c:d:c:this.isValid(d)?d:null}shiftToModuleCenter(e){let t,r,n=e[0],i=e[1],o=e[2],a=e[3],s=this.transitionsBetween(n,a)+1,l=this.transitionsBetween(o,a)+1,c=tm.shiftPoint(n,i,4*l),d=tm.shiftPoint(o,i,4*s);s=this.transitionsBetween(c,a)+1,l=this.transitionsBetween(d,a)+1,(1&s)==1&&(s+=1),(1&l)==1&&(l+=1);let u=(n.getX()+i.getX()+o.getX()+a.getX())/4,h=(n.getY()+i.getY()+o.getY()+a.getY())/4;return n=tm.moveAway(n,u,h),i=tm.moveAway(i,u,h),o=tm.moveAway(o,u,h),a=tm.moveAway(a,u,h),c=tm.shiftPoint(n,i,4*l),c=tm.shiftPoint(c,a,4*s),t=tm.shiftPoint(i,n,4*l),t=tm.shiftPoint(t,o,4*s),d=tm.shiftPoint(o,a,4*l),d=tm.shiftPoint(d,i,4*s),r=tm.shiftPoint(a,o,4*l),[c,t,d,r=tm.shiftPoint(r,n,4*s)]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,r,n,i,o,a){return ex.getInstance().sampleGrid(e,o,a,.5,.5,o-.5,.5,o-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(e,t){let r=Math.trunc(e.getX()),n=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),a=Math.abs(o-n)>Math.abs(i-r);if(a){let e=r;r=n,n=e,e=i,i=o,o=e}let s=Math.abs(i-r),l=Math.abs(o-n),c=-s/2,d=n<o?1:-1,u=r<i?1:-1,h=0,f=this.image.get(a?n:r,a?r:n);for(let e=r,t=n;e!==i;e+=u){let r=this.image.get(a?t:e,a?e:t);if(r!==f&&(h++,f=r),(c+=l)>0){if(t===o)break;t+=d,c-=s}}return h}}class tw{constructor(){this.decoder=new tg}decode(e,t=null){let r,n;if(null!=t&&t.has(k.PURE_BARCODE)){let t=tw.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(t),n=tw.NO_POINTS}else{let t=new tm(e.getBlackMatrix()).detect();r=this.decoder.decode(t.getBits()),n=t.getPoints()}let i=r.getRawBytes(),o=new et(r.getText(),i,8*i.length,n,er.DATA_MATRIX,D.currentTimeMillis()),a=r.getByteSegments();null!=a&&o.putMetadata(en.BYTE_SEGMENTS,a);let s=r.getECLevel();return null!=s&&o.putMetadata(en.ERROR_CORRECTION_LEVEL,s),o}reset(){}static extractPureBits(e){let t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null==t||null==r)throw new W;let n=this.moduleSize(t,e),i=t[1],o=r[1],a=t[0],s=(r[0]-a+1)/n,l=(o-i+1)/n;if(s<=0||l<=0)throw new W;let c=n/2;i+=c,a+=c;let d=new G(s,l);for(let t=0;t<l;t++){let r=i+t*n;for(let i=0;i<s;i++)e.get(a+i*n,r)&&d.set(i,t)}return d}static moduleSize(e,t){let r=t.getWidth(),n=e[0],i=e[1];for(;n<r&&t.get(n,i);)n++;if(n===r)throw new W;let o=n-e[0];if(0===o)throw new W;return o}}tw.NO_POINTS=[];class ty extends ee{constructor(e=500){super(new tw,e)}}(l=E||(E={}))[l.L=0]="L",l[l.M=1]="M",l[l.Q=2]="Q",l[l.H=3]="H";class tE{constructor(e,t,r){this.value=e,this.stringValue=t,this.bits=r,tE.FOR_BITS.set(r,this),tE.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return tE.L;case"M":return tE.M;case"Q":return tE.Q;case"H":return tE.H;default:throw new _(e+"not available")}}toString(){return this.stringValue}equals(e){return e instanceof tE&&this.value===e.value}static forBits(e){if(e<0||e>=tE.FOR_BITS.size)throw new T;return tE.FOR_BITS.get(e)}}tE.FOR_BITS=new Map,tE.FOR_VALUE=new Map,tE.L=new tE(E.L,"L",1),tE.M=new tE(E.M,"M",0),tE.Q=new tE(E.Q,"Q",3),tE.H=new tE(E.H,"H",2);class tC{constructor(e){this.errorCorrectionLevel=tE.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return j.bitCount(e^t)}static decodeFormatInformation(e,t){let r=tC.doDecodeFormatInformation(e,t);return null!==r?r:tC.doDecodeFormatInformation(e^tC.FORMAT_INFO_MASK_QR,t^tC.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let r=Number.MAX_SAFE_INTEGER,n=0;for(let i of tC.FORMAT_INFO_DECODE_LOOKUP){let o=i[0];if(o===e||o===t)return new tC(i[1]);let a=tC.numBitsDiffering(e,o);a<r&&(n=i[1],r=a),e!==t&&(a=tC.numBitsDiffering(t,o))<r&&(n=i[1],r=a)}return r<=3?new tC(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){return e instanceof tC&&this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask}}tC.FORMAT_INFO_MASK_QR=21522,tC.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class tA{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;for(let t of this.ecBlocks)e+=t.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class tx{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tb{constructor(e,t,...r){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=r;let n=0,i=r[0].getECCodewordsPerBlock();for(let e of r[0].getECBlocks())n+=e.getCount()*(e.getDataCodewords()+i);this.totalCodewords=n}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!=1)throw new F;try{return this.getVersionForNumber((e-17)/4)}catch(e){throw new F}}static getVersionForNumber(e){if(e<1||e>40)throw new T;return tb.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<tb.VERSION_DECODE_INFO.length;n++){let i=tb.VERSION_DECODE_INFO[n];if(i===e)return tb.getVersionForNumber(n+7);let o=tC.numBitsDiffering(e,i);o<t&&(r=n+7,t=o)}return t<=3?tb.getVersionForNumber(r):null}buildFunctionPattern(){let e=this.getDimensionForVersion(),t=new G(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);let r=this.alignmentPatternCenters.length;for(let e=0;e<r;e++){let n=this.alignmentPatternCenters[e]-2;for(let i=0;i<r;i++)(0!==e||0!==i&&i!==r-1)&&(e!==r-1||0!==i)&&t.setRegion(this.alignmentPatternCenters[i]-2,n,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}tb.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),tb.VERSIONS=[new tb(1,new Int32Array(0),new tA(7,new tx(1,19)),new tA(10,new tx(1,16)),new tA(13,new tx(1,13)),new tA(17,new tx(1,9))),new tb(2,Int32Array.from([6,18]),new tA(10,new tx(1,34)),new tA(16,new tx(1,28)),new tA(22,new tx(1,22)),new tA(28,new tx(1,16))),new tb(3,Int32Array.from([6,22]),new tA(15,new tx(1,55)),new tA(26,new tx(1,44)),new tA(18,new tx(2,17)),new tA(22,new tx(2,13))),new tb(4,Int32Array.from([6,26]),new tA(20,new tx(1,80)),new tA(18,new tx(2,32)),new tA(26,new tx(2,24)),new tA(16,new tx(4,9))),new tb(5,Int32Array.from([6,30]),new tA(26,new tx(1,108)),new tA(24,new tx(2,43)),new tA(18,new tx(2,15),new tx(2,16)),new tA(22,new tx(2,11),new tx(2,12))),new tb(6,Int32Array.from([6,34]),new tA(18,new tx(2,68)),new tA(16,new tx(4,27)),new tA(24,new tx(4,19)),new tA(28,new tx(4,15))),new tb(7,Int32Array.from([6,22,38]),new tA(20,new tx(2,78)),new tA(18,new tx(4,31)),new tA(18,new tx(2,14),new tx(4,15)),new tA(26,new tx(4,13),new tx(1,14))),new tb(8,Int32Array.from([6,24,42]),new tA(24,new tx(2,97)),new tA(22,new tx(2,38),new tx(2,39)),new tA(22,new tx(4,18),new tx(2,19)),new tA(26,new tx(4,14),new tx(2,15))),new tb(9,Int32Array.from([6,26,46]),new tA(30,new tx(2,116)),new tA(22,new tx(3,36),new tx(2,37)),new tA(20,new tx(4,16),new tx(4,17)),new tA(24,new tx(4,12),new tx(4,13))),new tb(10,Int32Array.from([6,28,50]),new tA(18,new tx(2,68),new tx(2,69)),new tA(26,new tx(4,43),new tx(1,44)),new tA(24,new tx(6,19),new tx(2,20)),new tA(28,new tx(6,15),new tx(2,16))),new tb(11,Int32Array.from([6,30,54]),new tA(20,new tx(4,81)),new tA(30,new tx(1,50),new tx(4,51)),new tA(28,new tx(4,22),new tx(4,23)),new tA(24,new tx(3,12),new tx(8,13))),new tb(12,Int32Array.from([6,32,58]),new tA(24,new tx(2,92),new tx(2,93)),new tA(22,new tx(6,36),new tx(2,37)),new tA(26,new tx(4,20),new tx(6,21)),new tA(28,new tx(7,14),new tx(4,15))),new tb(13,Int32Array.from([6,34,62]),new tA(26,new tx(4,107)),new tA(22,new tx(8,37),new tx(1,38)),new tA(24,new tx(8,20),new tx(4,21)),new tA(22,new tx(12,11),new tx(4,12))),new tb(14,Int32Array.from([6,26,46,66]),new tA(30,new tx(3,115),new tx(1,116)),new tA(24,new tx(4,40),new tx(5,41)),new tA(20,new tx(11,16),new tx(5,17)),new tA(24,new tx(11,12),new tx(5,13))),new tb(15,Int32Array.from([6,26,48,70]),new tA(22,new tx(5,87),new tx(1,88)),new tA(24,new tx(5,41),new tx(5,42)),new tA(30,new tx(5,24),new tx(7,25)),new tA(24,new tx(11,12),new tx(7,13))),new tb(16,Int32Array.from([6,26,50,74]),new tA(24,new tx(5,98),new tx(1,99)),new tA(28,new tx(7,45),new tx(3,46)),new tA(24,new tx(15,19),new tx(2,20)),new tA(30,new tx(3,15),new tx(13,16))),new tb(17,Int32Array.from([6,30,54,78]),new tA(28,new tx(1,107),new tx(5,108)),new tA(28,new tx(10,46),new tx(1,47)),new tA(28,new tx(1,22),new tx(15,23)),new tA(28,new tx(2,14),new tx(17,15))),new tb(18,Int32Array.from([6,30,56,82]),new tA(30,new tx(5,120),new tx(1,121)),new tA(26,new tx(9,43),new tx(4,44)),new tA(28,new tx(17,22),new tx(1,23)),new tA(28,new tx(2,14),new tx(19,15))),new tb(19,Int32Array.from([6,30,58,86]),new tA(28,new tx(3,113),new tx(4,114)),new tA(26,new tx(3,44),new tx(11,45)),new tA(26,new tx(17,21),new tx(4,22)),new tA(26,new tx(9,13),new tx(16,14))),new tb(20,Int32Array.from([6,34,62,90]),new tA(28,new tx(3,107),new tx(5,108)),new tA(26,new tx(3,41),new tx(13,42)),new tA(30,new tx(15,24),new tx(5,25)),new tA(28,new tx(15,15),new tx(10,16))),new tb(21,Int32Array.from([6,28,50,72,94]),new tA(28,new tx(4,116),new tx(4,117)),new tA(26,new tx(17,42)),new tA(28,new tx(17,22),new tx(6,23)),new tA(30,new tx(19,16),new tx(6,17))),new tb(22,Int32Array.from([6,26,50,74,98]),new tA(28,new tx(2,111),new tx(7,112)),new tA(28,new tx(17,46)),new tA(30,new tx(7,24),new tx(16,25)),new tA(24,new tx(34,13))),new tb(23,Int32Array.from([6,30,54,78,102]),new tA(30,new tx(4,121),new tx(5,122)),new tA(28,new tx(4,47),new tx(14,48)),new tA(30,new tx(11,24),new tx(14,25)),new tA(30,new tx(16,15),new tx(14,16))),new tb(24,Int32Array.from([6,28,54,80,106]),new tA(30,new tx(6,117),new tx(4,118)),new tA(28,new tx(6,45),new tx(14,46)),new tA(30,new tx(11,24),new tx(16,25)),new tA(30,new tx(30,16),new tx(2,17))),new tb(25,Int32Array.from([6,32,58,84,110]),new tA(26,new tx(8,106),new tx(4,107)),new tA(28,new tx(8,47),new tx(13,48)),new tA(30,new tx(7,24),new tx(22,25)),new tA(30,new tx(22,15),new tx(13,16))),new tb(26,Int32Array.from([6,30,58,86,114]),new tA(28,new tx(10,114),new tx(2,115)),new tA(28,new tx(19,46),new tx(4,47)),new tA(28,new tx(28,22),new tx(6,23)),new tA(30,new tx(33,16),new tx(4,17))),new tb(27,Int32Array.from([6,34,62,90,118]),new tA(30,new tx(8,122),new tx(4,123)),new tA(28,new tx(22,45),new tx(3,46)),new tA(30,new tx(8,23),new tx(26,24)),new tA(30,new tx(12,15),new tx(28,16))),new tb(28,Int32Array.from([6,26,50,74,98,122]),new tA(30,new tx(3,117),new tx(10,118)),new tA(28,new tx(3,45),new tx(23,46)),new tA(30,new tx(4,24),new tx(31,25)),new tA(30,new tx(11,15),new tx(31,16))),new tb(29,Int32Array.from([6,30,54,78,102,126]),new tA(30,new tx(7,116),new tx(7,117)),new tA(28,new tx(21,45),new tx(7,46)),new tA(30,new tx(1,23),new tx(37,24)),new tA(30,new tx(19,15),new tx(26,16))),new tb(30,Int32Array.from([6,26,52,78,104,130]),new tA(30,new tx(5,115),new tx(10,116)),new tA(28,new tx(19,47),new tx(10,48)),new tA(30,new tx(15,24),new tx(25,25)),new tA(30,new tx(23,15),new tx(25,16))),new tb(31,Int32Array.from([6,30,56,82,108,134]),new tA(30,new tx(13,115),new tx(3,116)),new tA(28,new tx(2,46),new tx(29,47)),new tA(30,new tx(42,24),new tx(1,25)),new tA(30,new tx(23,15),new tx(28,16))),new tb(32,Int32Array.from([6,34,60,86,112,138]),new tA(30,new tx(17,115)),new tA(28,new tx(10,46),new tx(23,47)),new tA(30,new tx(10,24),new tx(35,25)),new tA(30,new tx(19,15),new tx(35,16))),new tb(33,Int32Array.from([6,30,58,86,114,142]),new tA(30,new tx(17,115),new tx(1,116)),new tA(28,new tx(14,46),new tx(21,47)),new tA(30,new tx(29,24),new tx(19,25)),new tA(30,new tx(11,15),new tx(46,16))),new tb(34,Int32Array.from([6,34,62,90,118,146]),new tA(30,new tx(13,115),new tx(6,116)),new tA(28,new tx(14,46),new tx(23,47)),new tA(30,new tx(44,24),new tx(7,25)),new tA(30,new tx(59,16),new tx(1,17))),new tb(35,Int32Array.from([6,30,54,78,102,126,150]),new tA(30,new tx(12,121),new tx(7,122)),new tA(28,new tx(12,47),new tx(26,48)),new tA(30,new tx(39,24),new tx(14,25)),new tA(30,new tx(22,15),new tx(41,16))),new tb(36,Int32Array.from([6,24,50,76,102,128,154]),new tA(30,new tx(6,121),new tx(14,122)),new tA(28,new tx(6,47),new tx(34,48)),new tA(30,new tx(46,24),new tx(10,25)),new tA(30,new tx(2,15),new tx(64,16))),new tb(37,Int32Array.from([6,28,54,80,106,132,158]),new tA(30,new tx(17,122),new tx(4,123)),new tA(28,new tx(29,46),new tx(14,47)),new tA(30,new tx(49,24),new tx(10,25)),new tA(30,new tx(24,15),new tx(46,16))),new tb(38,Int32Array.from([6,32,58,84,110,136,162]),new tA(30,new tx(4,122),new tx(18,123)),new tA(28,new tx(13,46),new tx(32,47)),new tA(30,new tx(48,24),new tx(14,25)),new tA(30,new tx(42,15),new tx(32,16))),new tb(39,Int32Array.from([6,26,54,82,110,138,166]),new tA(30,new tx(20,117),new tx(4,118)),new tA(28,new tx(40,47),new tx(7,48)),new tA(30,new tx(43,24),new tx(22,25)),new tA(30,new tx(10,15),new tx(67,16))),new tb(40,Int32Array.from([6,30,58,86,114,142,170]),new tA(30,new tx(19,118),new tx(6,119)),new tA(28,new tx(18,47),new tx(31,48)),new tA(30,new tx(34,24),new tx(34,25)),new tA(30,new tx(20,15),new tx(61,16)))],(c=C||(C={}))[c.DATA_MASK_000=0]="DATA_MASK_000",c[c.DATA_MASK_001=1]="DATA_MASK_001",c[c.DATA_MASK_010=2]="DATA_MASK_010",c[c.DATA_MASK_011=3]="DATA_MASK_011",c[c.DATA_MASK_100=4]="DATA_MASK_100",c[c.DATA_MASK_101=5]="DATA_MASK_101",c[c.DATA_MASK_110=6]="DATA_MASK_110",c[c.DATA_MASK_111=7]="DATA_MASK_111";class tv{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let r=0;r<t;r++)for(let n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)}}tv.values=new Map([[C.DATA_MASK_000,new tv(C.DATA_MASK_000,(e,t)=>(e+t&1)==0)],[C.DATA_MASK_001,new tv(C.DATA_MASK_001,(e,t)=>(1&e)==0)],[C.DATA_MASK_010,new tv(C.DATA_MASK_010,(e,t)=>t%3==0)],[C.DATA_MASK_011,new tv(C.DATA_MASK_011,(e,t)=>(e+t)%3==0)],[C.DATA_MASK_100,new tv(C.DATA_MASK_100,(e,t)=>(Math.floor(e/2)+Math.floor(t/3)&1)==0)],[C.DATA_MASK_101,new tv(C.DATA_MASK_101,(e,t)=>e*t%6==0)],[C.DATA_MASK_110,new tv(C.DATA_MASK_110,(e,t)=>e*t%6<3)],[C.DATA_MASK_111,new tv(C.DATA_MASK_111,(e,t)=>(e+t+e*t%3&1)==0)]]);class tS{constructor(e){let t=e.getHeight();if(t<21||(3&t)!=1)throw new F;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let t=5;t>=0;t--)e=this.copyBit(8,t,e);let t=this.bitMatrix.getHeight(),r=0,n=t-7;for(let e=t-1;e>=n;e--)r=this.copyBit(8,e,r);for(let e=t-8;e<t;e++)r=this.copyBit(e,8,r);if(this.parsedFormatInfo=tC.decodeFormatInformation(e,r),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new F}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;let e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return tb.getVersionForNumber(t);let r=0,n=e-11;for(let t=5;t>=0;t--)for(let i=e-9;i>=n;i--)r=this.copyBit(i,t,r);let i=tb.decodeVersionInformation(r);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;r=0;for(let t=5;t>=0;t--)for(let i=e-9;i>=n;i--)r=this.copyBit(t,i,r);if(null!==(i=tb.decodeVersionInformation(r))&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new F}copyBit(e,t,r){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?r<<1|1:r<<1}readCodewords(){let e=this.readFormatInformation(),t=this.readVersion(),r=tv.values.get(e.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);let i=t.buildFunctionPattern(),o=!0,a=new Uint8Array(t.getTotalCodewords()),s=0,l=0,c=0;for(let e=n-1;e>0;e-=2){6===e&&e--;for(let t=0;t<n;t++){let r=o?n-1-t:t;for(let t=0;t<2;t++)i.get(e-t,r)||(c++,l<<=1,this.bitMatrix.get(e-t,r)&&(l|=1),8!==c||(a[s++]=l,c=0,l=0))}o=!o}if(s!==t.getTotalCodewords())throw new F;return a}remask(){if(null===this.parsedFormatInfo)return;let e=tv.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){let e=this.bitMatrix;for(let t=0,r=e.getWidth();t<r;t++)for(let r=t+1,n=e.getHeight();r<n;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class tI{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,r){if(e.length!==t.getTotalCodewords())throw new T;let n=t.getECBlocksForLevel(r),i=0,o=n.getECBlocks();for(let e of o)i+=e.getCount();let a=Array(i),s=0;for(let e of o)for(let t=0;t<e.getCount();t++){let t=e.getDataCodewords(),r=n.getECCodewordsPerBlock()+t;a[s++]=new tI(t,new Uint8Array(r))}let l=a[0].codewords.length,c=a.length-1;for(;c>=0&&a[c].codewords.length!==l;)c--;c++;let d=l-n.getECCodewordsPerBlock(),u=0;for(let t=0;t<d;t++)for(let r=0;r<s;r++)a[r].codewords[t]=e[u++];for(let t=c;t<s;t++)a[t].codewords[d]=e[u++];let h=a[0].codewords.length;for(let t=d;t<h;t++)for(let r=0;r<s;r++){let n=r<c?t:t+1;a[r].codewords[n]=e[u++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}(d=A||(A={}))[d.TERMINATOR=0]="TERMINATOR",d[d.NUMERIC=1]="NUMERIC",d[d.ALPHANUMERIC=2]="ALPHANUMERIC",d[d.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",d[d.BYTE=4]="BYTE",d[d.ECI=5]="ECI",d[d.KANJI=6]="KANJI",d[d.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",d[d.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",d[d.HANZI=9]="HANZI";class t_{constructor(e,t,r,n){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=n,t_.FOR_BITS.set(n,this),t_.FOR_VALUE.set(e,this)}static forBits(e){let t=t_.FOR_BITS.get(e);if(void 0===t)throw new T;return t}getCharacterCountBits(e){let t;let r=e.getVersionNumber();return t=r<=9?0:r<=26?1:2,this.characterCountBitsForVersions[t]}getValue(){return this.value}getBits(){return this.bits}equals(e){return e instanceof t_&&this.value===e.value}toString(){return this.stringValue}}t_.FOR_BITS=new Map,t_.FOR_VALUE=new Map,t_.TERMINATOR=new t_(A.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t_.NUMERIC=new t_(A.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t_.ALPHANUMERIC=new t_(A.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t_.STRUCTURED_APPEND=new t_(A.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t_.BYTE=new t_(A.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t_.ECI=new t_(A.ECI,"ECI",Int32Array.from([0,0,0]),7),t_.KANJI=new t_(A.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t_.FNC1_FIRST_POSITION=new t_(A.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t_.FNC1_SECOND_POSITION=new t_(A.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t_.HANZI=new t_(A.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class tT{static decode(e,t,r,n){let i=new tf(e),o=new Y,a=[],s=-1,l=-1;try{let e,r=null,c=!1;do{if(4>i.available())e=t_.TERMINATOR;else{let t=i.readBits(4);e=t_.forBits(t)}switch(e){case t_.TERMINATOR:break;case t_.FNC1_FIRST_POSITION:case t_.FNC1_SECOND_POSITION:c=!0;break;case t_.STRUCTURED_APPEND:if(16>i.available())throw new F;s=i.readBits(8),l=i.readBits(8);break;case t_.ECI:let d=tT.parseECIValue(i);if(r=U.getCharacterSetECIByValue(d),null===r)throw new F;break;case t_.HANZI:let u=i.readBits(4),h=i.readBits(e.getCharacterCountBits(t));u===tT.GB2312_SUBSET&&tT.decodeHanziSegment(i,o,h);break;default:let f=i.readBits(e.getCharacterCountBits(t));switch(e){case t_.NUMERIC:tT.decodeNumericSegment(i,o,f);break;case t_.ALPHANUMERIC:tT.decodeAlphanumericSegment(i,o,f,c);break;case t_.BYTE:tT.decodeByteSegment(i,o,f,r,a,n);break;case t_.KANJI:tT.decodeKanjiSegment(i,o,f);break;default:throw new F}}}while(e!==t_.TERMINATOR)}catch(e){throw new F}return new ei(e,o.toString(),0===a.length?null:a,null===r?null:r.toString(),s,l)}static decodeHanziSegment(e,t,r){if(13*r>e.available())throw new F;let n=new Uint8Array(2*r),i=0;for(;r>0;){let t=e.readBits(13),o=t/96<<8&4294967295|t%96;o<959?o+=41377:o+=42657,n[i]=o>>8&255,n[i+1]=255&o,i+=2,r--}try{t.append(z.decode(n,V.GB2312))}catch(e){throw new F(e)}}static decodeKanjiSegment(e,t,r){if(13*r>e.available())throw new F;let n=new Uint8Array(2*r),i=0;for(;r>0;){let t=e.readBits(13),o=t/192<<8&4294967295|t%192;o<7936?o+=33088:o+=49472,n[i]=o>>8,n[i+1]=o,i+=2,r--}try{t.append(z.decode(n,V.SHIFT_JIS))}catch(e){throw new F(e)}}static decodeByteSegment(e,t,r,n,i,o){let a;if(8*r>e.available())throw new F;let s=new Uint8Array(r);for(let t=0;t<r;t++)s[t]=e.readBits(8);a=null===n?V.guessEncoding(s,o):n.getName();try{t.append(z.decode(s,a))}catch(e){throw new F(e)}i.push(s)}static toAlphaNumericChar(e){if(e>=tT.ALPHANUMERIC_CHARS.length)throw new F;return tT.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,r,n){let i=t.length();for(;r>1;){if(11>e.available())throw new F;let n=e.readBits(11);t.append(tT.toAlphaNumericChar(Math.floor(n/45))),t.append(tT.toAlphaNumericChar(n%45)),r-=2}if(1===r){if(6>e.available())throw new F;t.append(tT.toAlphaNumericChar(e.readBits(6)))}if(n)for(let e=i;e<t.length();e++)"%"===t.charAt(e)&&(e<t.length()-1&&"%"===t.charAt(e+1)?t.deleteCharAt(e+1):t.setCharAt(e,"\x1d"))}static decodeNumericSegment(e,t,r){for(;r>=3;){if(10>e.available())throw new F;let n=e.readBits(10);if(n>=1e3)throw new F;t.append(tT.toAlphaNumericChar(Math.floor(n/100))),t.append(tT.toAlphaNumericChar(Math.floor(n/10)%10)),t.append(tT.toAlphaNumericChar(n%10)),r-=3}if(2===r){if(7>e.available())throw new F;let r=e.readBits(7);if(r>=100)throw new F;t.append(tT.toAlphaNumericChar(Math.floor(r/10))),t.append(tT.toAlphaNumericChar(r%10))}else if(1===r){if(4>e.available())throw new F;let r=e.readBits(4);if(r>=10)throw new F;t.append(tT.toAlphaNumericChar(r))}}static parseECIValue(e){let t=e.readBits(8);if((128&t)==0)return 127&t;if((192&t)==128)return(63&t)<<8&4294967295|e.readBits(8);if((224&t)==192)return(31&t)<<16&4294967295|e.readBits(16);throw new F}}tT.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",tT.GB2312_SUBSET=1;class tN{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;let t=e[0];e[0]=e[2],e[2]=t}}class tR{constructor(){this.rsDecoder=new eu(el.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(G.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){let r=new tS(e),n=null;try{return this.decodeBitMatrixParser(r,t)}catch(e){n=e}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();let e=this.decodeBitMatrixParser(r,t);return e.setOther(new tN(!0)),e}catch(e){if(null!==n)throw n;throw e}}decodeBitMatrixParser(e,t){let r=e.readVersion(),n=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=tI.getDataBlocks(i,r,n),a=0;for(let e of o)a+=e.getNumDataCodewords();let s=new Uint8Array(a),l=0;for(let e of o){let t=e.getCodewords(),r=e.getNumDataCodewords();this.correctErrors(t,r);for(let e=0;e<r;e++)s[l++]=t[e]}return tT.decode(s,r,n,t)}correctErrors(e,t){let r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(e){throw new R}for(let n=0;n<t;n++)e[n]=r[n]}}class tM extends eg{constructor(e,t,r){super(e,t),this.estimatedModuleSize=r}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){let t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){return new tM((this.getX()+t)/2,(this.getY()+e)/2,(this.estimatedModuleSize+r)/2)}}class tD{constructor(e,t,r,n,i,o,a){this.image=e,this.startX=t,this.startY=r,this.width=n,this.height=i,this.moduleSize=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let e=this.startX,t=this.height,r=e+this.width,n=this.startY+t/2,i=new Int32Array(3),o=this.image;for(let a=0;a<t;a++){let t=n+((1&a)==0?Math.floor((a+1)/2):-Math.floor((a+1)/2));i[0]=0,i[1]=0,i[2]=0;let s=e;for(;s<r&&!o.get(s,t);)s++;let l=0;for(;s<r;){if(o.get(s,t)){if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){let e=this.handlePossibleCenter(i,t,s);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++}else 1===l&&l++,i[l]++;s++}if(this.foundPatternCross(i)){let e=this.handlePossibleCenter(i,t,r);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new W}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){let t=this.moduleSize,r=t/2;for(let n=0;n<3;n++)if(Math.abs(t-e[n])>=r)return!1;return!0}crossCheckVertical(e,t,r,n){let i=this.image,o=i.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let s=e;for(;s>=0&&i.get(t,s)&&a[1]<=r;)a[1]++,s--;if(s<0||a[1]>r)return NaN;for(;s>=0&&!i.get(t,s)&&a[0]<=r;)a[0]++,s--;if(a[0]>r)return NaN;for(s=e+1;s<o&&i.get(t,s)&&a[1]<=r;)a[1]++,s++;if(s===o||a[1]>r)return NaN;for(;s<o&&!i.get(t,s)&&a[2]<=r;)a[2]++,s++;return a[2]>r||5*Math.abs(a[0]+a[1]+a[2]-n)>=2*n?NaN:this.foundPatternCross(a)?tD.centerFromEnd(a,s):NaN}handlePossibleCenter(e,t,r){let n=e[0]+e[1]+e[2],i=tD.centerFromEnd(e,r),o=this.crossCheckVertical(t,i,2*e[1],n);if(!isNaN(o)){let t=(e[0]+e[1]+e[2])/3;for(let e of this.possibleCenters)if(e.aboutEquals(t,o,i))return e.combineEstimate(o,i,t);let r=new tM(i,o,t);this.possibleCenters.push(r),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(r)}return null}}class tO extends eg{constructor(e,t,r,n){super(e,t),this.estimatedModuleSize=r,this.count=n,void 0===n&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){let t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){let n=this.count+1;return new tO((this.count*this.getX()+t)/n,(this.count*this.getY()+e)/n,(this.count*this.estimatedModuleSize+r)/n,n)}}class tP{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class tL{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){let t=null!=e&&void 0!==e.get(k.TRY_HARDER),r=null!=e&&void 0!==e.get(k.PURE_BARCODE),n=this.image,i=n.getHeight(),o=n.getWidth(),a=Math.floor(3*i/(4*tL.MAX_MODULES));(a<tL.MIN_SKIP||t)&&(a=tL.MIN_SKIP);let s=!1,l=new Int32Array(5);for(let e=a-1;e<i&&!s;e+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let t=0;for(let i=0;i<o;i++)if(n.get(i,e))(1&t)==1&&t++,l[t]++;else if((1&t)==0){if(4===t){if(tL.foundPatternCross(l)){if(!0===this.handlePossibleCenter(l,e,i,r)){if(a=2,!0===this.hasSkipped)s=this.haveMultiplyConfirmedCenters();else{let t=this.findRowSkip();t>l[2]&&(e+=t-l[2]-a,i=o-1)}}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3;continue}t=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3}else l[++t]++}else l[t]++;tL.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,e,o,r)&&(a=l[0],this.hasSkipped&&(s=this.haveMultiplyConfirmedCenters()))}let c=this.selectBestPatterns();return eg.orderBestPatterns(c),new tP(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let r=0;r<5;r++){let n=e[r];if(0===n)return!1;t+=n}if(t<7)return!1;let r=t/7,n=r/2;return Math.abs(r-e[0])<n&&Math.abs(r-e[1])<n&&Math.abs(3*r-e[2])<3*n&&Math.abs(r-e[3])<n&&Math.abs(r-e[4])<n}getCrossCheckStateCount(){let e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,r,n){let i=this.getCrossCheckStateCount(),o=0,a=this.image;for(;e>=o&&t>=o&&a.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!a.get(t-o,e-o)&&i[1]<=r;)i[1]++,o++;if(e<o||t<o||i[1]>r)return!1;for(;e>=o&&t>=o&&a.get(t-o,e-o)&&i[0]<=r;)i[0]++,o++;if(i[0]>r)return!1;let s=a.getHeight(),l=a.getWidth();for(o=1;e+o<s&&t+o<l&&a.get(t+o,e+o);)i[2]++,o++;if(e+o>=s||t+o>=l)return!1;for(;e+o<s&&t+o<l&&!a.get(t+o,e+o)&&i[3]<r;)i[3]++,o++;if(e+o>=s||t+o>=l||i[3]>=r)return!1;for(;e+o<s&&t+o<l&&a.get(t+o,e+o)&&i[4]<r;)i[4]++,o++;return!(i[4]>=r)&&Math.abs(i[0]+i[1]+i[2]+i[3]+i[4]-n)<2*n&&tL.foundPatternCross(i)}crossCheckVertical(e,t,r,n){let i=this.image,o=i.getHeight(),a=this.getCrossCheckStateCount(),s=e;for(;s>=0&&i.get(t,s);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i.get(t,s)&&a[1]<=r;)a[1]++,s--;if(s<0||a[1]>r)return NaN;for(;s>=0&&i.get(t,s)&&a[0]<=r;)a[0]++,s--;if(a[0]>r)return NaN;for(s=e+1;s<o&&i.get(t,s);)a[2]++,s++;if(s===o)return NaN;for(;s<o&&!i.get(t,s)&&a[3]<r;)a[3]++,s++;if(s===o||a[3]>=r)return NaN;for(;s<o&&i.get(t,s)&&a[4]<r;)a[4]++,s++;return a[4]>=r||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-n)>=2*n?NaN:tL.foundPatternCross(a)?tL.centerFromEnd(a,s):NaN}crossCheckHorizontal(e,t,r,n){let i=this.image,o=i.getWidth(),a=this.getCrossCheckStateCount(),s=e;for(;s>=0&&i.get(s,t);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i.get(s,t)&&a[1]<=r;)a[1]++,s--;if(s<0||a[1]>r)return NaN;for(;s>=0&&i.get(s,t)&&a[0]<=r;)a[0]++,s--;if(a[0]>r)return NaN;for(s=e+1;s<o&&i.get(s,t);)a[2]++,s++;if(s===o)return NaN;for(;s<o&&!i.get(s,t)&&a[3]<r;)a[3]++,s++;if(s===o||a[3]>=r)return NaN;for(;s<o&&i.get(s,t)&&a[4]<r;)a[4]++,s++;return a[4]>=r||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-n)>=n?NaN:tL.foundPatternCross(a)?tL.centerFromEnd(a,s):NaN}handlePossibleCenter(e,t,r,n){let i=e[0]+e[1]+e[2]+e[3]+e[4],o=tL.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(a)&&!isNaN(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(a),e[2],i))&&(!n||this.crossCheckDiagonal(Math.floor(a),Math.floor(o),e[2],i))){let e=i/7,t=!1,r=this.possibleCenters;for(let n=0,i=r.length;n<i;n++){let i=r[n];if(i.aboutEquals(e,a,o)){r[n]=i.combineEstimate(a,o,e),t=!0;break}}if(!t){let t=new tO(o,a,e);r.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(let t of this.possibleCenters)if(t.getCount()>=tL.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0,r=this.possibleCenters.length;for(let r of this.possibleCenters)r.getCount()>=tL.CENTER_QUORUM&&(e++,t+=r.getEstimatedModuleSize());if(e<3)return!1;let n=t/r,i=0;for(let e of this.possibleCenters)i+=Math.abs(e.getEstimatedModuleSize()-n);return i<=.05*t}selectBestPatterns(){let e;let t=this.possibleCenters.length;if(t<3)throw new W;let r=this.possibleCenters;if(t>3){let n=0,i=0;for(let e of this.possibleCenters){let t=e.getEstimatedModuleSize();n+=t,i+=t*t}e=n/t;let o=Math.sqrt(i/t-e*e);r.sort((t,r)=>{let n=Math.abs(r.getEstimatedModuleSize()-e),i=Math.abs(t.getEstimatedModuleSize()-e);return n<i?-1:n>i?1:0});let a=Math.max(.2*e,o);for(let t=0;t<r.length&&r.length>3;t++)Math.abs(r[t].getEstimatedModuleSize()-e)>a&&(r.splice(t,1),t--)}if(r.length>3){let t=0;for(let e of r)t+=e.getEstimatedModuleSize();e=t/r.length,r.sort((t,r)=>{if(r.getCount()!==t.getCount())return r.getCount()-t.getCount();{let n=Math.abs(r.getEstimatedModuleSize()-e),i=Math.abs(t.getEstimatedModuleSize()-e);return n<i?1:n>i?-1:0}}),r.splice(3)}return[r[0],r[1],r[2]]}}tL.CENTER_QUORUM=2,tL.MIN_SKIP=3,tL.MAX_MODULES=57;class tj{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null==e?null:e.get(k.NEED_RESULT_POINT_CALLBACK);let t=new tL(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){let t=e.getTopLeft(),r=e.getTopRight(),n=e.getBottomLeft(),i=this.calculateModuleSize(t,r,n);if(i<1)throw new W("No pattern found in proccess finder.");let o=tj.computeDimension(t,r,n,i),a=tb.getProvisionalVersionForDimension(o),s=a.getDimensionForVersion()-7,l=null;if(a.getAlignmentPatternCenters().length>0){let e=r.getX()-t.getX()+n.getX(),o=r.getY()-t.getY()+n.getY(),a=1-3/s,c=Math.floor(t.getX()+a*(e-t.getX())),d=Math.floor(t.getY()+a*(o-t.getY()));for(let e=4;e<=16;e<<=1)try{l=this.findAlignmentInRegion(i,c,d,e);break}catch(e){if(!(e instanceof W))throw e}}let c=tj.createTransform(t,r,n,l,o);return new em(tj.sampleGrid(this.image,c,o),null===l?[n,t,r]:[n,t,r,l])}static createTransform(e,t,r,n,i){let o,a,s,l;let c=i-3.5;return null!==n?(o=n.getX(),a=n.getY(),l=s=c-3):(o=t.getX()-e.getX()+r.getX(),a=t.getY()-e.getY()+r.getY(),s=c,l=c),eC.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,s,l,3.5,c,e.getX(),e.getY(),t.getX(),t.getY(),o,a,r.getX(),r.getY())}static sampleGrid(e,t,r){return ex.getInstance().sampleGridWithTransform(e,r,r,t)}static computeDimension(e,t,r,n){let i=Math.floor((ef.round(eg.distance(e,t)/n)+ef.round(eg.distance(e,r)/n))/2)+7;switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw new W("Dimensions could be not found.")}return i}calculateModuleSize(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,t){let r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,r,n){let i=this.sizeOfBlackWhiteBlackRun(e,t,r,n),o=1,a=e-(r-e);a<0?(o=e/(e-a),a=0):a>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);let s=Math.floor(t-(n-t)*o);return o=1,s<0?(o=t/(t-s),s=0):s>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),a=Math.floor(e+(a-e)*o),(i+=this.sizeOfBlackWhiteBlackRun(e,t,a,s))-1}sizeOfBlackWhiteBlackRun(e,t,r,n){let i=Math.abs(n-t)>Math.abs(r-e);if(i){let i=e;e=t,t=i,i=r,r=n,n=i}let o=Math.abs(r-e),a=Math.abs(n-t),s=-o/2,l=e<r?1:-1,c=t<n?1:-1,d=0,u=r+l;for(let r=e,h=t;r!==u;r+=l){let l=i?h:r,u=i?r:h;if(1===d===this.image.get(l,u)){if(2===d)return ef.distance(r,h,e,t);d++}if((s+=a)>0){if(h===n)break;h+=c,s-=o}}return 2===d?ef.distance(r+l,n,e,t):NaN}findAlignmentInRegion(e,t,r,n){let i=Math.floor(n*e),o=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-o<3*e)throw new W("Alignment top exceeds estimated module size.");let s=Math.max(0,r-i),l=Math.min(this.image.getHeight()-1,r+i);if(l-s<3*e)throw new W("Alignment bottom exceeds estimated module size.");return new tD(this.image,o,s,a-o,l-s,e,this.resultPointCallback).find()}}class tB{constructor(){this.decoder=new tR}getDecoder(){return this.decoder}decode(e,t){let r,n;if(null!=t&&void 0!==t.get(k.PURE_BARCODE)){let i=tB.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,t),n=tB.NO_POINTS}else{let i=new tj(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(i.getBits(),t),n=i.getPoints()}r.getOther() instanceof tN&&r.getOther().applyMirroredCorrection(n);let i=new et(r.getText(),r.getRawBytes(),void 0,n,er.QR_CODE,void 0),o=r.getByteSegments();null!==o&&i.putMetadata(en.BYTE_SEGMENTS,o);let a=r.getECLevel();return null!==a&&i.putMetadata(en.ERROR_CORRECTION_LEVEL,a),r.hasStructuredAppend()&&(i.putMetadata(en.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),i.putMetadata(en.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){let t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null===t||null===r)throw new W;let n=this.moduleSize(t,e),i=t[1],o=r[1],a=t[0],s=r[0];if(a>=s||i>=o||o-i!=s-a&&(s=a+(o-i))>=e.getWidth())throw new W;let l=Math.round((s-a+1)/n),c=Math.round((o-i+1)/n);if(l<=0||c<=0||c!==l)throw new W;let d=Math.floor(n/2);i+=d;let u=(a+=d)+Math.floor((l-1)*n)-s;if(u>0){if(u>d)throw new W;a-=u}let h=i+Math.floor((c-1)*n)-o;if(h>0){if(h>d)throw new W;i-=h}let f=new G(l,c);for(let t=0;t<c;t++){let r=i+Math.floor(t*n);for(let i=0;i<l;i++)e.get(a+Math.floor(i*n),r)&&f.set(i,t)}return f}static moduleSize(e,t){let r=t.getHeight(),n=t.getWidth(),i=e[0],o=e[1],a=!0,s=0;for(;i<n&&o<r;){if(a!==t.get(i,o)){if(5==++s)break;a=!a}i++,o++}if(i===n||o===r)throw new W;return(i-e[0])/7}}tB.NO_POINTS=[];class tk{PDF417Common(){}static getBitCountSum(e){return ef.sum(e)}static toIntArray(e){if(null==e||!e.length)return tk.EMPTY_INT_ARRAY;let t=new Int32Array(e.length),r=0;for(let n of e)t[r++]=n;return t}static getCodeword(e){let t=L.binarySearch(tk.SYMBOL_TABLE,262143&e);return t<0?-1:(tk.CODEWORD_TABLE[t]-1)%tk.NUMBER_OF_CODEWORDS}}tk.NUMBER_OF_CODEWORDS=929,tk.MAX_CODEWORDS_IN_BARCODE=tk.NUMBER_OF_CODEWORDS-1,tk.MIN_ROWS_IN_BARCODE=3,tk.MAX_ROWS_IN_BARCODE=90,tk.MODULES_IN_CODEWORD=17,tk.MODULES_IN_STOP_PATTERN=18,tk.BARS_IN_MODULE=8,tk.EMPTY_INT_ARRAY=new Int32Array([]),tk.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),tk.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class tF{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class tU{static detectMultiple(e,t,r){let n=e.getBlackMatrix(),i=tU.detect(r,n);return i.length||((n=n.clone()).rotate180(),i=tU.detect(r,n)),new tF(n,i)}static detect(e,t){let r=[],n=0,i=0,o=!1;for(;n<t.getHeight();){let a=tU.findVertices(t,n,i);if(null==a[0]&&null==a[3]){if(!o)break;for(let e of(o=!1,i=0,r))null!=e[1]&&(n=Math.trunc(Math.max(n,e[1].getY()))),null!=e[3]&&(n=Math.max(n,Math.trunc(e[3].getY())));n+=tU.ROW_STEP;continue}if(o=!0,r.push(a),!e)break;null!=a[2]?(i=Math.trunc(a[2].getX()),n=Math.trunc(a[2].getY())):(i=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY()))}return r}static findVertices(e,t,r){let n=e.getHeight(),i=e.getWidth(),o=Array(8);return tU.copyToResult(o,tU.findRowsWithPattern(e,n,i,t,r,tU.START_PATTERN),tU.INDEXES_START_PATTERN),null!=o[4]&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),tU.copyToResult(o,tU.findRowsWithPattern(e,n,i,t,r,tU.STOP_PATTERN),tU.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,r){for(let n=0;n<r.length;n++)e[r[n]]=t[n]}static findRowsWithPattern(e,t,r,n,i,o){let a=[,,,,],s=!1,l=new Int32Array(o.length);for(;n<t;n+=tU.ROW_STEP){let t=tU.findGuardPattern(e,i,n,r,!1,o,l);if(null!=t){for(;n>0;){let a=tU.findGuardPattern(e,i,--n,r,!1,o,l);if(null!=a)t=a;else{n++;break}}a[0]=new eg(t[0],n),a[1]=new eg(t[1],n),s=!0;break}}let c=n+1;if(s){let n=0,i=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;c<t;c++){let t=tU.findGuardPattern(e,i[0],c,r,!1,o,l);if(null!=t&&Math.abs(i[0]-t[0])<tU.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<tU.MAX_PATTERN_DRIFT)i=t,n=0;else{if(n>tU.SKIPPED_ROW_COUNT_MAX)break;n++}}c-=n+1,a[2]=new eg(i[0],c),a[3]=new eg(i[1],c)}return c-n<tU.BARCODE_MIN_HEIGHT&&L.fill(a,null),a}static findGuardPattern(e,t,r,n,i,o,a){L.fillWithin(a,0,a.length,0);let s=t,l=0;for(;e.get(s,r)&&s>0&&l++<tU.MAX_PIXEL_DRIFT;)s--;let c=s,d=0,u=o.length;for(let t=i;c<n;c++)if(e.get(c,r)!==t)a[d]++;else{if(d===u-1){if(tU.patternMatchVariance(a,o,tU.MAX_INDIVIDUAL_VARIANCE)<tU.MAX_AVG_VARIANCE)return new Int32Array([s,c]);s+=a[0]+a[1],D.arraycopy(a,2,a,0,d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,t=!t}return d===u-1&&tU.patternMatchVariance(a,o,tU.MAX_INDIVIDUAL_VARIANCE)<tU.MAX_AVG_VARIANCE?new Int32Array([s,c-1]):null}static patternMatchVariance(e,t,r){let n=e.length,i=0,o=0;for(let r=0;r<n;r++)i+=e[r],o+=t[r];if(i<o)return 1/0;let a=i/o;r*=a;let s=0;for(let i=0;i<n;i++){let n=e[i],o=t[i]*a,l=n>o?n-o:o-n;if(l>r)return 1/0;s+=l}return s/i}}tU.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),tU.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),tU.MAX_AVG_VARIANCE=.42,tU.MAX_INDIVIDUAL_VARIANCE=.8,tU.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),tU.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),tU.MAX_PIXEL_DRIFT=3,tU.MAX_PATTERN_DRIFT=5,tU.SKIPPED_ROW_COUNT_MAX=25,tU.ROW_STEP=5,tU.BARCODE_MIN_HEIGHT=10;class tH{constructor(e,t){if(0===t.length)throw new T;this.field=e;let r=t.length;if(r>1&&0===t[0]){let e=1;for(;e<r&&0===t[e];)e++;e===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-e),D.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],r=this.coefficients.length;for(let n=1;n<r;n++)t=this.field.add(this.field.multiply(e,t),this.coefficients[n]);return t}add(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){let e=t;t=r,r=e}let n=new Int32Array(r.length),i=r.length-t.length;D.arraycopy(r,0,n,0,i);for(let e=i;e<r.length;e++)n[e]=this.field.add(t[e-i],r[e]);return new tH(this.field,n)}subtract(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof tH?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new tH(this.field,new Int32Array([0]));let t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,o=new Int32Array(r+i-1);for(let e=0;e<r;e++){let r=t[e];for(let t=0;t<i;t++)o[e+t]=this.field.add(o[e+t],this.field.multiply(r,n[t]))}return new tH(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new tH(this.field,t)}multiplyScalar(e){if(0===e)return new tH(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=this.field.multiply(this.coefficients[n],e);return new tH(this.field,r)}multiplyByMonomial(e,t){if(e<0)throw new T;if(0===t)return new tH(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+e);for(let e=0;e<r;e++)n[e]=this.field.multiply(this.coefficients[e],t);return new tH(this.field,n)}toString(){let e=new Y;for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);0!==r&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(0===t||1!==r)&&e.append(r),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class tz{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new T;return this.logTable[e]}inverse(e){if(0===e)throw new es;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class tV extends tz{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let n=0;n<e;n++)this.expTable[n]=r,r=r*t%e;for(let t=0;t<e-1;t++)this.logTable[this.expTable[t]]=t;this.zero=new tH(this,new Int32Array([0])),this.one=new tH(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new T;if(0===t)return this.zero;let r=new Int32Array(e+1);return r[0]=t,new tH(this,r)}}tV.PDF417_GF=new tV(tk.NUMBER_OF_CODEWORDS,3);class tY{constructor(){this.field=tV.PDF417_GF}decode(e,t,r){let n=new tH(this.field,e),i=new Int32Array(t),o=!1;for(let e=t;e>0;e--){let r=n.evaluateAt(this.field.exp(e));i[t-e]=r,0!==r&&(o=!0)}if(!o)return 0;let a=this.field.getOne();if(null!=r)for(let t of r){let r=this.field.exp(e.length-1-t),n=new tH(this.field,new Int32Array([this.field.subtract(0,r),1]));a=a.multiply(n)}let s=new tH(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),s,t),c=l[0],d=l[1],u=this.findErrorLocations(c),h=this.findErrorMagnitudes(d,c,u);for(let t=0;t<u.length;t++){let r=e.length-1-this.field.log(u[t]);if(r<0)throw R.getChecksumInstance();e[r]=this.field.subtract(e[r],h[t])}return u.length}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){let r=e;e=t,t=r}let n=e,i=t,o=this.field.getZero(),a=this.field.getOne();for(;i.getDegree()>=Math.round(r/2);){let e=n,t=o;if(n=i,o=a,n.isZero())throw R.getChecksumInstance();i=e;let r=this.field.getZero(),s=n.getCoefficient(n.getDegree()),l=this.field.inverse(s);for(;i.getDegree()>=n.getDegree()&&!i.isZero();){let e=i.getDegree()-n.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);r=r.add(this.field.buildMonomial(e,t)),i=i.subtract(n.multiplyByMonomial(e,t))}a=r.multiply(o).subtract(t).negative()}let s=a.getCoefficient(0);if(0===s)throw R.getChecksumInstance();let l=this.field.inverse(s);return[a.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),r=new Int32Array(t),n=0;for(let i=1;i<this.field.getSize()&&n<t;i++)0===e.evaluateAt(i)&&(r[n]=this.field.inverse(i),n++);if(n!==t)throw R.getChecksumInstance();return r}findErrorMagnitudes(e,t,r){let n=t.getDegree(),i=new Int32Array(n);for(let e=1;e<=n;e++)i[n-e]=this.field.multiply(e,t.getCoefficient(e));let o=new tH(this.field,i),a=r.length,s=new Int32Array(a);for(let t=0;t<a;t++){let n=this.field.inverse(r[t]),i=this.field.subtract(0,e.evaluateAt(n)),a=this.field.inverse(o.evaluateAt(n));s[t]=this.field.multiply(i,a)}return s}}class tG{constructor(e,t,r,n,i){e instanceof tG?this.constructor_2(e):this.constructor_1(e,t,r,n,i)}constructor_1(e,t,r,n,i){let o=null==t||null==r,a=null==n||null==i;if(o&&a)throw new W;o?(t=new eg(0,n.getY()),r=new eg(0,i.getY())):a&&(n=new eg(e.getWidth()-1,t.getY()),i=new eg(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=n,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new tG(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,r){let n=this.topLeft,i=this.bottomLeft,o=this.topRight,a=this.bottomRight;if(e>0){let t=r?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let a=new eg(t.getX(),i);r?n=a:o=a}if(t>0){let e=r?this.bottomLeft:this.bottomRight,n=Math.trunc(e.getY()+t);n>=this.image.getHeight()&&(n=this.image.getHeight()-1);let o=new eg(e.getX(),n);r?i=o:a=o}return new tG(this.image,n,i,o,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class tW{constructor(e,t,r,n){this.columnCount=e,this.errorCorrectionLevel=n,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class tX{constructor(){this.buffer=""}static form(e,t){let r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,n,i,o,a,s){let l;if("%%"===e)return"%";if(void 0===t[++r])return;e=o?parseInt(o.substr(1)):void 0;let c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[r];break;case"c":l=t[r][0];break;case"f":l=parseFloat(t[r]).toFixed(e);break;case"p":l=parseFloat(t[r]).toPrecision(e);break;case"e":l=parseFloat(t[r]).toExponential(e);break;case"x":l=parseInt(t[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(c);let d=parseInt(i),u=i&&i[0]+""=="0"?"0":" ";for(;l.length<d;)l=void 0!==n?l+u:u+l;return l})}format(e,...t){this.buffer+=tX.form(e,t)}toString(){return this.buffer}}class tq{constructor(e){this.boundingBox=new tG(e),this.codewords=Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let r=1;r<tq.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(e)-r;if(n>=0&&null!=(t=this.codewords[n])||(n=this.imageRowToCodewordIndex(e)+r)<this.codewords.length&&null!=(t=this.codewords[n]))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let e=new tX,t=0;for(let r of this.codewords){if(null==r){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,r.getRowNumber(),r.getValue())}return e.toString()}}tq.MAX_NEARBY_DISTANCE=5;class tZ{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=[];for(let[r,n]of this.values.entries()){let i={getKey:()=>r,getValue:()=>n};i.getValue()>e?(e=i.getValue(),(t=[]).push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return tk.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class tQ extends tq{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),i=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=-1,l=1,c=0;for(let r=o;r<a;r++){if(null==t[r])continue;let n=t[r],i=n.getRowNumber()-s;if(0===i)c++;else if(1===i)l=Math.max(l,c),c=1,s=n.getRowNumber();else if(i<0||n.getRowNumber()>=e.getRowCount()||i>r)t[r]=null;else{let e;let o=(e=l>2?(l-2)*i:i)>=r;for(let n=1;n<=e&&!o;n++)o=null!=t[r-n];o?t[r]=null:(s=n.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let e of this.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),r=this._isLeft?t.getTopLeft():t.getTopRight(),n=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.getCodewords(),s=-1;for(let t=i;t<o;t++){if(null==a[t])continue;let r=a[t];r.setRowNumberAsRowIndicatorColumn();let n=r.getRowNumber()-s;0===n||(1===n?s=r.getRowNumber():r.getRowNumber()>=e.getRowCount()?a[t]=null:s=r.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new tZ,r=new tZ,n=new tZ,i=new tZ;for(let o of e){if(null==o)continue;o.setRowNumberAsRowIndicatorColumn();let e=o.getValue()%30,a=o.getRowNumber();switch(this._isLeft||(a+=2),a%3){case 0:r.setValue(3*e+1);break;case 1:i.setValue(e/3),n.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===r.getValue().length||0===n.getValue().length||0===i.getValue().length||t.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<tk.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>tk.MAX_ROWS_IN_BARCODE)return null;let o=new tW(t.getValue()[0],r.getValue()[0],n.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(null==e[r])continue;let i=n.getValue()%30,o=n.getRowNumber();if(o>t.getRowCount()){e[r]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[r]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[r]=null);break;case 2:i+1!==t.getColumnCount()&&(e[r]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class tK{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){let e;this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=tk.MAX_CODEWORDS_IN_BARCODE;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let e=1;e<this.barcodeColumnCount+1;e++){let t=this.detectionResultColumns[e].getCodewords();for(let r=0;r<t.length;r++)null!=t[r]&&(t[r].hasValidRowNumber()||this.adjustRowNumbers(e,r,t))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(null!=e[r]&&null!=t[r]&&e[r].getRowNumber()===t[r].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let n=this.detectionResultColumns[t].getCodewords()[r];null!=n&&(n.setRowNumber(e[r].getRowNumber()),n.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let o=this.detectionResultColumns[t].getCodewords()[r];null!=o&&(i=tK.adjustRowNumberIfValid(n,i,o),!o.hasValidRowNumber()&&e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let o=this.detectionResultColumns[t].getCodewords()[r];null!=o&&(i=tK.adjustRowNumberIfValid(n,i,o),!o.hasValidRowNumber()&&e++)}}return e}static adjustRowNumberIfValid(e,t,r){return null==r||!r.hasValidRowNumber()&&(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,r){if(!this.detectionResultColumns[e-1])return;let n=r[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;null!=this.detectionResultColumns[e+1]&&(o=this.detectionResultColumns[e+1].getCodewords());let a=Array(14);for(let e of(a[2]=i[t],a[3]=o[t],t>0&&(a[0]=r[t-1],a[4]=i[t-1],a[5]=o[t-1]),t>1&&(a[8]=r[t-2],a[10]=i[t-2],a[11]=o[t-2]),t<r.length-1&&(a[1]=r[t+1],a[6]=i[t+1],a[7]=o[t+1]),t<r.length-2&&(a[9]=r[t+2],a[12]=i[t+2],a[13]=o[t+2]),a))if(tK.adjustRowNumber(n,e))return}static adjustRowNumber(e,t){return null!=t&&!!t.hasValidRowNumber()&&t.getBucket()===e.getBucket()&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new tX;for(let r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let n=this.detectionResultColumns[e].getCodewords()[r];if(null==n){t.format("    |   ");continue}t.format(" %3d|%3d",n.getRowNumber(),n.getValue())}t.format("%n")}return t.toString()}}class t${constructor(e,t,r,n){this.rowNumber=t$.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==t$.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}t$.BARCODE_ROW_UNKNOWN=-1;class tJ{static initialize(){for(let e=0;e<tk.SYMBOL_TABLE.length;e++){let t=tk.SYMBOL_TABLE[e],r=1&t;for(let n=0;n<tk.BARS_IN_MODULE;n++){let i=0;for(;(1&t)===r;)i+=1,t>>=1;r=1&t,tJ.RATIOS_TABLE[e]||(tJ.RATIOS_TABLE[e]=Array(tk.BARS_IN_MODULE)),tJ.RATIOS_TABLE[e][tk.BARS_IN_MODULE-n-1]=Math.fround(i/tk.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tJ.getDecodedCodewordValue(tJ.sampleBitCounts(e));return -1!==t?t:tJ.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=ef.sum(e),r=new Int32Array(tk.BARS_IN_MODULE),n=0,i=0;for(let o=0;o<tk.MODULES_IN_CODEWORD;o++){let a=t/(2*tk.MODULES_IN_CODEWORD)+o*t/tk.MODULES_IN_CODEWORD;i+e[n]<=a&&(i+=e[n],n++),r[n]++}return r}static getDecodedCodewordValue(e){let t=tJ.getBitValue(e);return -1===tk.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let r=0;r<e.length;r++)for(let n=0;n<e[r];n++)t=t<<1|(r%2==0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=ef.sum(e),r=Array(tk.BARS_IN_MODULE);if(t>1)for(let n=0;n<r.length;n++)r[n]=Math.fround(e[n]/t);let n=ep.MAX_VALUE,i=-1;this.bSymbolTableReady||tJ.initialize();for(let e=0;e<tJ.RATIOS_TABLE.length;e++){let t=0,o=tJ.RATIOS_TABLE[e];for(let e=0;e<tk.BARS_IN_MODULE;e++){let i=Math.fround(o[e]-r[e]);if((t+=Math.fround(i*i))>=n)break}t<n&&(n=t,i=tk.SYMBOL_TABLE[e])}return i}}tJ.bSymbolTableReady=!1,tJ.RATIOS_TABLE=Array(tk.SYMBOL_TABLE.length).map(e=>Array(tk.BARS_IN_MODULE));class t1{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class t0{static parseLong(e,t){return parseInt(e,t)}}class t2 extends I{}t2.kind="NullPointerException";class t4{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,r){if(null==e)throw new t2;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new O;if(0!==r)for(let n=0;n<r;n++)this.write(e[t+n])}flush(){}close(){}}class t3 extends I{}class t8 extends t4{constructor(e=32){if(super(),this.count=0,e<0)throw new T("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new t3;t=j.MAX_VALUE}this.buf=L.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,r){if(t<0||t>e.length||r<0||t+r-e.length>0)throw new O;this.ensureCapacity(this.count+r),D.arraycopy(e,t,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return L.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"==typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function t6(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw Error("Can't search globals for BigInt!")}function t5(e){if(void 0===t&&(t=t6()),null===t)throw Error("BigInt is not supported!");return t(e)}(u=x||(x={}))[u.ALPHA=0]="ALPHA",u[u.LOWER=1]="LOWER",u[u.MIXED=2]="MIXED",u[u.PUNCT=3]="PUNCT",u[u.ALPHA_SHIFT=4]="ALPHA_SHIFT",u[u.PUNCT_SHIFT=5]="PUNCT_SHIFT";class t7{static decode(e,t){let r=new Y(""),n=U.ISO8859_1;r.enableDecoding(n);let i=1,o=e[i++],a=new t1;for(;i<e[0];){switch(o){case t7.TEXT_COMPACTION_MODE_LATCH:i=t7.textCompaction(e,i,r);break;case t7.BYTE_COMPACTION_MODE_LATCH:case t7.BYTE_COMPACTION_MODE_LATCH_6:i=t7.byteCompaction(o,e,n,i,r);break;case t7.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[i++]);break;case t7.NUMERIC_COMPACTION_MODE_LATCH:i=t7.numericCompaction(e,i,r);break;case t7.ECI_CHARSET:U.getCharacterSetECIByValue(e[i++]);break;case t7.ECI_GENERAL_PURPOSE:i+=2;break;case t7.ECI_USER_DEFINED:i++;break;case t7.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t7.decodeMacroBlock(e,i,a);break;case t7.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t7.MACRO_PDF417_TERMINATOR:throw new F;default:i--,i=t7.textCompaction(e,i,r)}if(i<e.length)o=e[i++];else throw F.getFormatInstance()}if(0===r.length())throw F.getFormatInstance();let s=new ei(null,r.toString(),null,t);return s.setOther(a),s}static decodeMacroBlock(e,t,r){if(t+t7.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw F.getFormatInstance();let n=new Int32Array(t7.NUMBER_OF_SEQUENCE_CODEWORDS);for(let r=0;r<t7.NUMBER_OF_SEQUENCE_CODEWORDS;r++,t++)n[r]=e[t];r.setSegmentIndex(j.parseInt(t7.decodeBase900toBase10(n,t7.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new Y;t=t7.textCompaction(e,t,i),r.setFileId(i.toString());let o=-1;for(e[t]===t7.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case t7.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case t7.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let n=new Y;t=t7.textCompaction(e,t+1,n),r.setFileName(n.toString());break;case t7.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new Y;t=t7.textCompaction(e,t+1,i),r.setSender(i.toString());break;case t7.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new Y;t=t7.textCompaction(e,t+1,o),r.setAddressee(o.toString());break;case t7.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let a=new Y;t=t7.numericCompaction(e,t+1,a),r.setSegmentCount(j.parseInt(a.toString()));break;case t7.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let s=new Y;t=t7.numericCompaction(e,t+1,s),r.setTimestamp(t0.parseLong(s.toString()));break;case t7.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new Y;t=t7.numericCompaction(e,t+1,l),r.setChecksum(j.parseInt(l.toString()));break;case t7.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new Y;t=t7.numericCompaction(e,t+1,c),r.setFileSize(t0.parseLong(c.toString()));break;default:throw F.getFormatInstance()}break;case t7.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(-1!==o){let n=t-o;r.isLastSegment()&&n--,r.setOptionalData(L.copyOfRange(e,o,o+n))}return t}static textCompaction(e,t,r){let n=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),o=0,a=!1;for(;t<e[0]&&!a;){let r=e[t++];if(r<t7.TEXT_COMPACTION_MODE_LATCH)n[o]=r/30,n[o+1]=r%30,o+=2;else switch(r){case t7.TEXT_COMPACTION_MODE_LATCH:n[o++]=t7.TEXT_COMPACTION_MODE_LATCH;break;case t7.BYTE_COMPACTION_MODE_LATCH:case t7.BYTE_COMPACTION_MODE_LATCH_6:case t7.NUMERIC_COMPACTION_MODE_LATCH:case t7.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t7.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t7.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case t7.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[o]=t7.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,r=e[t++],i[o]=r,o++}}return t7.decodeTextCompaction(n,i,o,r),t}static decodeTextCompaction(e,t,r,n){let i=x.ALPHA,o=x.ALPHA,a=0;for(;a<r;){let r=e[a],s="";switch(i){case x.ALPHA:if(r<26)s=String.fromCharCode(65+r);else switch(r){case 26:s=" ";break;case t7.LL:i=x.LOWER;break;case t7.ML:i=x.MIXED;break;case t7.PS:o=i,i=x.PUNCT_SHIFT;break;case t7.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case t7.TEXT_COMPACTION_MODE_LATCH:i=x.ALPHA}break;case x.LOWER:if(r<26)s=String.fromCharCode(97+r);else switch(r){case 26:s=" ";break;case t7.AS:o=i,i=x.ALPHA_SHIFT;break;case t7.ML:i=x.MIXED;break;case t7.PS:o=i,i=x.PUNCT_SHIFT;break;case t7.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case t7.TEXT_COMPACTION_MODE_LATCH:i=x.ALPHA}break;case x.MIXED:if(r<t7.PL)s=t7.MIXED_CHARS[r];else switch(r){case t7.PL:i=x.PUNCT;break;case 26:s=" ";break;case t7.LL:i=x.LOWER;break;case t7.AL:i=x.ALPHA;break;case t7.PS:o=i,i=x.PUNCT_SHIFT;break;case t7.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case t7.TEXT_COMPACTION_MODE_LATCH:i=x.ALPHA}break;case x.PUNCT:if(r<t7.PAL)s=t7.PUNCT_CHARS[r];else switch(r){case t7.PAL:i=x.ALPHA;break;case t7.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case t7.TEXT_COMPACTION_MODE_LATCH:i=x.ALPHA}break;case x.ALPHA_SHIFT:if(i=o,r<26)s=String.fromCharCode(65+r);else switch(r){case 26:s=" ";break;case t7.TEXT_COMPACTION_MODE_LATCH:i=x.ALPHA}break;case x.PUNCT_SHIFT:if(i=o,r<t7.PAL)s=t7.PUNCT_CHARS[r];else switch(r){case t7.PAL:i=x.ALPHA;break;case t7.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case t7.TEXT_COMPACTION_MODE_LATCH:i=x.ALPHA}}""!==s&&n.append(s),a++}}static byteCompaction(e,t,r,n,i){let o=new t8,a=0,s=0,l=!1;switch(e){case t7.BYTE_COMPACTION_MODE_LATCH:let c=new Int32Array(6),d=t[n++];for(;n<t[0]&&!l;)switch(c[a++]=d,s=900*s+d,d=t[n++]){case t7.TEXT_COMPACTION_MODE_LATCH:case t7.BYTE_COMPACTION_MODE_LATCH:case t7.NUMERIC_COMPACTION_MODE_LATCH:case t7.BYTE_COMPACTION_MODE_LATCH_6:case t7.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t7.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t7.MACRO_PDF417_TERMINATOR:n--,l=!0;break;default:if(a%5==0&&a>0){for(let e=0;e<6;++e)o.write(Number(t5(s)>>t5(8*(5-e))));s=0,a=0}}n===t[0]&&d<t7.TEXT_COMPACTION_MODE_LATCH&&(c[a++]=d);for(let e=0;e<a;e++)o.write(c[e]);break;case t7.BYTE_COMPACTION_MODE_LATCH_6:for(;n<t[0]&&!l;){let e=t[n++];if(e<t7.TEXT_COMPACTION_MODE_LATCH)a++,s=900*s+e;else switch(e){case t7.TEXT_COMPACTION_MODE_LATCH:case t7.BYTE_COMPACTION_MODE_LATCH:case t7.NUMERIC_COMPACTION_MODE_LATCH:case t7.BYTE_COMPACTION_MODE_LATCH_6:case t7.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t7.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t7.MACRO_PDF417_TERMINATOR:n--,l=!0}if(a%5==0&&a>0){for(let e=0;e<6;++e)o.write(Number(t5(s)>>t5(8*(5-e))));s=0,a=0}}}return i.append(z.decode(o.toByteArray(),r)),n}static numericCompaction(e,t,r){let n=0,i=!1,o=new Int32Array(t7.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let a=e[t++];if(t===e[0]&&(i=!0),a<t7.TEXT_COMPACTION_MODE_LATCH)o[n]=a,n++;else switch(a){case t7.TEXT_COMPACTION_MODE_LATCH:case t7.BYTE_COMPACTION_MODE_LATCH:case t7.BYTE_COMPACTION_MODE_LATCH_6:case t7.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t7.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t7.MACRO_PDF417_TERMINATOR:t--,i=!0}(n%t7.MAX_NUMERIC_CODEWORDS==0||a===t7.NUMERIC_COMPACTION_MODE_LATCH||i)&&n>0&&(r.append(t7.decodeBase900toBase10(o,n)),n=0)}return t}static decodeBase900toBase10(e,t){let r=t5(0);for(let n=0;n<t;n++)r+=t7.EXP900[t-n-1]*t5(e[n]);let n=r.toString();if("1"!==n.charAt(0))throw new F;return n.substring(1)}}t7.TEXT_COMPACTION_MODE_LATCH=900,t7.BYTE_COMPACTION_MODE_LATCH=901,t7.NUMERIC_COMPACTION_MODE_LATCH=902,t7.BYTE_COMPACTION_MODE_LATCH_6=924,t7.ECI_USER_DEFINED=925,t7.ECI_GENERAL_PURPOSE=926,t7.ECI_CHARSET=927,t7.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t7.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t7.MACRO_PDF417_TERMINATOR=922,t7.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t7.MAX_NUMERIC_CODEWORDS=15,t7.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t7.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t7.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t7.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t7.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t7.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t7.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t7.PL=25,t7.LL=27,t7.AS=27,t7.ML=28,t7.AL=28,t7.PS=29,t7.PAL=29,t7.PUNCT_CHARS=";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'",t7.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t7.EXP900=t6()?function(){let e=[];e[0]=t5(1);let t=t5(900);e[1]=t;for(let r=2;r<16;r++)e[r]=e[r-1]*t;return e}():[],t7.NUMBER_OF_SEQUENCE_CODEWORDS=2;class t9{constructor(){}static decode(e,t,r,n,i,o,a){let s,l=new tG(e,t,r,n,i),c=null,d=null;for(let r=!0;;r=!1){if(null!=t&&(c=t9.getRowIndicatorColumn(e,l,t,!0,o,a)),null!=n&&(d=t9.getRowIndicatorColumn(e,l,n,!1,o,a)),null==(s=t9.merge(c,d)))throw W.getNotFoundInstance();let i=s.getBoundingBox();if(r&&null!=i&&(i.getMinY()<l.getMinY()||i.getMaxY()>l.getMaxY()))l=i;else break}s.setBoundingBox(l);let u=s.getBarcodeColumnCount()+1;s.setDetectionResultColumn(0,c),s.setDetectionResultColumn(u,d);let h=null!=c;for(let t=1;t<=u;t++){let r,n=h?t:u-t;if(void 0!==s.getDetectionResultColumn(n))continue;r=0===n||n===u?new tQ(l,0===n):new tq(l),s.setDetectionResultColumn(n,r);let i=-1,c=-1;for(let t=l.getMinY();t<=l.getMaxY();t++){if((i=t9.getStartColumn(s,n,t,h))<0||i>l.getMaxX()){if(-1===c)continue;i=c}let d=t9.detectCodeword(e,l.getMinX(),l.getMaxX(),h,i,t,o,a);null!=d&&(r.setCodeword(t,d),c=i,o=Math.min(o,d.getWidth()),a=Math.max(a,d.getWidth()))}}return t9.createDecoderResult(s)}static merge(e,t){if(null==e&&null==t)return null;let r=t9.getBarcodeMetadata(e,t);return null==r?null:new tK(r,tG.merge(t9.adjustBoundingBox(e),t9.adjustBoundingBox(t)))}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let r=t9.getMax(t),n=0;for(let e of t)if(n+=r-e,e>0)break;let i=e.getCodewords();for(let e=0;n>0&&null==i[e];e++)n--;let o=0;for(let e=t.length-1;e>=0&&(o+=r-t[e],!(t[e]>0));e--);for(let e=i.length-1;o>0&&null==i[e];e--)o--;return e.getBoundingBox().addMissingRows(n,o,e.isLeft())}static getMax(e){let t=-1;for(let r of e)t=Math.max(t,r);return t}static getBarcodeMetadata(e,t){let r,n;return null==e||null==(r=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(n=t.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(e,t,r,n,i,o){let a=new tQ(t,n);for(let s=0;s<2;s++){let l=0===s?1:-1,c=Math.trunc(Math.trunc(r.getX()));for(let s=Math.trunc(Math.trunc(r.getY()));s<=t.getMaxY()&&s>=t.getMinY();s+=l){let t=t9.detectCodeword(e,0,e.getWidth(),n,c,s,i,o);null!=t&&(a.setCodeword(s,t),c=n?t.getStartX():t.getEndX())}}return a}static adjustCodewordCount(e,t){let r=t[0][1],n=r.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t9.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===n.length){if(i<1||i>tk.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();r.setValue(i)}else n[0]!==i&&r.setValue(i)}static createDecoderResult(e){let t=t9.createBarcodeMatrix(e);t9.adjustCodewordCount(e,t);let r=[],n=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=[];for(let a=0;a<e.getBarcodeRowCount();a++)for(let s=0;s<e.getBarcodeColumnCount();s++){let l=t[a][s+1].getValue(),c=a*e.getBarcodeColumnCount()+s;0===l.length?r.push(c):1===l.length?n[c]=l[0]:(o.push(c),i.push(l))}let a=Array(i.length);for(let e=0;e<a.length;e++)a[e]=i[e];return t9.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),n,tk.toIntArray(r),tk.toIntArray(o),a)}static createDecoderResultFromAmbiguousValues(e,t,r,n,i){let o=new Int32Array(n.length),a=100;for(;a-- >0;){for(let e=0;e<o.length;e++)t[n[e]]=i[e][o[e]];try{return t9.decodeCodewords(t,e,r)}catch(e){if(!(e instanceof R))throw e}if(0===o.length)break;for(let e=0;e<o.length;e++){if(o[e]<i[e].length-1){o[e]++;break}if(o[e]=0,e===o.length-1)throw R.getChecksumInstance()}}throw R.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>Array(e.getBarcodeColumnCount()+2));for(let e=0;e<t.length;e++)for(let r=0;r<t[e].length;r++)t[e][r]=new tZ;let r=0;for(let n of e.getDetectionResultColumns()){if(null!=n){for(let e of n.getCodewords())if(null!=e){let n=e.getRowNumber();if(n>=0){if(n>=t.length)continue;t[n][r].setValue(e.getValue())}}}r++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,r,n){let i=n?1:-1,o=null;if(t9.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(r)),null!=o)return n?o.getEndX():o.getStartX();if(null!=(o=e.getDetectionResultColumn(t).getCodewordNearby(r)))return n?o.getStartX():o.getEndX();if(t9.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(r)),null!=o)return n?o.getEndX():o.getStartX();let a=0;for(;t9.isValidBarcodeColumn(e,t-i);){for(let r of(t-=i,e.getDetectionResultColumn(t).getCodewords()))if(null!=r)return(n?r.getEndX():r.getStartX())+i*a*(r.getEndX()-r.getStartX());a++}return n?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,r,n,i,o,a,s){let l;i=t9.adjustCodewordStartColumn(e,t,r,n,i,o);let c=t9.getModuleBitCount(e,t,r,n,i,o);if(null==c)return null;let d=ef.sum(c);if(n)l=i+d;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}i=(l=i)-d}if(!t9.checkCodewordSkew(d,a,s))return null;let u=tJ.getDecodedValue(c),h=tk.getCodeword(u);return -1===h?null:new t$(i,l,t9.getCodewordBucketNumber(u),h)}static getModuleBitCount(e,t,r,n,i,o){let a=i,s=new Int32Array(8),l=0,c=n?1:-1,d=n;for(;(n?a<r:a>=t)&&l<s.length;)e.get(a,o)===d?(s[l]++,a+=c):(l++,d=!d);return l===s.length||a===(n?r:t)&&l===s.length-1?s:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,r,n,i,o){let a=i,s=n?-1:1;for(let l=0;l<2;l++){for(;(n?a>=t:a<r)&&n===e.get(a,o);){if(Math.abs(i-a)>t9.CODEWORD_SKEW_SIZE)return i;a+=s}s=-s,n=!n}return a}static checkCodewordSkew(e,t,r){return t-t9.CODEWORD_SKEW_SIZE<=e&&e<=r+t9.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,r){if(0===e.length)throw F.getFormatInstance();let n=1<<t+1,i=t9.correctErrors(e,r,n);t9.verifyCodewordCount(e,n);let o=t7.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(r.length),o}static correctErrors(e,t,r){if(null!=t&&t.length>r/2+t9.MAX_ERRORS||r<0||r>t9.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return t9.errorCorrection.decode(e,r,t)}static verifyCodewordCount(e,t){if(e.length<4)throw F.getFormatInstance();let r=e[0];if(r>e.length)throw F.getFormatInstance();if(0===r){if(t<e.length)e[0]=e.length-t;else throw F.getFormatInstance()}}static getBitCountForCodeword(e){let t=new Int32Array(8),r=0,n=t.length-1;for(;!((1&e)!==r&&(r=1&e,--n<0));)t[n]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return t9.getCodewordBucketNumber(t9.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new tX;for(let r=0;r<e.length;r++){t.format("Row %2d: ",r);for(let n=0;n<e[r].length;n++){let i=e[r][n];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}t9.CODEWORD_SKEW_SIZE=2,t9.MAX_ERRORS=3,t9.MAX_EC_CODEWORDS=512,t9.errorCorrection=new tY;class re{decode(e,t=null){let r=re.decode(e,t,!1);if(null==r||0===r.length||null==r[0])throw W.getNotFoundInstance();return r[0]}decodeMultiple(e,t=null){try{return re.decode(e,t,!0)}catch(e){if(e instanceof F||e instanceof R)throw W.getNotFoundInstance();throw e}}static decode(e,t,r){let n=[],i=tU.detectMultiple(e,t,r);for(let e of i.getPoints()){let t=t9.decode(i.getBits(),e[4],e[5],e[6],e[7],re.getMinCodewordWidth(e),re.getMaxCodewordWidth(e)),r=new et(t.getText(),t.getRawBytes(),void 0,e,er.PDF_417);r.putMetadata(en.ERROR_CORRECTION_LEVEL,t.getECLevel());let o=t.getOther();null!=o&&r.putMetadata(en.PDF417_EXTRA_METADATA,o),n.push(r)}return n.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?j.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(re.getMaxWidth(e[0],e[4]),re.getMaxWidth(e[6],e[2])*tk.MODULES_IN_CODEWORD/tk.MODULES_IN_STOP_PATTERN),Math.max(re.getMaxWidth(e[1],e[5]),re.getMaxWidth(e[7],e[3])*tk.MODULES_IN_CODEWORD/tk.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(re.getMinWidth(e[0],e[4]),re.getMinWidth(e[6],e[2])*tk.MODULES_IN_CODEWORD/tk.MODULES_IN_STOP_PATTERN),Math.min(re.getMinWidth(e[1],e[5]),re.getMinWidth(e[7],e[3])*tk.MODULES_IN_CODEWORD/tk.MODULES_IN_STOP_PATTERN)))}reset(){}}class rt extends I{}rt.kind="ReaderException";class rr{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(null===this.readers||void 0===this.readers)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;let t=null!=e&&!0===e.get(k.TRY_HARDER),r=null==e?null:e.get(k.POSSIBLE_FORMATS),n=[];if(null!=r){let i=r.some(e=>e===er.UPC_A||e===er.UPC_E||e===er.EAN_13||e===er.EAN_8||e===er.CODABAR||e===er.CODE_39||e===er.CODE_93||e===er.CODE_128||e===er.ITF||e===er.RSS_14||e===er.RSS_EXPANDED);i&&!t&&n.push(new ta(e,this.verbose)),r.includes(er.QR_CODE)&&n.push(new tB),r.includes(er.DATA_MATRIX)&&n.push(new tw),r.includes(er.AZTEC)&&n.push(new eS),r.includes(er.PDF_417)&&n.push(new re),i&&t&&n.push(new ta(e,this.verbose))}0===n.length&&(t||n.push(new ta(e,this.verbose)),n.push(new tB),n.push(new tw),n.push(new eS),n.push(new re),t&&n.push(new ta(e,this.verbose))),this.readers=n}reset(){if(null!==this.readers)for(let e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new rt("No readers where selected, nothing can be read.");for(let t of this.readers)try{return t.decode(e,this.hints)}catch(e){if(e instanceof rt)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class rn extends ee{constructor(e=null,t=500){let r=new rr;r.setHints(e),super(r,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class ri extends ee{constructor(e=500){super(new re,e)}}class ro extends ee{constructor(e=500){super(new tB,e)}}(h=b||(b={}))[h.ERROR_CORRECTION=0]="ERROR_CORRECTION",h[h.CHARACTER_SET=1]="CHARACTER_SET",h[h.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",h[h.MIN_SIZE=3]="MIN_SIZE",h[h.MAX_SIZE=4]="MAX_SIZE",h[h.MARGIN=5]="MARGIN",h[h.PDF417_COMPACT=6]="PDF417_COMPACT",h[h.PDF417_COMPACTION=7]="PDF417_COMPACTION",h[h.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",h[h.AZTEC_LAYERS=9]="AZTEC_LAYERS",h[h.QR_VERSION=10]="QR_VERSION";var ra=b;class rs{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ea(e,Int32Array.from([1])))}buildGenerator(e){let t=this.cachedGenerators;if(e>=t.length){let r=t[t.length-1],n=this.field;for(let i=t.length;i<=e;i++){let e=r.multiply(new ea(n,Int32Array.from([1,n.exp(i-1+n.getGeneratorBase())])));t.push(e),r=e}}return t[e]}encode(e,t){if(0===t)throw new T("No error correction bytes");let r=e.length-t;if(r<=0)throw new T("No data bytes provided");let n=this.buildGenerator(t),i=new Int32Array(r);D.arraycopy(e,0,i,0,r);let o=new ea(this.field,i),a=(o=o.multiplyByMonomial(t,1)).divide(n)[1].getCoefficients(),s=t-a.length;for(let t=0;t<s;t++)e[r+t]=0;D.arraycopy(a,0,e,r+s,a.length)}}class rl{constructor(){}static applyMaskPenaltyRule1(e){return rl.applyMaskPenaltyRule1Internal(e,!0)+rl.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0,r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let e=0;e<i-1;e++){let i=r[e];for(let o=0;o<n-1;o++){let n=i[o];n===i[o+1]&&n===r[e+1][o]&&n===r[e+1][o+1]&&t++}}return rl.N2*t}static applyMaskPenaltyRule3(e){let t=0,r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let e=0;e<i;e++)for(let o=0;o<n;o++){let a=r[e];o+6<n&&1===a[o]&&0===a[o+1]&&1===a[o+2]&&1===a[o+3]&&1===a[o+4]&&0===a[o+5]&&1===a[o+6]&&(rl.isWhiteHorizontal(a,o-4,o)||rl.isWhiteHorizontal(a,o+7,o+11))&&t++,e+6<i&&1===r[e][o]&&0===r[e+1][o]&&1===r[e+2][o]&&1===r[e+3][o]&&1===r[e+4][o]&&0===r[e+5][o]&&1===r[e+6][o]&&(rl.isWhiteVertical(r,o,e-4,e)||rl.isWhiteVertical(r,o,e+7,e+11))&&t++}return t*rl.N3}static isWhiteHorizontal(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(let n=t;n<r;n++)if(1===e[n])return!1;return!0}static isWhiteVertical(e,t,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(let i=r;i<n;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0,r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let e=0;e<i;e++){let i=r[e];for(let e=0;e<n;e++)1===i[e]&&t++}let o=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-o)/o)*rl.N4}static getDataMaskBit(e,t,r){let n,i;switch(e){case 0:n=r+t&1;break;case 1:n=1&r;break;case 2:n=t%3;break;case 3:n=(r+t)%3;break;case 4:n=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:n=(1&(i=r*t))+i%3;break;case 6:n=(1&(i=r*t))+i%3&1;break;case 7:n=(i=r*t)%3+(r+t&1)&1;break;default:throw new T("Invalid mask pattern: "+e)}return 0===n}static applyMaskPenaltyRule1Internal(e,t){let r=0,n=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray();for(let e=0;e<n;e++){let n=0,a=-1;for(let s=0;s<i;s++){let i=t?o[e][s]:o[s][e];i===a?n++:(n>=5&&(r+=rl.N1+(n-5)),n=1,a=i)}n>=5&&(r+=rl.N1+(n-5))}return r}}rl.N1=3,rl.N2=3,rl.N3=40,rl.N4=10;class rc{constructor(e,t){this.width=e,this.height=t;let r=Array(t);for(let n=0;n!==t;n++)r[n]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,r){this.bytes[t][e]=r}setBoolean(e,t,r){this.bytes[t][e]=r?1:0}clear(e){for(let t of this.bytes)L.fill(t,e)}equals(e){if(!(e instanceof rc)||this.width!==e.width||this.height!==e.height)return!1;for(let t=0,r=this.height;t<r;++t){let r=this.bytes[t],n=e.bytes[t];for(let e=0,t=this.width;e<t;++e)if(r[e]!==n[e])return!1}return!0}toString(){let e=new Y;for(let t=0,r=this.height;t<r;++t){let r=this.bytes[t];for(let t=0,n=this.width;t<n;++t)switch(r[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class rd{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let e=new Y;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<rd.NUM_MASK_PATTERNS}}rd.NUM_MASK_PATTERNS=8;class ru extends I{}ru.kind="WriterException";class rh{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,r,n,i){rh.clearMatrix(i),rh.embedBasicPatterns(r,i),rh.embedTypeInfo(t,n,i),rh.maybeEmbedVersionInfo(r,i),rh.embedDataBits(e,n,i)}static embedBasicPatterns(e,t){rh.embedPositionDetectionPatternsAndSeparators(t),rh.embedDarkDotAtLeftBottomCorner(t),rh.maybeEmbedPositionAdjustmentPatterns(e,t),rh.embedTimingPatterns(t)}static embedTypeInfo(e,t,r){let n=new B;rh.makeTypeInfoBits(e,t,n);for(let e=0,t=n.getSize();e<t;++e){let t=n.get(n.getSize()-1-e),i=rh.TYPE_INFO_COORDINATES[e],o=i[0],a=i[1];if(r.setBoolean(o,a,t),e<8){let n=r.getWidth()-e-1;r.setBoolean(n,8,t)}else{let n=r.getHeight()-7+(e-8);r.setBoolean(8,n,t)}}}static maybeEmbedVersionInfo(e,t){if(7>e.getVersionNumber())return;let r=new B;rh.makeVersionInfoBits(e,r);let n=17;for(let e=0;e<6;++e)for(let i=0;i<3;++i){let o=r.get(n);n--,t.setBoolean(e,t.getHeight()-11+i,o),t.setBoolean(t.getHeight()-11+i,e,o)}}static embedDataBits(e,t,r){let n=0,i=-1,o=r.getWidth()-1,a=r.getHeight()-1;for(;o>0;){for(6===o&&(o-=1);a>=0&&a<r.getHeight();){for(let i=0;i<2;++i){let s;let l=o-i;rh.isEmpty(r.get(l,a))&&(n<e.getSize()?(s=e.get(n),++n):s=!1,255!==t&&rl.getDataMaskBit(t,l,a)&&(s=!s),r.setBoolean(l,a,s))}a+=i}a+=i=-i,o-=2}if(n!==e.getSize())throw new ru("Not all bits consumed: "+n+"/"+e.getSize())}static findMSBSet(e){return 32-j.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new T("0 polynomial");let r=rh.findMSBSet(t);for(e<<=r-1;rh.findMSBSet(e)>=r;)e^=t<<rh.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,t,r){if(!rd.isValidMaskPattern(t))throw new ru("Invalid mask pattern");let n=e.getBits()<<3|t;r.appendBits(n,5);let i=rh.calculateBCHCode(n,rh.TYPE_INFO_POLY);r.appendBits(i,10);let o=new B;if(o.appendBits(rh.TYPE_INFO_MASK_PATTERN,15),r.xor(o),15!==r.getSize())throw new ru("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);let r=rh.calculateBCHCode(e.getVersionNumber(),rh.VERSION_INFO_POLY);if(t.appendBits(r,12),18!==t.getSize())throw new ru("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){let r=(t+1)%2;rh.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),rh.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new ru;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,r){for(let n=0;n<8;++n){if(!rh.isEmpty(r.get(e+n,t)))throw new ru;r.setNumber(e+n,t,0)}}static embedVerticalSeparationPattern(e,t,r){for(let n=0;n<7;++n){if(!rh.isEmpty(r.get(e,t+n)))throw new ru;r.setNumber(e,t+n,0)}}static embedPositionAdjustmentPattern(e,t,r){for(let n=0;n<5;++n){let i=rh.POSITION_ADJUSTMENT_PATTERN[n];for(let o=0;o<5;++o)r.setNumber(e+o,t+n,i[o])}}static embedPositionDetectionPattern(e,t,r){for(let n=0;n<7;++n){let i=rh.POSITION_DETECTION_PATTERN[n];for(let o=0;o<7;++o)r.setNumber(e+o,t+n,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){let t=rh.POSITION_DETECTION_PATTERN[0].length;rh.embedPositionDetectionPattern(0,0,e),rh.embedPositionDetectionPattern(e.getWidth()-t,0,e),rh.embedPositionDetectionPattern(0,e.getWidth()-t,e),rh.embedHorizontalSeparationPattern(0,7,e),rh.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),rh.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),rh.embedVerticalSeparationPattern(7,0,e),rh.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),rh.embedVerticalSeparationPattern(7,e.getHeight()-7,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(2>e.getVersionNumber())return;let r=e.getVersionNumber()-1,n=rh.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let e=0,r=n.length;e!==r;e++){let i=n[e];if(i>=0)for(let e=0;e!==r;e++){let r=n[e];r>=0&&rh.isEmpty(t.get(r,i))&&rh.embedPositionAdjustmentPattern(r-2,i-2,t)}}}}rh.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),rh.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),rh.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),rh.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),rh.VERSION_INFO_POLY=7973,rh.TYPE_INFO_POLY=1335,rh.TYPE_INFO_MASK_PATTERN=21522;class rf{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class rp{constructor(){}static calculateMaskPenalty(e){return rl.applyMaskPenaltyRule1(e)+rl.applyMaskPenaltyRule2(e)+rl.applyMaskPenaltyRule3(e)+rl.applyMaskPenaltyRule4(e)}static encode(e,t,r=null){let n,i=rp.DEFAULT_BYTE_MODE_ENCODING,o=null!==r&&void 0!==r.get(ra.CHARACTER_SET);o&&(i=r.get(ra.CHARACTER_SET).toString());let a=this.chooseMode(e,i),s=new B;if(a===t_.BYTE&&(o||rp.DEFAULT_BYTE_MODE_ENCODING!==i)){let e=U.getCharacterSetECIByName(i);void 0!==e&&this.appendECI(e,s)}this.appendModeInfo(a,s);let l=new B;if(this.appendBytes(e,a,l,i),null!==r&&void 0!==r.get(ra.QR_VERSION)){let e=Number.parseInt(r.get(ra.QR_VERSION).toString(),10);n=tb.getVersionForNumber(e);let i=this.calculateBitsNeeded(a,s,l,n);if(!this.willFit(i,n,t))throw new ru("Data too big for requested version")}else n=this.recommendVersion(t,a,s,l);let c=new B;c.appendBitArray(s);let d=a===t_.BYTE?l.getSizeInBytes():e.length;this.appendLengthInfo(d,n,a,c),c.appendBitArray(l);let u=n.getECBlocksForLevel(t),h=n.getTotalCodewords()-u.getTotalECCodewords();this.terminateBits(h,c);let f=this.interleaveWithECBytes(c,n.getTotalCodewords(),h,u.getNumBlocks()),p=new rd;p.setECLevel(t),p.setMode(a),p.setVersion(n);let g=n.getDimensionForVersion(),m=new rc(g,g),w=this.chooseMaskPattern(f,t,n,m);return p.setMaskPattern(w),rh.buildMatrix(f,t,n,w,m),p.setMatrix(m),p}static recommendVersion(e,t,r,n){let i=this.calculateBitsNeeded(t,r,n,tb.getVersionForNumber(1)),o=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,r,n,o);return this.chooseVersion(a,e)}static calculateBitsNeeded(e,t,r,n){return t.getSize()+e.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(e){return e<rp.ALPHANUMERIC_TABLE.length?rp.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(U.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return t_.KANJI;let r=!1,n=!1;for(let t=0,i=e.length;t<i;++t){let i=e.charAt(t);if(rp.isDigit(i))r=!0;else{if(-1===this.getAlphanumericCode(i.charCodeAt(0)))return t_.BYTE;n=!0}}return n?t_.ALPHANUMERIC:r?t_.NUMERIC:t_.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=z.encode(e,U.SJIS)}catch(e){return!1}let r=t.length;if(r%2!=0)return!1;for(let e=0;e<r;e+=2){let r=255&t[e];if((r<129||r>159)&&(r<224||r>235))return!1}return!0}static chooseMaskPattern(e,t,r,n){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let a=0;a<rd.NUM_MASK_PATTERNS;a++){rh.buildMatrix(e,t,r,a,n);let s=this.calculateMaskPenalty(n);s<i&&(i=s,o=a)}return o}static chooseVersion(e,t){for(let r=1;r<=40;r++){let n=tb.getVersionForNumber(r);if(rp.willFit(e,n,t))return n}throw new ru("Data too big")}static willFit(e,t,r){return t.getTotalCodewords()-t.getECBlocksForLevel(r).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){let r=8*e;if(t.getSize()>r)throw new ru("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(let e=0;e<4&&t.getSize()<r;++e)t.appendBit(!1);let n=7&t.getSize();if(n>0)for(let e=n;e<8;e++)t.appendBit(!1);let i=e-t.getSizeInBytes();for(let e=0;e<i;++e)t.appendBits((1&e)==0?236:17,8);if(t.getSize()!==r)throw new ru("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,r,n,i,o){if(n>=r)throw new ru("Block ID too large");let a=e%r,s=r-a,l=Math.floor(e/r),c=Math.floor(t/r),d=c+1,u=l-c,h=l+1-d;if(u!==h)throw new ru("EC bytes mismatch");if(r!==s+a)throw new ru("RS blocks mismatch");if(e!==(c+u)*s+(d+h)*a)throw new ru("Total bytes mismatch");n<s?(i[0]=c,o[0]=u):(i[0]=d,o[0]=h)}static interleaveWithECBytes(e,t,r,n){if(e.getSizeInBytes()!==r)throw new ru("Number of bits and data bytes does not match");let i=0,o=0,a=0,s=[];for(let l=0;l<n;++l){let c=new Int32Array(1),d=new Int32Array(1);rp.getNumDataBytesAndNumECBytesForBlockID(t,r,n,l,c,d);let u=c[0],h=new Uint8Array(u);e.toBytes(8*i,h,0,u);let f=rp.generateECBytes(h,d[0]);s.push(new rf(h,f)),o=Math.max(o,u),a=Math.max(a,f.length),i+=c[0]}if(r!==i)throw new ru("Data bytes does not match offset");let l=new B;for(let e=0;e<o;++e)for(let t of s){let r=t.getDataBytes();e<r.length&&l.appendBits(r[e],8)}for(let e=0;e<a;++e)for(let t of s){let r=t.getErrorCorrectionBytes();e<r.length&&l.appendBits(r[e],8)}if(t!==l.getSizeInBytes())throw new ru("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){let r=e.length,n=new Int32Array(r+t);for(let t=0;t<r;t++)n[t]=255&e[t];new rs(el.QR_CODE_FIELD_256).encode(n,t);let i=new Uint8Array(t);for(let e=0;e<t;e++)i[e]=n[r+e];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,r,n){let i=r.getCharacterCountBits(t);if(e>=1<<i)throw new ru(e+" is bigger than "+((1<<i)-1));n.appendBits(e,i)}static appendBytes(e,t,r,n){switch(t){case t_.NUMERIC:rp.appendNumericBytes(e,r);break;case t_.ALPHANUMERIC:rp.appendAlphanumericBytes(e,r);break;case t_.BYTE:rp.append8BitBytes(e,r,n);break;case t_.KANJI:rp.appendKanjiBytes(e,r);break;default:throw new ru("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){let t=rp.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){let r=e.length,n=0;for(;n<r;){let i=rp.getDigit(e.charAt(n));if(n+2<r){let r=rp.getDigit(e.charAt(n+1)),o=rp.getDigit(e.charAt(n+2));t.appendBits(100*i+10*r+o,10),n+=3}else if(n+1<r){let r=rp.getDigit(e.charAt(n+1));t.appendBits(10*i+r,7),n+=2}else t.appendBits(i,4),n++}}static appendAlphanumericBytes(e,t){let r=e.length,n=0;for(;n<r;){let i=rp.getAlphanumericCode(e.charCodeAt(n));if(-1===i)throw new ru;if(n+1<r){let r=rp.getAlphanumericCode(e.charCodeAt(n+1));if(-1===r)throw new ru;t.appendBits(45*i+r,11),n+=2}else t.appendBits(i,6),n++}}static append8BitBytes(e,t,r){let n;try{n=z.encode(e,r)}catch(e){throw new ru(e)}for(let e=0,r=n.length;e!==r;e++){let r=n[e];t.appendBits(r,8)}}static appendKanjiBytes(e,t){let r;try{r=z.encode(e,U.SJIS)}catch(e){throw new ru(e)}let n=r.length;for(let e=0;e<n;e+=2){let n=(255&r[e])<<8&4294967295|255&r[e+1],i=-1;if(n>=33088&&n<=40956?i=n-33088:n>=57408&&n<=60351&&(i=n-49472),-1===i)throw new ru("Invalid byte sequence");let o=(i>>8)*192+(255&i);t.appendBits(o,13)}}static appendECI(e,t){t.appendBits(t_.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}rp.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),rp.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class rg{write(e,t,r,n=null){if(0===e.length)throw new T("Found empty contents");if(t<0||r<0)throw new T("Requested dimensions are too small: "+t+"x"+r);let i=tE.L,o=rg.QUIET_ZONE_SIZE;null!==n&&(void 0!==n.get(ra.ERROR_CORRECTION)&&(i=tE.fromString(n.get(ra.ERROR_CORRECTION).toString())),void 0!==n.get(ra.MARGIN)&&(o=Number.parseInt(n.get(ra.MARGIN).toString(),10)));let a=rp.encode(e,i,n);return this.renderResult(a,t,r,o)}writeToDom(e,t,r,n,i=null){"string"==typeof e&&(e=document.querySelector(e));let o=this.write(t,r,n,i);e&&e.appendChild(o)}renderResult(e,t,r,n){let i=e.getMatrix();if(null===i)throw new ed;let o=i.getWidth(),a=i.getHeight(),s=o+2*n,l=a+2*n,c=Math.max(t,s),d=Math.max(r,l),u=Math.min(Math.floor(c/s),Math.floor(d/l)),h=Math.floor((c-o*u)/2),f=Math.floor((d-a*u)/2),p=this.createSVGElement(c,d);for(let e=0,t=f;e<a;e++,t+=u)for(let r=0,n=h;r<o;r++,n+=u)if(1===i.get(r,e)){let e=this.createSvgRectElement(n,t,u,u);p.appendChild(e)}return p}createSVGElement(e,t){let r=document.createElementNS(rg.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r}createSvgRectElement(e,t,r,n){let i=document.createElementNS(rg.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"fill","#000000"),i}}rg.QUIET_ZONE_SIZE=4,rg.SVG_NS="http://www.w3.org/2000/svg";class rm{encode(e,t,r,n,i){if(0===e.length)throw new T("Found empty contents");if(t!==er.QR_CODE)throw new T("Can only encode QR_CODE, but got "+t);if(r<0||n<0)throw new T(`Requested dimensions are too small: ${r}x${n}`);let o=tE.L,a=rm.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(ra.ERROR_CORRECTION)&&(o=tE.fromString(i.get(ra.ERROR_CORRECTION).toString())),void 0!==i.get(ra.MARGIN)&&(a=Number.parseInt(i.get(ra.MARGIN).toString(),10)));let s=rp.encode(e,o,i);return rm.renderResult(s,r,n,a)}static renderResult(e,t,r,n){let i=e.getMatrix();if(null===i)throw new ed;let o=i.getWidth(),a=i.getHeight(),s=o+2*n,l=a+2*n,c=Math.max(t,s),d=Math.max(r,l),u=Math.min(Math.floor(c/s),Math.floor(d/l)),h=Math.floor((c-o*u)/2),f=Math.floor((d-a*u)/2),p=new G(c,d);for(let e=0,t=f;e<a;e++,t+=u)for(let r=0,n=h;r<o;r++,n+=u)1===i.get(r,e)&&p.setRegion(n,t,u,u);return p}}rm.QUIET_ZONE_SIZE=4;class rw{encode(e,t,r,n,i){let o;if(t===er.QR_CODE)o=new rm;else throw new T("No encoder available for format "+t);return o.encode(e,t,r,n,i)}}class ry extends Z{constructor(e,t,r,n,i,o,a,s){if(super(o,a),this.yuvData=e,this.dataWidth=t,this.dataHeight=r,this.left=n,this.top=i,n+o>t||i+a>r)throw new T("Crop rectangle does not fit within image data.");s&&this.reverseHorizontal(o,a)}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);let r=this.getWidth();(null==t||t.length<r)&&(t=new Uint8ClampedArray(r));let n=(e+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,n,t,0,r),t}getMatrix(){let e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;let r=e*t,n=new Uint8ClampedArray(r),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return D.arraycopy(this.yuvData,i,n,0,r),n;for(let r=0;r<t;r++){let t=r*e;D.arraycopy(this.yuvData,i,n,t,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new ry(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,r,n,!1)}renderThumbnail(){let e=this.getWidth()/ry.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/ry.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*t),n=this.yuvData,i=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){let t=o*e;for(let o=0;o<e;o++){let e=255&n[i+o*ry.THUMBNAIL_SCALE_FACTOR];r[t+o]=4278190080|65793*e}i+=this.dataWidth*ry.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/ry.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ry.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){let r=this.yuvData;for(let n=0,i=this.top*this.dataWidth+this.left;n<t;n++,i+=this.dataWidth){let t=i+e/2;for(let n=i,o=i+e-1;n<t;n++,o--){let e=r[n];r[n]=r[o],r[o]=e}}}invert(){return new Q(this)}}ry.THUMBNAIL_SCALE_FACTOR=2;class rE extends Z{constructor(e,t,r,n,i,o,a){if(super(t,r),this.dataWidth=n,this.dataHeight=i,this.left=o,this.top=a,4===e.BYTES_PER_ELEMENT){let n=t*r,i=new Uint8ClampedArray(n);for(let t=0;t<n;t++){let r=e[t],n=r>>16&255,o=r>>7&510,a=255&r;i[t]=(n+o+a)/4&255}this.luminances=i}else this.luminances=e;if(void 0===n&&(this.dataWidth=t),void 0===i&&(this.dataHeight=r),void 0===o&&(this.left=0),void 0===a&&(this.top=0),this.left+t>this.dataWidth||this.top+r>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);let r=this.getWidth();(null==t||t.length<r)&&(t=new Uint8ClampedArray(r));let n=(e+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,n,t,0,r),t}getMatrix(){let e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;let r=e*t,n=new Uint8ClampedArray(r),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return D.arraycopy(this.luminances,i,n,0,r),n;for(let r=0;r<t;r++){let t=r*e;D.arraycopy(this.luminances,i,n,t,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new rE(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new Q(this)}}class rC extends U{static forName(e){return this.getCharacterSetECIByName(e)}}class rA{}rA.ISO_8859_1=U.ISO8859_1;class rx{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class rb{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class rv{constructor(e){this.previous=e}getPrevious(){return this.previous}}class rS extends rv{constructor(e,t,r){super(e),this.value=t,this.bitCount=r}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new rS(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new rS(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+j.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class rI extends rS{constructor(e,t,r){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=r}appendTo(e,t){for(let r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===r?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+r],8)}addBinaryShift(e,t){return new rI(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function r_(e,t,r){return new rS(e,t,r)}let rT=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rN=new rS(null,0,0),rR=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],rM=function(e){for(let t of e)L.fill(t,-1);return e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15,e}(L.createInt32Array(6,6));class rD{constructor(e,t,r,n){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let r=this.bitCount,n=this.token;if(e!==this.mode){let t=rR[this.mode][e];n=r_(n,65535&t,t>>16),r+=t>>16}let i=2===e?4:5;return new rD(n=r_(n,t,i),e,0,r+i)}shiftAndAppend(e,t){let r=this.token,n=2===this.mode?4:5;return r=r_(r,rM[this.mode][e],n),new rD(r=r_(r,t,5),this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(e){let t=this.token,r=this.mode,n=this.bitCount;if(4===this.mode||2===this.mode){let e=rR[r][0];t=r_(t,65535&e,e>>16),n+=e>>16,r=0}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new rD(t,r,this.binaryShiftByteCount+1,n+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return new rD(t=new rI(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(rR[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=rD.calculateBinaryShiftCost(e)-rD.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let r=new B;for(let n of t)n.appendTo(r,e);return r}toString(){return V.format("%s bits=%d bytes=%d",rT[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}rD.INITIAL_STATE=new rD(rN,0,0,0);let rO=function(e){let t=V.getCharCode(" "),r=V.getCharCode("."),n=V.getCharCode(",");e[0][t]=1;let i=V.getCharCode("Z"),o=V.getCharCode("A");for(let t=o;t<=i;t++)e[0][t]=t-o+2;e[1][t]=1;let a=V.getCharCode("z"),s=V.getCharCode("a");for(let t=s;t<=a;t++)e[1][t]=t-s+2;e[2][t]=1;let l=V.getCharCode("9"),c=V.getCharCode("0");for(let t=c;t<=l;t++)e[2][t]=t-c+2;e[2][n]=12,e[2][r]=13;let d=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","	","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let t=0;t<d.length;t++)e[3][V.getCharCode(d[t])]=t;let u=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let t=0;t<u.length;t++)V.getCharCode(u[t])>0&&(e[4][V.getCharCode(u[t])]=t);return e}(L.createInt32Array(5,256));class rP{constructor(e){this.text=e}encode(){let e=V.getCharCode(" "),t=V.getCharCode("\n"),r=rb.singletonList(rD.INITIAL_STATE);for(let n=0;n<this.text.length;n++){let i;let o=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case V.getCharCode("\r"):i=o===t?2:0;break;case V.getCharCode("."):i=o===e?3:0;break;case V.getCharCode(","):i=o===e?4:0;break;case V.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(r=rP.updateStateListForPair(r,n,i),n++):r=this.updateStateListForChar(r,n)}return rb.min(r,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){let r=[];for(let n of e)this.updateStateForChar(n,t,r);return rP.simplifyStates(r)}updateStateForChar(e,t,r){let n=255&this.text[t],i=rO[e.getMode()][n]>0,o=null;for(let a=0;a<=4;a++){let s=rO[a][n];if(s>0){if(null==o&&(o=e.endBinaryShift(t)),!i||a===e.getMode()||2===a){let e=o.latchAndAppend(a,s);r.push(e)}if(!i&&rM[e.getMode()][a]>=0){let e=o.shiftAndAppend(a,s);r.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rO[e.getMode()][n]){let n=e.addBinaryShiftChar(t);r.push(n)}}static updateStateListForPair(e,t,r){let n=[];for(let i of e)this.updateStateForPair(i,t,r,n);return this.simplifyStates(n)}static updateStateForPair(e,t,r,n){let i=e.endBinaryShift(t);if(n.push(i.latchAndAppend(4,r)),4!==e.getMode()&&n.push(i.shiftAndAppend(4,r)),3===r||4===r){let e=i.latchAndAppend(2,16-r).latchAndAppend(2,1);n.push(e)}if(e.getBinaryShiftByteCount()>0){let r=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);n.push(r)}}static simplifyStates(e){let t=[];for(let r of e){let e=!0;for(let n of t){if(n.isBetterThanOrEqualTo(r)){e=!1;break}r.isBetterThanOrEqualTo(n)&&(t=t.filter(e=>e!==n))}e&&t.push(r)}return t}}class rL{constructor(){}static encodeBytes(e){return rL.encode(e,rL.DEFAULT_EC_PERCENT,rL.DEFAULT_AZTEC_LAYERS)}static encode(e,t,r){let n,i,o,a,s,l,c=new rP(e).encode(),d=j.truncDivision(c.getSize()*t,100)+11,u=c.getSize()+d;if(r!==rL.DEFAULT_AZTEC_LAYERS){if(n=r<0,(i=Math.abs(r))>(n?rL.MAX_NB_BITS_COMPACT:rL.MAX_NB_BITS))throw new T(V.format("Illegal value %s for layers",r));let e=(o=rL.totalBitsInLayer(i,n))-o%(a=rL.WORD_SIZE[i]);if((s=rL.stuffBits(c,a)).getSize()+d>e||n&&s.getSize()>64*a)throw new T("Data to large for user specified layer")}else{a=0,s=null;for(let e=0;;e++){if(e>rL.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(i=(n=e<=3)?e+1:e,u>(o=rL.totalBitsInLayer(i,n)))continue;(null==s||a!==rL.WORD_SIZE[i])&&(a=rL.WORD_SIZE[i],s=rL.stuffBits(c,a));let t=o-o%a;if(!(n&&s.getSize()>64*a)&&s.getSize()+d<=t)break}}let h=rL.generateCheckWords(s,o,a),f=s.getSize()/a,p=rL.generateModeMessage(n,i,f),g=(n?11:14)+4*i,m=new Int32Array(g);if(n){l=g;for(let e=0;e<m.length;e++)m[e]=e}else{l=g+1+2*j.truncDivision(j.truncDivision(g,2)-1,15);let e=j.truncDivision(g,2),t=j.truncDivision(l,2);for(let r=0;r<e;r++){let n=r+j.truncDivision(r,15);m[e-r-1]=t-n-1,m[e+r]=t+n+1}}let w=new G(l);for(let e=0,t=0;e<i;e++){let r=(i-e)*4+(n?9:12);for(let n=0;n<r;n++){let i=2*n;for(let o=0;o<2;o++)h.get(t+i+o)&&w.set(m[2*e+o],m[2*e+n]),h.get(t+2*r+i+o)&&w.set(m[2*e+n],m[g-1-2*e-o]),h.get(t+4*r+i+o)&&w.set(m[g-1-2*e-o],m[g-1-2*e-n]),h.get(t+6*r+i+o)&&w.set(m[g-1-2*e-n],m[2*e+o])}t+=8*r}if(rL.drawModeMessage(w,n,l,p),n)rL.drawBullsEye(w,j.truncDivision(l,2),5);else{rL.drawBullsEye(w,j.truncDivision(l,2),7);for(let e=0,t=0;e<j.truncDivision(g,2)-1;e+=15,t+=16)for(let e=1&j.truncDivision(l,2);e<l;e+=2)w.set(j.truncDivision(l,2)-t,e),w.set(j.truncDivision(l,2)+t,e),w.set(e,j.truncDivision(l,2)-t),w.set(e,j.truncDivision(l,2)+t)}let y=new rx;return y.setCompact(n),y.setSize(l),y.setLayers(i),y.setCodeWords(f),y.setMatrix(w),y}static drawBullsEye(e,t,r){for(let n=0;n<r;n+=2)for(let r=t-n;r<=t+n;r++)e.set(r,t-n),e.set(r,t+n),e.set(t-n,r),e.set(t+n,r);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)}static generateModeMessage(e,t,r){let n=new B;return e?(n.appendBits(t-1,2),n.appendBits(r-1,6),n=rL.generateCheckWords(n,28,4)):(n.appendBits(t-1,5),n.appendBits(r-1,11),n=rL.generateCheckWords(n,40,4)),n}static drawModeMessage(e,t,r,n){let i=j.truncDivision(r,2);if(t)for(let t=0;t<7;t++){let r=i-3+t;n.get(t)&&e.set(r,i-5),n.get(t+7)&&e.set(i+5,r),n.get(20-t)&&e.set(r,i+5),n.get(27-t)&&e.set(i-5,r)}else for(let t=0;t<10;t++){let r=i-5+t+j.truncDivision(t,5);n.get(t)&&e.set(r,i-7),n.get(t+10)&&e.set(i+7,r),n.get(29-t)&&e.set(r,i+7),n.get(39-t)&&e.set(i-7,r)}}static generateCheckWords(e,t,r){let n=e.getSize()/r,i=new rs(rL.getGF(r)),o=j.truncDivision(t,r),a=rL.bitsToWords(e,r,o);i.encode(a,o-n);let s=t%r,l=new B;for(let e of(l.appendBits(0,s),Array.from(a)))l.appendBits(e,r);return l}static bitsToWords(e,t,r){let n,i,o=new Int32Array(r);for(n=0,i=e.getSize()/t;n<i;n++){let r=0;for(let i=0;i<t;i++)r|=e.get(n*t+i)?1<<t-i-1:0;o[n]=r}return o}static getGF(e){switch(e){case 4:return el.AZTEC_PARAM;case 6:return el.AZTEC_DATA_6;case 8:return el.AZTEC_DATA_8;case 10:return el.AZTEC_DATA_10;case 12:return el.AZTEC_DATA_12;default:throw new T("Unsupported word size "+e)}}static stuffBits(e,t){let r=new B,n=e.getSize(),i=(1<<t)-2;for(let o=0;o<n;o+=t){let a=0;for(let r=0;r<t;r++)(o+r>=n||e.get(o+r))&&(a|=1<<t-1-r);(a&i)===i?(r.appendBits(a&i,t),o--):(a&i)==0?(r.appendBits(1|a,t),o--):r.appendBits(a,t)}return r}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}rL.DEFAULT_EC_PERCENT=33,rL.DEFAULT_AZTEC_LAYERS=0,rL.MAX_NB_BITS=32,rL.MAX_NB_BITS_COMPACT=4,rL.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class rj{encode(e,t,r,n){return this.encodeWithHints(e,t,r,n,null)}encodeWithHints(e,t,r,n,i){let o=rA.ISO_8859_1,a=rL.DEFAULT_EC_PERCENT,s=rL.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(ra.CHARACTER_SET)&&(o=rC.forName(i.get(ra.CHARACTER_SET).toString())),i.has(ra.ERROR_CORRECTION)&&(a=j.parseInt(i.get(ra.ERROR_CORRECTION).toString())),i.has(ra.AZTEC_LAYERS)&&(s=j.parseInt(i.get(ra.AZTEC_LAYERS).toString()))),rj.encodeLayers(e,t,r,n,o,a,s)}static encodeLayers(e,t,r,n,i,o,a){if(t!==er.AZTEC)throw new T("Can only encode AZTEC, but got "+t);let s=rL.encode(V.getBytes(e,i),o,a);return rj.renderResult(s,r,n)}static renderResult(e,t,r){let n=e.getMatrix();if(null==n)throw new ed;let i=n.getWidth(),o=n.getHeight(),a=Math.max(t,i),s=Math.max(r,o),l=Math.min(a/i,s/o),c=(a-i*l)/2,d=(s-o*l)/2,u=new G(a,s);for(let e=0,t=d;e<o;e++,t+=l)for(let r=0,o=c;r<i;r++,o+=l)n.get(r,e)&&u.setRegion(o,t,l,l);return u}}e.AbstractExpandedDecoder=eJ,e.ArgumentException=_,e.ArithmeticException=es,e.AztecCode=rx,e.AztecCodeReader=eS,e.AztecCodeWriter=rj,e.AztecDecoder=eh,e.AztecDetector=ev,e.AztecDetectorResult=ew,e.AztecEncoder=rL,e.AztecHighLevelEncoder=rP,e.AztecPoint=eb,e.BarcodeFormat=er,e.Binarizer=M,e.BinaryBitmap=N,e.BitArray=B,e.BitMatrix=G,e.BitSource=tf,e.BrowserAztecCodeReader=eI,e.BrowserBarcodeReader=ts,e.BrowserCodeReader=ee,e.BrowserDatamatrixCodeReader=ty,e.BrowserMultiFormatReader=rn,e.BrowserPDF417Reader=ri,e.BrowserQRCodeReader=ro,e.BrowserQRCodeSvgWriter=rg,e.CharacterSetECI=U,e.ChecksumException=R,e.Code128Reader=eT,e.Code39Reader=eN,e.DataMatrixDecodedBitStreamParser=tp,e.DataMatrixReader=tw,e.DecodeHintType=k,e.DecoderResult=ei,e.DefaultGridSampler=eA,e.DetectorResult=em,e.EAN13Reader=ej,e.EncodeHintType=ra,e.Exception=I,e.FormatException=F,e.GenericGF=el,e.GenericGFPoly=ea,e.GlobalHistogramBinarizer=X,e.GridSampler=eE,e.GridSamplerInstance=ex,e.HTMLCanvasElementLuminanceSource=K,e.HybridBinarizer=q,e.ITFReader=eR,e.IllegalArgumentException=T,e.IllegalStateException=ed,e.InvertedLuminanceSource=Q,e.LuminanceSource=Z,e.MathUtils=ef,e.MultiFormatOneDReader=ta,e.MultiFormatReader=rr,e.MultiFormatWriter=rw,e.NotFoundException=W,e.OneDReader=e_,e.PDF417DecodedBitStreamParser=t7,e.PDF417DecoderErrorCorrection=tY,e.PDF417Reader=re,e.PDF417ResultMetadata=t1,e.PerspectiveTransform=eC,e.PlanarYUVLuminanceSource=ry,e.QRCodeByteMatrix=rc,e.QRCodeDataMask=tv,e.QRCodeDecodedBitStreamParser=tT,e.QRCodeDecoderErrorCorrectionLevel=tE,e.QRCodeDecoderFormatInformation=tC,e.QRCodeEncoder=rp,e.QRCodeEncoderQRCode=rd,e.QRCodeMaskUtil=rl,e.QRCodeMatrixUtil=rh,e.QRCodeMode=t_,e.QRCodeReader=tB,e.QRCodeVersion=tb,e.QRCodeWriter=rm,e.RGBLuminanceSource=rE,e.RSS14Reader=to,e.RSSExpandedReader=tn,e.ReaderException=rt,e.ReedSolomonDecoder=eu,e.ReedSolomonEncoder=rs,e.ReedSolomonException=ec,e.Result=et,e.ResultMetadataType=en,e.ResultPoint=eg,e.StringUtils=V,e.UnsupportedOperationException=H,e.VideoInputDevice=$,e.WhiteRectangleDetector=ey,e.WriterException=ru,e.ZXingArrays=L,e.ZXingCharset=rC,e.ZXingInteger=j,e.ZXingStandardCharsets=rA,e.ZXingStringBuilder=Y,e.ZXingStringEncoding=z,e.ZXingSystem=D,e.createAbstractExpandedDecoder=te,Object.defineProperty(e,"__esModule",{value:!0})})(t)},1349:(e,t,r)=>{"use strict";let n=r(1289),i=[function(){},function(e,t,r,n){if(n===t.length)throw Error("Ran out of data");let i=t[n];e[r]=i,e[r+1]=i,e[r+2]=i,e[r+3]=255},function(e,t,r,n){if(n+1>=t.length)throw Error("Ran out of data");let i=t[n];e[r]=i,e[r+1]=i,e[r+2]=i,e[r+3]=t[n+1]},function(e,t,r,n){if(n+2>=t.length)throw Error("Ran out of data");e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=255},function(e,t,r,n){if(n+3>=t.length)throw Error("Ran out of data");e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=t[n+3]}],o=[function(){},function(e,t,r,n){let i=t[0];e[r]=i,e[r+1]=i,e[r+2]=i,e[r+3]=n},function(e,t,r){let n=t[0];e[r]=n,e[r+1]=n,e[r+2]=n,e[r+3]=t[1]},function(e,t,r,n){e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=n},function(e,t,r){e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=t[3]}];t.dataToBitMap=function(e,t){let r,a,s,l,c=t.width,d=t.height,u=t.depth,h=t.bpp,f=t.interlace;if(8!==u){let t,n;t=[],n=0,r={get:function(r){for(;t.length<r;)!function(){let r,i,o,a,s,l,c,d;if(n===e.length)throw Error("Ran out of data");let h=e[n];switch(n++,u){default:throw Error("unrecognised depth");case 16:c=e[n],n++,t.push((h<<8)+c);break;case 4:c=15&h,d=h>>4,t.push(d,c);break;case 2:s=3&h,l=h>>2&3,c=h>>4&3,d=h>>6&3,t.push(d,c,l,s);break;case 1:r=1&h,i=h>>1&1,o=h>>2&1,a=h>>3&1,s=h>>4&1,l=h>>5&1,c=h>>6&1,d=h>>7&1,t.push(d,c,l,s,a,o,i,r)}}();let i=t.slice(0,r);return t=t.slice(r),i},resetAfterLine:function(){t.length=0},end:function(){if(n!==e.length)throw Error("extra data found")}}}a=u<=8?Buffer.alloc(c*d*4):new Uint16Array(c*d*4);let p=Math.pow(2,u)-1,g=0;if(f)s=n.getImagePasses(c,d),l=n.getInterlaceIterator(c,d);else{let e=0;l=function(){let t=e;return e+=4,t},s=[{width:c,height:d}]}for(let t=0;t<s.length;t++)8===u?g=function(e,t,r,n,o,a){let s=e.width,l=e.height,c=e.index;for(let e=0;e<l;e++)for(let l=0;l<s;l++){let s=r(l,e,c);i[n](t,o,s,a),a+=n}return a}(s[t],a,l,h,e,g):function(e,t,r,n,i,a){let s=e.width,l=e.height,c=e.index;for(let e=0;e<l;e++){for(let l=0;l<s;l++){let s=i.get(n),d=r(l,e,c);o[n](t,s,d,a)}i.resetAfterLine()}}(s[t],a,l,h,r,p);if(8===u){if(g!==e.length)throw Error("extra data found")}else r.end();return a}},3333:(e,t,r)=>{"use strict";let n=r(2949);e.exports=function(e,t,r,i){let o=-1!==[n.COLORTYPE_COLOR_ALPHA,n.COLORTYPE_ALPHA].indexOf(i.colorType);if(i.colorType===i.inputColorType){let t;let r=(new DataView(t=new ArrayBuffer(2)).setInt16(0,256,!0),256!==new Int16Array(t)[0]);if(8===i.bitDepth||16===i.bitDepth&&r)return e}let a=16!==i.bitDepth?e:new Uint16Array(e.buffer),s=255,l=n.COLORTYPE_TO_BPP_MAP[i.inputColorType];4!==l||i.inputHasAlpha||(l=3);let c=n.COLORTYPE_TO_BPP_MAP[i.colorType];16===i.bitDepth&&(s=65535,c*=2);let d=Buffer.alloc(t*r*c),u=0,h=0,f=i.bgColor||{};void 0===f.red&&(f.red=s),void 0===f.green&&(f.green=s),void 0===f.blue&&(f.blue=s);for(let e=0;e<r;e++)for(let e=0;e<t;e++){let e=function(){let e,t,r;let l=s;switch(i.inputColorType){case n.COLORTYPE_COLOR_ALPHA:l=a[u+3],e=a[u],t=a[u+1],r=a[u+2];break;case n.COLORTYPE_COLOR:e=a[u],t=a[u+1],r=a[u+2];break;case n.COLORTYPE_ALPHA:l=a[u+1],t=e=a[u],r=e;break;case n.COLORTYPE_GRAYSCALE:t=e=a[u],r=e;break;default:throw Error("input color type:"+i.inputColorType+" is not supported at present")}return i.inputHasAlpha&&!o&&(l/=s,e=Math.min(Math.max(Math.round((1-l)*f.red+l*e),0),s),t=Math.min(Math.max(Math.round((1-l)*f.green+l*t),0),s),r=Math.min(Math.max(Math.round((1-l)*f.blue+l*r),0),s)),{red:e,green:t,blue:r,alpha:l}}(a,u);switch(i.colorType){case n.COLORTYPE_COLOR_ALPHA:case n.COLORTYPE_COLOR:8===i.bitDepth?(d[h]=e.red,d[h+1]=e.green,d[h+2]=e.blue,o&&(d[h+3]=e.alpha)):(d.writeUInt16BE(e.red,h),d.writeUInt16BE(e.green,h+2),d.writeUInt16BE(e.blue,h+4),o&&d.writeUInt16BE(e.alpha,h+6));break;case n.COLORTYPE_ALPHA:case n.COLORTYPE_GRAYSCALE:{let t=(e.red+e.green+e.blue)/3;8===i.bitDepth?(d[h]=t,o&&(d[h+1]=e.alpha)):(d.writeUInt16BE(t,h),o&&d.writeUInt16BE(e.alpha,h+2));break}default:throw Error("unrecognised color Type "+i.colorType)}u+=l,h+=c}return d}},2506:(e,t,r)=>{"use strict";let n=r(1764),i=r(6162),o=e.exports=function(){i.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};n.inherits(o,i),o.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),process.nextTick((function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}).bind(this))},o.prototype.write=function(e,t){let r;return this.writable?(Buffer.isBuffer(e)?r=e:r=Buffer.from(e,t||this._encoding),this._buffers.push(r),this._buffered+=r.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused):(this.emit("error",Error("Stream not writable")),!1)},o.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},o.prototype.destroySoon=o.prototype.end,o.prototype._end=function(){this._reads.length>0&&this.emit("error",Error("Unexpected end of input")),this.destroy()},o.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},o.prototype._processReadAllowingLess=function(e){this._reads.shift();let t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))},o.prototype._processRead=function(e){this._reads.shift();let t=0,r=0,n=Buffer.alloc(e.length);for(;t<e.length;){let i=this._buffers[r++],o=Math.min(i.length,e.length-t);i.copy(n,t,0,o),t+=o,o!==i.length&&(this._buffers[--r]=i.slice(o))}r>0&&this._buffers.splice(0,r),this._buffered-=e.length,e.func.call(this,n)},o.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else if(this._buffered>=e.length)this._processRead(e);else break}this._buffers&&!this.writable&&this._end()}catch(e){this.emit("error",e)}}},2949:e=>{"use strict";e.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},4747:e=>{"use strict";let t=[];!function(){for(let e=0;e<256;e++){let r=e;for(let e=0;e<8;e++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}}();let r=e.exports=function(){this._crc=-1};r.prototype.write=function(e){for(let r=0;r<e.length;r++)this._crc=t[(this._crc^e[r])&255]^this._crc>>>8;return!0},r.prototype.crc32=function(){return -1^this._crc},r.crc32=function(e){let r=-1;for(let n=0;n<e.length;n++)r=t[(r^e[n])&255]^r>>>8;return -1^r}},4734:(e,t,r)=>{"use strict";let n=r(1008),i={0:function(e,t,r,n,i){for(let o=0;o<r;o++)n[i+o]=e[t+o]},1:function(e,t,r,n,i,o){for(let a=0;a<r;a++){let r=a>=o?e[t+a-o]:0,s=e[t+a]-r;n[i+a]=s}},2:function(e,t,r,n,i){for(let o=0;o<r;o++){let a=t>0?e[t+o-r]:0,s=e[t+o]-a;n[i+o]=s}},3:function(e,t,r,n,i,o){for(let a=0;a<r;a++){let s=a>=o?e[t+a-o]:0,l=t>0?e[t+a-r]:0,c=e[t+a]-(s+l>>1);n[i+a]=c}},4:function(e,t,r,i,o,a){for(let s=0;s<r;s++){let l=s>=a?e[t+s-a]:0,c=t>0?e[t+s-r]:0,d=t>0&&s>=a?e[t+s-(r+a)]:0,u=e[t+s]-n(l,c,d);i[o+s]=u}}},o={0:function(e,t,r){let n=0,i=t+r;for(let r=t;r<i;r++)n+=Math.abs(e[r]);return n},1:function(e,t,r,n){let i=0;for(let o=0;o<r;o++){let r=o>=n?e[t+o-n]:0;i+=Math.abs(e[t+o]-r)}return i},2:function(e,t,r){let n=0,i=t+r;for(let o=t;o<i;o++){let i=t>0?e[o-r]:0;n+=Math.abs(e[o]-i)}return n},3:function(e,t,r,n){let i=0;for(let o=0;o<r;o++){let a=o>=n?e[t+o-n]:0,s=t>0?e[t+o-r]:0;i+=Math.abs(e[t+o]-(a+s>>1))}return i},4:function(e,t,r,i){let o=0;for(let a=0;a<r;a++){let s=a>=i?e[t+a-i]:0,l=t>0?e[t+a-r]:0,c=t>0&&a>=i?e[t+a-(r+i)]:0;o+=Math.abs(e[t+a]-n(s,l,c))}return o}};e.exports=function(e,t,r,n,a){let s;if("filterType"in n&&-1!==n.filterType){if("number"==typeof n.filterType)s=[n.filterType];else throw Error("unrecognised filter types")}else s=[0,1,2,3,4];16===n.bitDepth&&(a*=2);let l=t*a,c=0,d=0,u=Buffer.alloc((l+1)*r),h=s[0];for(let t=0;t<r;t++){if(s.length>1){let t=1/0;for(let r=0;r<s.length;r++){let n=o[s[r]](e,d,l,a);n<t&&(h=s[r],t=n)}}u[c]=h,c++,i[h](e,d,l,u,c,a),c+=l,d+=l}return u}},9376:(e,t,r)=>{"use strict";let n=r(1764),i=r(2506),o=r(1569),a=e.exports=function(e){i.call(this);let t=[],r=this;this._filter=new o(e,{read:this.read.bind(this),write:function(e){t.push(e)},complete:function(){r.emit("complete",Buffer.concat(t))}}),this._filter.start()};n.inherits(a,i)},5309:(e,t,r)=>{"use strict";let n=r(3381),i=r(1569);t.process=function(e,t){let r=[],o=new n(e);return new i(t,{read:o.read.bind(o),write:function(e){r.push(e)},complete:function(){}}).start(),o.process(),Buffer.concat(r)}},1569:(e,t,r)=>{"use strict";let n=r(1289),i=r(1008);function o(e,t,r){let n=e*t;return 8!==r&&(n=Math.ceil(n/(8/r))),n}let a=e.exports=function(e,t){let r=e.width,i=e.height,a=e.interlace,s=e.bpp,l=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],a){let e=n.getImagePasses(r,i);for(let t=0;t<e.length;t++)this._images.push({byteWidth:o(e[t].width,s,l),height:e[t].height,lineIndex:0})}else this._images.push({byteWidth:o(r,s,l),height:i,lineIndex:0});8===l?this._xComparison=s:16===l?this._xComparison=2*s:this._xComparison=1};a.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},a.prototype._unFilterType1=function(e,t,r){let n=this._xComparison,i=n-1;for(let o=0;o<r;o++){let r=e[1+o],a=o>i?t[o-n]:0;t[o]=r+a}},a.prototype._unFilterType2=function(e,t,r){let n=this._lastLine;for(let i=0;i<r;i++){let r=e[1+i],o=n?n[i]:0;t[i]=r+o}},a.prototype._unFilterType3=function(e,t,r){let n=this._xComparison,i=n-1,o=this._lastLine;for(let a=0;a<r;a++){let r=e[1+a],s=o?o[a]:0,l=Math.floor(((a>i?t[a-n]:0)+s)/2);t[a]=r+l}},a.prototype._unFilterType4=function(e,t,r){let n=this._xComparison,o=n-1,a=this._lastLine;for(let s=0;s<r;s++){let r=e[1+s],l=a?a[s]:0,c=i(s>o?t[s-n]:0,l,s>o&&a?a[s-n]:0);t[s]=r+c}},a.prototype._reverseFilterLine=function(e){let t,r=e[0],n=this._images[this._imageIndex],i=n.byteWidth;if(0===r)t=e.slice(1,i+1);else switch(t=Buffer.alloc(i),r){case 1:this._unFilterType1(e,t,i);break;case 2:this._unFilterType2(e,t,i);break;case 3:this._unFilterType3(e,t,i);break;case 4:this._unFilterType4(e,t,i);break;default:throw Error("Unrecognised filter type - "+r)}this.write(t),n.lineIndex++,n.lineIndex>=n.height?(this._lastLine=null,this._imageIndex++,n=this._images[this._imageIndex]):this._lastLine=t,n?this.read(n.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}},9794:e=>{"use strict";e.exports=function(e,t){let r=t.depth,n=t.width,i=t.height,o=t.colorType,a=t.transColor,s=t.palette,l=e;return 3===o?function(e,t,r,n,i){let o=0;for(let a=0;a<n;a++)for(let n=0;n<r;n++){let r=i[e[o]];if(!r)throw Error("index "+e[o]+" not in palette");for(let e=0;e<4;e++)t[o+e]=r[e];o+=4}}(e,l,n,i,s):(a&&function(e,t,r,n,i){let o=0;for(let a=0;a<n;a++)for(let n=0;n<r;n++){let r=!1;if(1===i.length?i[0]===e[o]&&(r=!0):i[0]===e[o]&&i[1]===e[o+1]&&i[2]===e[o+2]&&(r=!0),r)for(let e=0;e<4;e++)t[o+e]=0;o+=4}}(e,l,n,i,a),8!==r&&(16===r&&(l=Buffer.alloc(n*i*4)),function(e,t,r,n,i){let o=Math.pow(2,i)-1,a=0;for(let i=0;i<n;i++)for(let n=0;n<r;n++){for(let r=0;r<4;r++)t[a+r]=Math.floor(255*e[a+r]/o+.5);a+=4}}(e,l,n,i,r))),l}},1289:(e,t)=>{"use strict";let r=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];t.getImagePasses=function(e,t){let n=[],i=e%8,o=t%8,a=(e-i)/8,s=(t-o)/8;for(let e=0;e<r.length;e++){let t=r[e],l=a*t.x.length,c=s*t.y.length;for(let e=0;e<t.x.length;e++)if(t.x[e]<i)l++;else break;for(let e=0;e<t.y.length;e++)if(t.y[e]<o)c++;else break;l>0&&c>0&&n.push({width:l,height:c,index:e})}return n},t.getInterlaceIterator=function(e){return function(t,n,i){let o=t%r[i].x.length,a=(t-o)/r[i].x.length*8+r[i].x[o],s=n%r[i].y.length;return 4*a+((n-s)/r[i].y.length*8+r[i].y[s])*e*4}}},2243:(e,t,r)=>{"use strict";let n=r(1764),i=r(6162),o=r(2949),a=r(1274),s=e.exports=function(e){i.call(this),this._packer=new a(e||{}),this._deflate=this._packer.createDeflate(),this.readable=!0};n.inherits(s,i),s.prototype.pack=function(e,t,r,n){this.emit("data",Buffer.from(o.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,r)),n&&this.emit("data",this._packer.packGAMA(n));let i=this._packer.filterData(e,t,r);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",(function(e){this.emit("data",this._packer.packIDAT(e))}).bind(this)),this._deflate.on("end",(function(){this.emit("data",this._packer.packIEND()),this.emit("end")}).bind(this)),this._deflate.end(i)}},100:(e,t,r)=>{"use strict";let n=!0,i=r(1568);i.deflateSync||(n=!1);let o=r(2949),a=r(1274);e.exports=function(e,t){if(!n)throw Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let r=new a(t||{}),s=[];s.push(Buffer.from(o.PNG_SIGNATURE)),s.push(r.packIHDR(e.width,e.height)),e.gamma&&s.push(r.packGAMA(e.gamma));let l=r.filterData(e.data,e.width,e.height),c=i.deflateSync(l,r.getDeflateOptions());if(l=null,!c||!c.length)throw Error("bad png - invalid compressed data response");return s.push(r.packIDAT(c)),s.push(r.packIEND()),Buffer.concat(s)}},1274:(e,t,r)=>{"use strict";let n=r(2949),i=r(4747),o=r(3333),a=r(4734),s=r(1568),l=e.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=null!=e.deflateLevel?e.deflateLevel:9,e.deflateStrategy=null!=e.deflateStrategy?e.deflateStrategy:3,e.inputHasAlpha=null==e.inputHasAlpha||e.inputHasAlpha,e.deflateFactory=e.deflateFactory||s.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType="number"==typeof e.colorType?e.colorType:n.COLORTYPE_COLOR_ALPHA,e.inputColorType="number"==typeof e.inputColorType?e.inputColorType:n.COLORTYPE_COLOR_ALPHA,-1===[n.COLORTYPE_GRAYSCALE,n.COLORTYPE_COLOR,n.COLORTYPE_COLOR_ALPHA,n.COLORTYPE_ALPHA].indexOf(e.colorType))throw Error("option color type:"+e.colorType+" is not supported at present");if(-1===[n.COLORTYPE_GRAYSCALE,n.COLORTYPE_COLOR,n.COLORTYPE_COLOR_ALPHA,n.COLORTYPE_ALPHA].indexOf(e.inputColorType))throw Error("option input color type:"+e.inputColorType+" is not supported at present");if(8!==e.bitDepth&&16!==e.bitDepth)throw Error("option bit depth:"+e.bitDepth+" is not supported at present")};l.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},l.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},l.prototype.filterData=function(e,t,r){let i=o(e,t,r,this._options),s=n.COLORTYPE_TO_BPP_MAP[this._options.colorType];return a(i,t,r,this._options,s)},l.prototype._packChunk=function(e,t){let r=t?t.length:0,n=Buffer.alloc(r+12);return n.writeUInt32BE(r,0),n.writeUInt32BE(e,4),t&&t.copy(n,8),n.writeInt32BE(i.crc32(n.slice(4,n.length-4)),n.length-4),n},l.prototype.packGAMA=function(e){let t=Buffer.alloc(4);return t.writeUInt32BE(Math.floor(e*n.GAMMA_DIVISION),0),this._packChunk(n.TYPE_gAMA,t)},l.prototype.packIHDR=function(e,t){let r=Buffer.alloc(13);return r.writeUInt32BE(e,0),r.writeUInt32BE(t,4),r[8]=this._options.bitDepth,r[9]=this._options.colorType,r[10]=0,r[11]=0,r[12]=0,this._packChunk(n.TYPE_IHDR,r)},l.prototype.packIDAT=function(e){return this._packChunk(n.TYPE_IDAT,e)},l.prototype.packIEND=function(){return this._packChunk(n.TYPE_IEND,null)}},1008:e=>{"use strict";e.exports=function(e,t,r){let n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),a=Math.abs(n-r);return i<=o&&i<=a?e:o<=a?t:r}},2336:(e,t,r)=>{"use strict";let n=r(1764),i=r(1568),o=r(2506),a=r(9376),s=r(801),l=r(1349),c=r(9794),d=e.exports=function(e){o.call(this),this._parser=new s(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};n.inherits(d,o),d.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0},d.prototype._inflateData=function(e){if(!this._inflate){if(this._bitmapInfo.interlace)this._inflate=i.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let e=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,t=Math.max(e,i.Z_MIN_CHUNK);this._inflate=i.createInflate({chunkSize:t});let r=e,n=this.emit.bind(this,"error");this._inflate.on("error",function(e){r&&n(e)}),this._filter.on("complete",this._complete.bind(this));let o=this._filter.write.bind(this._filter);this._inflate.on("data",function(e){r&&(e.length>r&&(e=e.slice(0,r)),r-=e.length,o(e))}),this._inflate.on("end",this._filter.end.bind(this._filter))}}this._inflate.write(e)},d.prototype._handleMetaData=function(e){this._metaData=e,this._bitmapInfo=Object.create(e),this._filter=new a(this._bitmapInfo)},d.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e},d.prototype._handlePalette=function(e){this._bitmapInfo.palette=e},d.prototype._simpleTransparency=function(){this._metaData.alpha=!0},d.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},d.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},d.prototype._complete=function(e){let t;if(!this.errord){try{let r=l.dataToBitMap(e,this._bitmapInfo);t=c(r,this._bitmapInfo),r=null}catch(e){this._handleError(e);return}this.emit("parsed",t)}}},369:(e,t,r)=>{"use strict";let n=!0,i=r(1568),o=r(1102);i.deflateSync||(n=!1);let a=r(3381),s=r(5309),l=r(801),c=r(1349),d=r(9794);e.exports=function(e,t){let r,u,h,f;if(!n)throw Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let p=[],g=new a(e);if(new l(t,{read:g.read.bind(g),error:function(e){r=e},metadata:function(e){u=e},gamma:function(e){h=e},palette:function(e){u.palette=e},transColor:function(e){u.transColor=e},inflateData:function(e){p.push(e)},simpleTransparency:function(){u.alpha=!0}}).start(),g.process(),r)throw r;let m=Buffer.concat(p);if(p.length=0,u.interlace)f=i.inflateSync(m);else{let e=((u.width*u.bpp*u.depth+7>>3)+1)*u.height;f=o(m,{chunkSize:e,maxLength:e})}if(m=null,!f||!f.length)throw Error("bad png - invalid inflate data response");let w=s.process(f,u);m=null;let y=c.dataToBitMap(w,u);w=null;let E=d(y,u);return u.data=E,u.gamma=h||0,u}},801:(e,t,r)=>{"use strict";let n=r(2949),i=r(4747),o=e.exports=function(e,t){this._options=e,e.checkCRC=!1!==e.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[n.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[n.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[n.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[n.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[n.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[n.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished,this.simpleTransparency=t.simpleTransparency,this.headersFinished=t.headersFinished||function(){}};o.prototype.start=function(){this.read(n.PNG_SIGNATURE.length,this._parseSignature.bind(this))},o.prototype._parseSignature=function(e){let t=n.PNG_SIGNATURE;for(let r=0;r<t.length;r++)if(e[r]!==t[r]){this.error(Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))},o.prototype._parseChunkBegin=function(e){let t=e.readUInt32BE(0),r=e.readUInt32BE(4),o="";for(let t=4;t<8;t++)o+=String.fromCharCode(e[t]);let a=!!(32&e[4]);if(!this._hasIHDR&&r!==n.TYPE_IHDR){this.error(Error("Expected IHDR on beggining"));return}if(this._crc=new i,this._crc.write(Buffer.from(o)),this._chunks[r])return this._chunks[r](t);if(!a){this.error(Error("Unsupported critical chunk type "+o));return}this.read(t+4,this._skipChunk.bind(this))},o.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},o.prototype._parseChunkEnd=function(e){let t=e.readInt32BE(0),r=this._crc.crc32();if(this._options.checkCRC&&r!==t){this.error(Error("Crc error - "+t+" - "+r));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},o.prototype._parseIHDR=function(e){this._crc.write(e);let t=e.readUInt32BE(0),r=e.readUInt32BE(4),i=e[8],o=e[9],a=e[10],s=e[11],l=e[12];if(8!==i&&4!==i&&2!==i&&1!==i&&16!==i){this.error(Error("Unsupported bit depth "+i));return}if(!(o in n.COLORTYPE_TO_BPP_MAP)){this.error(Error("Unsupported color type"));return}if(0!==a){this.error(Error("Unsupported compression method"));return}if(0!==s){this.error(Error("Unsupported filter method"));return}if(0!==l&&1!==l){this.error(Error("Unsupported interlace method"));return}this._colorType=o;let c=n.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:r,depth:i,interlace:!!l,palette:!!(o&n.COLORTYPE_PALETTE),color:!!(o&n.COLORTYPE_COLOR),alpha:!!(o&n.COLORTYPE_ALPHA),bpp:c,colorType:o}),this._handleChunkEnd()},o.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},o.prototype._parsePLTE=function(e){this._crc.write(e);let t=Math.floor(e.length/3);for(let r=0;r<t;r++)this._palette.push([e[3*r],e[3*r+1],e[3*r+2],255]);this.palette(this._palette),this._handleChunkEnd()},o.prototype._handleTRNS=function(e){this.simpleTransparency(),this.read(e,this._parseTRNS.bind(this))},o.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===n.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length){this.error(Error("Transparency chunk must be after palette"));return}if(e.length>this._palette.length){this.error(Error("More transparent colors than palette size"));return}for(let t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===n.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===n.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()},o.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},o.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/n.GAMMA_DIVISION),this._handleChunkEnd()},o.prototype._handleIDAT=function(e){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-e,this._parseIDAT.bind(this,e))},o.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===n.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw Error("Expected palette not found");this.inflateData(t);let r=e-t.length;r>0?this._handleIDAT(r):this._handleChunkEnd()},o.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},o.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}},438:(e,t,r)=>{"use strict";let n=r(369),i=r(100);t.read=function(e,t){return n(e,t||{})},t.write=function(e,t){return i(e,t)}},1687:(e,t,r)=>{"use strict";let n=r(1764),i=r(6162),o=r(2336),a=r(2243),s=r(438),l=t.y=function(e){i.call(this),e=e||{},this.width=0|e.width,this.height=0|e.height,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new o(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",(function(e){this.data=e,this.emit("parsed",e)}).bind(this)),this._packer=new a(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};n.inherits(l,i),l.sync=s,l.prototype.pack=function(){return this.data&&this.data.length?process.nextTick((function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}).bind(this)):this.emit("error","No data provided"),this},l.prototype.parse=function(e,t){if(t){let e,r;e=(function(e){this.removeListener("error",r),this.data=e,t(null,this)}).bind(this),r=(function(r){this.removeListener("parsed",e),t(r,null)}).bind(this),this.once("parsed",e),this.once("error",r)}return this.end(e),this},l.prototype.write=function(e){return this._parser.write(e),!0},l.prototype.end=function(e){this._parser.end(e)},l.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)},l.prototype._gamma=function(e){this.gamma=e},l.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},l.bitblt=function(e,t,r,n,i,o,a,s){if(n|=0,i|=0,o|=0,a|=0,s|=0,(r|=0)>e.width||n>e.height||r+i>e.width||n+o>e.height)throw Error("bitblt reading outside image");if(a>t.width||s>t.height||a+i>t.width||s+o>t.height)throw Error("bitblt writing outside image");for(let l=0;l<o;l++)e.data.copy(t.data,(s+l)*t.width+a<<2,(n+l)*e.width+r<<2,(n+l)*e.width+r+i<<2)},l.prototype.bitblt=function(e,t,r,n,i,o,a){return l.bitblt(this,e,t,r,n,i,o,a),this},l.adjustGamma=function(e){if(e.gamma){for(let t=0;t<e.height;t++)for(let r=0;r<e.width;r++){let n=e.width*t+r<<2;for(let t=0;t<3;t++){let r=e.data[n+t]/255;r=Math.pow(r,1/2.2/e.gamma),e.data[n+t]=Math.round(255*r)}}e.gamma=0}},l.prototype.adjustGamma=function(){l.adjustGamma(this)}},1102:(e,t,r)=>{"use strict";let n=r(7790).ok,i=r(1568),o=r(1764),a=r(8893).kMaxLength;function s(e){if(!(this instanceof s))return new s(e);e&&e.chunkSize<i.Z_MIN_CHUNK&&(e.chunkSize=i.Z_MIN_CHUNK),i.Inflate.call(this,e),this._offset=void 0===this._offset?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,e&&null!=e.maxLength&&(this._maxLength=e.maxLength)}function l(e,t){t&&process.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function c(e,t){return function(e,t){if("string"==typeof t&&(t=Buffer.from(t)),!(t instanceof Buffer))throw TypeError("Not a string or buffer");let r=e._finishFlushFlag;return null==r&&(r=i.Z_FINISH),e._processChunk(t,r)}(new s(t),e)}s.prototype._processChunk=function(e,t,r){let o,s;if("function"==typeof r)return i.Inflate._processChunk.call(this,e,t,r);let c=this,d=e&&e.length,u=this._chunkSize-this._offset,h=this._maxLength,f=0,p=[],g=0;this.on("error",function(e){o=e}),n(this._handle,"zlib binding closed");do s=(s=this._handle.writeSync(t,e,f,d,this._buffer,this._offset,u))||this._writeState;while(!this._hadError&&function(e,t){if(c._hadError)return;let r=u-t;if(n(r>=0,"have should not go down"),r>0){let e=c._buffer.slice(c._offset,c._offset+r);if(c._offset+=r,e.length>h&&(e=e.slice(0,h)),p.push(e),g+=e.length,0==(h-=e.length))return!1}return(0===t||c._offset>=c._chunkSize)&&(u=c._chunkSize,c._offset=0,c._buffer=Buffer.allocUnsafe(c._chunkSize)),0===t&&(f+=d-e,d=e,!0)}(s[0],s[1]));if(this._hadError)throw o;if(g>=a)throw l(this),RangeError("Cannot create final Buffer. It would be larger than 0x"+a.toString(16)+" bytes");let m=Buffer.concat(p,g);return l(this),m},o.inherits(s,i.Inflate),e.exports=t=c,t.Inflate=s,t.createInflate=function(e){return new s(e)},t.inflateSync=c},3381:e=>{"use strict";let t=e.exports=function(e){this._buffer=e,this._reads=[]};t.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})},t.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let e=this._reads[0];if(this._buffer.length&&(this._buffer.length>=e.length||e.allowLess)){this._reads.shift();let t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}else break}return this._reads.length>0?Error("There are some read requests waitng on finished stream"):this._buffer.length>0?Error("unrecognised content at end of stream"):void 0}},9157:(e,t,r)=>{let n=r(1817),i=r(8895),o=r(3162),a=r(975);function s(e,t,r,o,a){let s=[].slice.call(arguments,1),l=s.length,c="function"==typeof s[l-1];if(!c&&!n())throw Error("Callback required as last argument");if(c){if(l<2)throw Error("Too few arguments provided");2===l?(a=r,r=t,t=o=void 0):3===l&&(t.getContext&&void 0===a?(a=o,o=void 0):(a=o,o=r,r=t,t=void 0))}else{if(l<1)throw Error("Too few arguments provided");return 1===l?(r=t,t=o=void 0):2!==l||t.getContext||(o=r,r=t,t=void 0),new Promise(function(n,a){try{let a=i.create(r,o);n(e(a,t,o))}catch(e){a(e)}})}try{let n=i.create(r,o);a(null,e(n,t,o))}catch(e){a(e)}}i.create,t.toCanvas=s.bind(null,o.render),s.bind(null,o.renderToDataURL),s.bind(null,function(e,t,r){return a.render(e,r)})},1817:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},731:(e,t,r)=>{let n=r(2540).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,r=n(e),i=145===r?26:2*Math.ceil((r-13)/(2*t-2)),o=[r-7];for(let e=1;e<t-1;e++)o[e]=o[e-1]-i;return o.push(6),o.reverse()},t.getPositions=function(e){let r=[],n=t.getRowColCoords(e),i=n.length;for(let e=0;e<i;e++)for(let t=0;t<i;t++)(0!==e||0!==t)&&(0!==e||t!==i-1)&&(e!==i-1||0!==t)&&r.push([n[e],n[t]]);return r}},2307:(e,t,r)=>{let n=r(7798),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=n.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*i.indexOf(this.data[t]);r+=i.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},e.exports=o},6730:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){return(this.buffer[Math.floor(e/8)]>>>7-e%8&1)==1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},4638:e=>{function t(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,r,n){let i=e*this.size+t;this.data[i]=r,n&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},592:(e,t,r)=>{let n=r(7798);function i(e){this.mode=n.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},e.exports=i},4134:(e,t,r)=>{let n=r(8431),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case n.L:return i[(e-1)*4+0];case n.M:return i[(e-1)*4+1];case n.Q:return i[(e-1)*4+2];case n.H:return i[(e-1)*4+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return o[(e-1)*4+0];case n.M:return o[(e-1)*4+1];case n.Q:return o[(e-1)*4+2];case n.H:return o[(e-1)*4+3];default:return}}},8431:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw Error("Unknown EC Level: "+e)}}(e)}catch(e){return r}}},7422:(e,t,r)=>{let n=r(2540).getSymbolSize;t.getPositions=function(e){let t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},6445:(e,t,r)=>{let n=r(2540),i=n.getBCHDigit(1335);t.getEncodedBits=function(e,t){let r=e.bit<<3|t,o=r<<10;for(;n.getBCHDigit(o)-i>=0;)o^=1335<<n.getBCHDigit(o)-i;return(r<<10|o)^21522}},2959:(e,t)=>{let r=new Uint8Array(512),n=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)r[t]=e,n[e]=t,256&(e<<=1)&&(e^=285);for(let e=255;e<512;e++)r[e]=r[e-255]})(),t.log=function(e){if(e<1)throw Error("log("+e+")");return n[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[n[e]+n[t]]}},3616:(e,t,r)=>{let n=r(7798),i=r(2540);function o(e){this.mode=n.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=i.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r=(r>>>8&255)*192+(255&r),e.put(r,13)}},e.exports=o},6754:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};let r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){let t=e.size,n=0,i=0,o=0,a=null,s=null;for(let l=0;l<t;l++){i=o=0,a=s=null;for(let c=0;c<t;c++){let t=e.get(l,c);t===a?i++:(i>=5&&(n+=r.N1+(i-5)),a=t,i=1),(t=e.get(c,l))===s?o++:(o>=5&&(n+=r.N1+(o-5)),s=t,o=1)}i>=5&&(n+=r.N1+(i-5)),o>=5&&(n+=r.N1+(o-5))}return n},t.getPenaltyN2=function(e){let t=e.size,n=0;for(let r=0;r<t-1;r++)for(let i=0;i<t-1;i++){let t=e.get(r,i)+e.get(r,i+1)+e.get(r+1,i)+e.get(r+1,i+1);(4===t||0===t)&&n++}return n*r.N2},t.getPenaltyN3=function(e){let t=e.size,n=0,i=0,o=0;for(let r=0;r<t;r++){i=o=0;for(let a=0;a<t;a++)i=i<<1&2047|e.get(r,a),a>=10&&(1488===i||93===i)&&n++,o=o<<1&2047|e.get(a,r),a>=10&&(1488===o||93===o)&&n++}return n*r.N3},t.getPenaltyN4=function(e){let t=0,n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*r.N4},t.applyMask=function(e,r){let n=r.size;for(let i=0;i<n;i++)for(let o=0;o<n;o++)r.isReserved(o,i)||r.xor(o,i,function(e,r,n){switch(e){case t.Patterns.PATTERN000:return(r+n)%2==0;case t.Patterns.PATTERN001:return r%2==0;case t.Patterns.PATTERN010:return n%3==0;case t.Patterns.PATTERN011:return(r+n)%3==0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(n/3))%2==0;case t.Patterns.PATTERN101:return r*n%2+r*n%3==0;case t.Patterns.PATTERN110:return(r*n%2+r*n%3)%2==0;case t.Patterns.PATTERN111:return(r*n%3+(r+n)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,o,i))},t.getBestMask=function(e,r){let n=Object.keys(t.Patterns).length,i=0,o=1/0;for(let a=0;a<n;a++){r(a),t.applyMask(a,e);let n=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(a,e),n<o&&(o=n,i=a)}return i}},7798:(e,t,r)=>{let n=r(8517),i=r(232);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!n.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return i.testNumeric(e)?t.NUMERIC:i.testAlphanumeric(e)?t.ALPHANUMERIC:i.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw Error("Unknown mode: "+e)}}(e)}catch(e){return r}}},4790:(e,t,r)=>{let n=r(7798);function i(e){this.mode=n.NUMERIC,this.data=e.toString()}i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t,r;for(t=0;t+3<=this.data.length;t+=3)r=parseInt(this.data.substr(t,3),10),e.put(r,10);let n=this.data.length-t;n>0&&(r=parseInt(this.data.substr(t),10),e.put(r,3*n+1))},e.exports=i},6686:(e,t,r)=>{let n=r(2959);t.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++)r[i+o]^=n.mul(e[i],t[o]);return r},t.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let e=r[0];for(let i=0;i<t.length;i++)r[i]^=n.mul(t[i],e);let i=0;for(;i<r.length&&0===r[i];)i++;r=r.slice(i)}return r},t.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let i=0;i<e;i++)r=t.mul(r,new Uint8Array([1,n.exp(i)]));return r}},8895:(e,t,r)=>{let n=r(2540),i=r(8431),o=r(6730),a=r(4638),s=r(731),l=r(7422),c=r(6754),d=r(4134),u=r(9444),h=r(5463),f=r(6445),p=r(7798),g=r(6485);function m(e,t,r){let n,i;let o=e.size,a=f.getEncodedBits(t,r);for(n=0;n<15;n++)i=(a>>n&1)==1,n<6?e.set(n,8,i,!0):n<8?e.set(n+1,8,i,!0):e.set(o-15+n,8,i,!0),n<8?e.set(8,o-n-1,i,!0):n<9?e.set(8,15-n-1+1,i,!0):e.set(8,15-n-1,i,!0);e.set(o-8,8,1,!0)}t.create=function(e,t){let r,f;if(void 0===e||""===e)throw Error("No input text");let w=i.M;return void 0!==t&&(w=i.from(t.errorCorrectionLevel,i.M),r=h.from(t.version),f=c.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),function(e,t,r,i){let f;if(Array.isArray(e))f=g.fromArray(e);else if("string"==typeof e){let n=t;if(!n){let t=g.rawSplit(e);n=h.getBestVersionForData(t,r)}f=g.fromString(e,n||40)}else throw Error("Invalid data");let w=h.getBestVersionForData(f,r);if(!w)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<w)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+w+".\n")}else t=w;let y=function(e,t,r){let i=new o;r.forEach(function(t){i.put(t.mode.bit,4),i.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(i)});let a=(n.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t))*8;for(i.getLengthInBits()+4<=a&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);let s=(a-i.getLengthInBits())/8;for(let e=0;e<s;e++)i.put(e%2?17:236,8);return function(e,t,r){let i,o;let a=n.getSymbolTotalCodewords(t),s=a-d.getTotalCodewordsCount(t,r),l=d.getBlocksCount(t,r),c=a%l,h=l-c,f=Math.floor(a/l),p=Math.floor(s/l),g=p+1,m=f-p,w=new u(m),y=0,E=Array(l),C=Array(l),A=0,x=new Uint8Array(e.buffer);for(let e=0;e<l;e++){let t=e<h?p:g;E[e]=x.slice(y,y+t),C[e]=w.encode(E[e]),y+=t,A=Math.max(A,t)}let b=new Uint8Array(a),v=0;for(i=0;i<A;i++)for(o=0;o<l;o++)i<E[o].length&&(b[v++]=E[o][i]);for(i=0;i<m;i++)for(o=0;o<l;o++)b[v++]=C[o][i];return b}(i,e,t)}(t,r,f),E=new a(n.getSymbolSize(t));return function(e,t){let r=e.size,n=l.getPositions(t);for(let t=0;t<n.length;t++){let i=n[t][0],o=n[t][1];for(let t=-1;t<=7;t++)if(!(i+t<=-1)&&!(r<=i+t))for(let n=-1;n<=7;n++)o+n<=-1||r<=o+n||(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(i+t,o+n,!0,!0):e.set(i+t,o+n,!1,!0))}}(E,t),function(e){let t=e.size;for(let r=8;r<t-8;r++){let t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}(E),function(e,t){let r=s.getPositions(t);for(let t=0;t<r.length;t++){let n=r[t][0],i=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(n+t,i+r,!0,!0):e.set(n+t,i+r,!1,!0)}}(E,t),m(E,r,0),t>=7&&function(e,t){let r,n,i;let o=e.size,a=h.getEncodedBits(t);for(let t=0;t<18;t++)r=Math.floor(t/3),n=t%3+o-8-3,i=(a>>t&1)==1,e.set(r,n,i,!0),e.set(n,r,i,!0)}(E,t),function(e,t){let r=e.size,n=-1,i=r-1,o=7,a=0;for(let s=r-1;s>0;s-=2)for(6===s&&s--;;){for(let r=0;r<2;r++)if(!e.isReserved(i,s-r)){let n=!1;a<t.length&&(n=(t[a]>>>o&1)==1),e.set(i,s-r,n),-1==--o&&(a++,o=7)}if((i+=n)<0||r<=i){i-=n,n=-n;break}}}(E,y),isNaN(i)&&(i=c.getBestMask(E,m.bind(null,E,r))),c.applyMask(i,E),m(E,r,i),{modules:E,version:t,errorCorrectionLevel:r,maskPattern:i,segments:f}}(e,r,w,f)}},9444:(e,t,r)=>{let n=r(6686);function i(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},i.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=n.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){let e=new Uint8Array(this.degree);return e.set(r,i),e}return r},e.exports=i},232:(e,t)=>{let r="[0-9]+",n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",i="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=RegExp(n,"g"),t.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=RegExp(i,"g"),t.NUMERIC=RegExp(r,"g"),t.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let o=RegExp("^"+n+"$"),a=RegExp("^"+r+"$"),s=RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return o.test(e)},t.testNumeric=function(e){return a.test(e)},t.testAlphanumeric=function(e){return s.test(e)}},6485:(e,t,r)=>{let n=r(7798),i=r(4790),o=r(2307),a=r(592),s=r(3616),l=r(232),c=r(2540),d=r(4414);function u(e){return unescape(encodeURIComponent(e)).length}function h(e,t,r){let n;let i=[];for(;null!==(n=e.exec(r));)i.push({data:n[0],index:n.index,mode:t,length:n[0].length});return i}function f(e){let t,r;let i=h(l.NUMERIC,n.NUMERIC,e),o=h(l.ALPHANUMERIC,n.ALPHANUMERIC,e);return c.isKanjiModeEnabled()?(t=h(l.BYTE,n.BYTE,e),r=h(l.KANJI,n.KANJI,e)):(t=h(l.BYTE_KANJI,n.BYTE,e),r=[]),i.concat(o,t,r).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function p(e,t){switch(t){case n.NUMERIC:return i.getBitsLength(e);case n.ALPHANUMERIC:return o.getBitsLength(e);case n.KANJI:return s.getBitsLength(e);case n.BYTE:return a.getBitsLength(e)}}function g(e,t){let r;let l=n.getBestModeForData(e);if((r=n.from(t,l))!==n.BYTE&&r.bit<l.bit)throw Error('"'+e+'" cannot be encoded with mode '+n.toString(r)+".\n Suggested mode is: "+n.toString(l));switch(r!==n.KANJI||c.isKanjiModeEnabled()||(r=n.BYTE),r){case n.NUMERIC:return new i(e);case n.ALPHANUMERIC:return new o(e);case n.KANJI:return new s(e);case n.BYTE:return new a(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},t.fromString=function(e,r){let i=function(e,t){let r={},i={start:{}},o=["start"];for(let a=0;a<e.length;a++){let s=e[a],l=[];for(let e=0;e<s.length;e++){let c=s[e],d=""+a+e;l.push(d),r[d]={node:c,lastCount:0},i[d]={};for(let e=0;e<o.length;e++){let a=o[e];r[a]&&r[a].node.mode===c.mode?(i[a][d]=p(r[a].lastCount+c.length,c.mode)-p(r[a].lastCount,c.mode),r[a].lastCount+=c.length):(r[a]&&(r[a].lastCount=c.length),i[a][d]=p(c.length,c.mode)+4+n.getCharCountIndicator(c.mode,t))}}o=l}for(let e=0;e<o.length;e++)i[o[e]].end=0;return{map:i,table:r}}(function(e){let t=[];for(let r=0;r<e.length;r++){let i=e[r];switch(i.mode){case n.NUMERIC:t.push([i,{data:i.data,mode:n.ALPHANUMERIC,length:i.length},{data:i.data,mode:n.BYTE,length:i.length}]);break;case n.ALPHANUMERIC:t.push([i,{data:i.data,mode:n.BYTE,length:i.length}]);break;case n.KANJI:t.push([i,{data:i.data,mode:n.BYTE,length:u(i.data)}]);break;case n.BYTE:t.push([{data:i.data,mode:n.BYTE,length:u(i.data)}])}}return t}(f(e,c.isKanjiModeEnabled())),r),o=d.find_path(i.map,"start","end"),a=[];for(let e=1;e<o.length-1;e++)a.push(i.table[o[e]].node);return t.fromArray(a.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},t.rawSplit=function(e){return t.fromArray(f(e,c.isKanjiModeEnabled()))}},2540:(e,t)=>{let r;let n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return n[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');r=e},t.isKanjiModeEnabled=function(){return void 0!==r},t.toSJIS=function(e){return r(e)}},8517:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},5463:(e,t,r)=>{let n=r(2540),i=r(4134),o=r(8431),a=r(7798),s=r(8517),l=n.getBCHDigit(7973);function c(e,t){return a.getCharCountIndicator(e,t)+4}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,r){if(!s.isValid(e))throw Error("Invalid QR Code version");void 0===r&&(r=a.BYTE);let o=(n.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t))*8;if(r===a.MIXED)return o;let l=o-c(r,e);switch(r){case a.NUMERIC:return Math.floor(l/10*3);case a.ALPHANUMERIC:return Math.floor(l/11*2);case a.KANJI:return Math.floor(l/13);case a.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,r){let n;let i=o.from(r,o.M);if(Array.isArray(e)){if(e.length>1)return function(e,r){for(let n=1;n<=40;n++)if(function(e,t){let r=0;return e.forEach(function(e){let n=c(e.mode,t);r+=n+e.getBitsLength()}),r}(e,n)<=t.getCapacity(n,r,a.MIXED))return n}(e,i);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,r,n){for(let i=1;i<=40;i++)if(r<=t.getCapacity(i,n,e))return i}(n.mode,n.getLength(),i)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-l>=0;)t^=7973<<n.getBCHDigit(t)-l;return e<<12|t}},1270:(e,t,r)=>{"use strict";e.exports=r(5570)},3162:(e,t,r)=>{let n=r(802);t.render=function(e,t,r){var i;let o=r,a=t;void 0!==o||t&&t.getContext||(o=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),o=n.getOptions(o);let s=n.getImageWidth(e.modules.size,o),l=a.getContext("2d"),c=l.createImageData(s,s);return n.qrToImageData(c.data,e,o),i=a,l.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=s,i.width=s,i.style.height=s+"px",i.style.width=s+"px",l.putImageData(c,0,0),a},t.renderToDataURL=function(e,r,n){let i=n;void 0!==i||r&&r.getContext||(i=r,r=void 0),i||(i={});let o=t.render(e,r,i),a=i.type||"image/png",s=i.rendererOpts||{};return o.toDataURL(a,s.quality)}},8276:(e,t,r)=>{let n=r(2048),i=r(1687).y,o=r(802);t.render=function(e,t){let r=o.getOptions(t),n=r.rendererOpts,a=o.getImageWidth(e.modules.size,r);n.width=a,n.height=a;let s=new i(n);return o.qrToImageData(s.data,e,r),s},t.renderToDataURL=function(e,r,n){void 0===n&&(n=r,r=void 0),t.renderToBuffer(e,r,function(e,t){e&&n(e);let r="data:image/png;base64,";r+=t.toString("base64"),n(null,r)})},t.renderToBuffer=function(e,r,n){void 0===n&&(n=r,r=void 0);let i=t.render(e,r),o=[];i.on("error",n),i.on("data",function(e){o.push(e)}),i.on("end",function(){n(null,Buffer.concat(o))}),i.pack()},t.renderToFile=function(e,r,i,o){void 0===o&&(o=i,i=void 0);let a=!1,s=(...e)=>{a||(a=!0,o.apply(null,e))},l=n.createWriteStream(e);l.on("error",s),l.on("close",s),t.renderToFileStream(l,r,i)},t.renderToFileStream=function(e,r,n){t.render(r,n).pack().pipe(e)}},975:(e,t,r)=>{let n=r(802);function i(e,t){let r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function o(e,t,r){let n=e+t;return void 0!==r&&(n+=" "+r),n}t.render=function(e,t,r){let a=n.getOptions(t),s=e.modules.size,l=e.modules.data,c=s+2*a.margin,d=a.color.light.a?"<path "+i(a.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",u="<path "+i(a.color.dark,"stroke")+' d="'+function(e,t,r){let n="",i=0,a=!1,s=0;for(let l=0;l<e.length;l++){let c=Math.floor(l%t),d=Math.floor(l/t);c||a||(a=!0),e[l]?(s++,l>0&&c>0&&e[l-1]||(n+=a?o("M",c+r,.5+d+r):o("m",i,0),i=0,a=!1),c+1<t&&e[l+1]||(n+=o("h",s),s=0)):i++}return n}(l,s,a.margin)+'"/>',h='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+('viewBox="0 0 '+c)+" "+c+'" shape-rendering="crispEdges">'+d+u+"</svg>\n";return"function"==typeof r&&r(null,h),h}},7979:(e,t,r)=>{let n=r(975);t.render=n.render,t.renderToFile=function(e,n,i,o){void 0===o&&(o=i,i=void 0);let a=r(2048),s=t.render(n,i);a.writeFile(e,'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+s,o)}},3678:(e,t,r)=>{let n=r(8821),i=r(3853);t.render=function(e,t,r){return t&&t.small?i.render(e,t,r):n.render(e,t,r)}},3853:(e,t)=>{let r="\x1b[37m",n="\x1b[30m",i="\x1b[0m",o="\x1b[47m"+n,a="\x1b[40m"+r,s=function(e,t,r,n){let i=t+1;return r>=i||n>=i||n<-1||r<-1?"0":r>=t||n>=t||n<0||r<0?"1":e[n*t+r]?"2":"1"},l=function(e,t,r,n){return s(e,t,r,n)+s(e,t,r,n+1)};t.render=function(e,t,s){var c,d;let u=e.modules.size,h=e.modules.data,f=!!(t&&t.inverse),p=t&&t.inverse?a:o,g={"00":i+" "+p,"01":i+(c=f?n:r)+"â–„"+p,"02":i+(d=f?r:n)+"â–„"+p,10:i+c+"â–€"+p,11:" ",12:"â–„",20:i+d+"â–€"+p,21:"â–€",22:"â–ˆ"},m=i+"\n"+p,w=p;for(let e=-1;e<u+1;e+=2){for(let t=-1;t<u;t++)w+=g[l(h,u,t,e)];w+=g[l(h,u,u,e)]+m}return w+=i,"function"==typeof s&&s(null,w),w}},8821:(e,t)=>{t.render=function(e,t,r){let n=e.modules.size,i=e.modules.data,o="\x1b[47m  \x1b[0m",a="",s=Array(n+3).join(o),l=[,,].join(o);a+=s+"\n";for(let e=0;e<n;++e){a+=o;for(let t=0;t<n;t++)a+=i[e*n+t]?"\x1b[40m  \x1b[0m":o;a+=l+"\n"}return a+=s+"\n","function"==typeof r&&r(null,a),a}},6318:(e,t,r)=>{let n=r(802),i={WW:" ",WB:"â–„",BB:"â–ˆ",BW:"â–€"},o={BB:" ",BW:"â–„",WW:"â–ˆ",WB:"â–€"};t.render=function(e,t,r){let a=n.getOptions(t),s=i;("#ffffff"===a.color.dark.hex||"#000000"===a.color.light.hex)&&(s=o);let l=e.modules.size,c=e.modules.data,d="",u=Array(l+2*a.margin+1).join(s.WW);u=Array(a.margin/2+1).join(u+"\n");let h=Array(a.margin+1).join(s.WW);d+=u;for(let e=0;e<l;e+=2){d+=h;for(let t=0;t<l;t++){var f;let r=c[e*l+t],n=c[(e+1)*l+t];d+=(f=s,r&&n?f.BB:r&&!n?f.BW:!r&&n?f.WB:f.WW)}d+=h+"\n"}return d+=u.slice(0,-1),"function"==typeof r&&r(null,d),d},t.renderToFile=function(e,n,i,o){void 0===o&&(o=i,i=void 0);let a=r(2048),s=t.render(n,i);a.writeFile(e,s,o)}},802:(e,t)=>{function r(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:n,scale:n?4:i,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,r){let n=t.getScale(e,r);return Math.floor((e+2*r.margin)*n)},t.qrToImageData=function(e,r,n){let i=r.modules.size,o=r.modules.data,a=t.getScale(i,n),s=Math.floor((i+2*n.margin)*a),l=n.margin*a,c=[n.color.light,n.color.dark];for(let t=0;t<s;t++)for(let r=0;r<s;r++){let d=(t*s+r)*4,u=n.color.light;t>=l&&r>=l&&t<s-l&&r<s-l&&(u=c[o[Math.floor((t-l)/a)*i+Math.floor((r-l)/a)]?1:0]),e[d++]=u.r,e[d++]=u.g,e[d++]=u.b,e[d]=u.a}}},5570:(e,t,r)=>{let n=r(1817),i=r(8895),o=r(8276),a=r(6318),s=r(3678),l=r(7979);function c(e,t,r){if(void 0===e)throw Error("String required as first argument");if(void 0===r&&(r=t,t={}),"function"!=typeof r){if(n())t=r||{},r=null;else throw Error("Callback required as last argument")}return{opts:t,cb:r}}function d(e){switch(e){case"svg":return l;case"txt":case"utf8":return a;default:return o}}function u(e,t,r){if(!r.cb)return new Promise(function(n,o){try{let a=i.create(t,r.opts);return e(a,r.opts,function(e,t){return e?o(e):n(t)})}catch(e){o(e)}});try{let n=i.create(t,r.opts);return e(n,r.opts,r.cb)}catch(e){r.cb(e)}}t.create=i.create,t.toCanvas=r(9157).toCanvas,t.toString=function(e,t,r){let n=c(e,t,r);return u(function(e){switch(e){case"svg":return l;case"terminal":return s;default:return a}}(n.opts?n.opts.type:void 0).render,e,n)},t.toDataURL=function(e,t,r){let n=c(e,t,r);return u(d(n.opts.type).renderToDataURL,e,n)},t.toBuffer=function(e,t,r){let n=c(e,t,r);return u(d(n.opts.type).renderToBuffer,e,n)},t.toFile=function(e,t,r,i){if("string"!=typeof e||!("string"==typeof t||"object"==typeof t))throw Error("Invalid argument");if(arguments.length<3&&!n())throw Error("Too few arguments provided");let o=c(t,r,i);return u(d(o.opts.type||e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase()).renderToFile.bind(null,e),t,o)},t.toFileStream=function(e,t,r){if(arguments.length<2)throw Error("Too few arguments provided");let n=c(t,r,e.emit.bind(e,"error"));u(d("png").renderToFileStream.bind(null,e),t,n)}},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>l});var n=r(9510),i=r(2547),o=r.n(i),a=r(4700),s=r.n(a);r(7272);let l={title:"EasyStock",description:"Created with v0",generator:"v0.dev"};function c({children:e}){return n.jsx("html",{lang:"en",className:`${o().className} ${s().variable}`,suppressHydrationWarning:!0,children:n.jsx("body",{children:e})})}},908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(8570).createProxy)(String.raw`/Users/jvalegri/tcc-jvalegri-1/app/page.tsx#default`)},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,944],()=>r(4188));module.exports=n})();